"use strict";(self.webpackChunkvisual_coin=self.webpackChunkvisual_coin||[]).push([[63],{63:function(t,i,e){e.d(i,{Mr:function(){return Se},C2:function(){return $n}});var n=e(9439),s=e(1752),h=e(1120),r=e(7762),a=e(7326),u=e(136),l=e(7277),o=e(3433),c=e(5671),f=e(3144);function v(t){var i=t.width,e=t.height;if(i<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:i,height:e}}function d(t,i){return t.width===i.width&&t.height===i.height}var y=function(){function t(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var i=this,e={next:t};return this._observers.push(e),{unsubscribe:function(){i._observers=i._observers.filter((function(t){return t!==e}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(i){return i.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}();var p=function(){function t(t,i,e){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=v({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!==i&&void 0!==i?i:function(t){return t},this._allowResizeObserver=null===(n=null===e||void 0===e?void 0:e.allowResizeObserver)||void 0===n||n,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,i;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(i=this._devicePixelRatioObservable)||void 0===i||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return v({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=v(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(i){return i!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(i){return i!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var i=this.bitmapSize;d(i,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},t.prototype._emitBitmapSizeChanged=function(t,i){var e=this;this._bitmapSizeChangedListeners.forEach((function(n){return n.call(e,t,i)}))},t.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,e=v(this._transformBitmapSize(t,this._canvasElementClientSize)),n=d(this.bitmapSize,e)?null:e;null===i&&null===n||null!==i&&null!==n&&d(i,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(i,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var e=this;this._suggestedBitmapSizeChangedListeners.forEach((function(n){return n.call(e,t,i)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var i=new ResizeObserver((function(e){t(e.every((function(t){return"devicePixelContentBoxSize"in t}))),i.disconnect()}));i.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var i=m(this._canvasElement);if(null===i)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new y(t)}(i),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,i;if(null!==this._canvasElement){var e=m(this._canvasElement);if(null!==e){var n=null!==(i=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==i?i:e.devicePixelRatio,s=this._canvasElement.getClientRects(),h=void 0!==s[0]?function(t,i){return v({width:Math.round(t.left*i+t.width*i)-Math.round(t.left*i),height:Math.round(t.top*i+t.height*i)-Math.round(t.top*i)})}(s[0],n):v({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(h)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(i){var e=i.find((function(i){return i.target===t._canvasElement}));if(e&&e.devicePixelContentBoxSize&&e.devicePixelContentBoxSize[0]){var n=e.devicePixelContentBoxSize[0],s=v({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(s)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function m(t){return t.ownerDocument.defaultView}var k,g,b,w=function(){function t(t,i,e){if(0===i.width||0===i.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,0===e.width||0===e.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=e,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function _(t,i){var e=t.canvasElementClientSize;if(0===e.width||0===e.height)return null;var n=t.bitmapSize;if(0===n.width||0===n.height)return null;var s=t.canvasElement.getContext("2d",i);return null===s?null:new w(s,e,n)}function M(t,i){var e={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(e)}function S(t,i,e,n){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(e,i+s),t.lineTo(n,i+s),t.stroke()}function z(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function C(t){if(void 0===t)throw new Error("Value is undefined");return t}function x(t){if(null===t)throw new Error("Value is null");return t}function T(t){return x(C(t))}(b=k||(k={}))[b.Simple=0]="Simple",b[b.WithSteps=1]="WithSteps",b[b.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(g||(g={}));var Z={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function E(t){return t<0?0:t>255?255:Math.round(t)||0}function L(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var N=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,F=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,B=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,P=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function R(t){(t=t.toLowerCase())in Z&&(t=Z[t]);var i=P.exec(t)||B.exec(t);if(i)return[E(parseInt(i[1],10)),E(parseInt(i[2],10)),E(parseInt(i[3],10)),L(i.length<5?1:parseFloat(i[4]))];var e=F.exec(t);if(e)return[E(parseInt(e[1],16)),E(parseInt(e[2],16)),E(parseInt(e[3],16)),1];var n=N.exec(t);if(n)return[E(17*parseInt(n[1],16)),E(17*parseInt(n[2],16)),E(17*parseInt(n[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function A(t){var i,e=R(t);return{t:"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var D=function(){function t(){(0,c.Z)(this,t),this.h=[]}return(0,f.Z)(t,[{key:"l",value:function(t,i,e){var n={o:t,_:i,u:!0===e};this.h.push(n)}},{key:"p",value:function(t){var i=this.h.findIndex((function(i){return t===i.o}));i>-1&&this.h.splice(i,1)}},{key:"v",value:function(t){this.h=this.h.filter((function(i){return i._!==t}))}},{key:"m",value:function(t,i,e){var n=(0,o.Z)(this.h);this.h=this.h.filter((function(t){return!t.u})),n.forEach((function(n){return n.o(t,i,e)}))}},{key:"g",value:function(){return this.h.length>0}},{key:"M",value:function(){this.h=[]}}]),t}();function V(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];for(var s=0,h=e;s<h.length;s++){var r=h[s];for(var a in r)void 0!==r[a]&&("object"!=typeof r[a]||void 0===t[a]?t[a]=r[a]:V(t[a],r[a]))}return t}function O(t){return"number"==typeof t&&isFinite(t)}function U(t){return"number"==typeof t&&t%1==0}function I(t){return"string"==typeof t}function W(t){return"boolean"==typeof t}function H(t){var i,e,n,s=t;if(!s||"object"!=typeof s)return s;for(e in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(e)&&(n=s[e],i[e]=n&&"object"==typeof n?H(n):n);return i}function Y(t){return null!==t}function G(t){return null===t?void 0:t}var j="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function K(t,i,e){return void 0===i&&(i=j),"".concat(e=void 0!==e?"".concat(e," "):"").concat(t,"px ").concat(i)}var X=function(){function t(i){(0,c.Z)(this,t),this.S={k:1,C:5,T:NaN,P:"",R:"",D:"",B:"",A:0,O:0,L:0,I:0,V:0},this.N=i}return(0,f.Z)(t,[{key:"F",value:function(){var t=this.S,i=this.W(),e=this.j();return t.T===i&&t.R===e||(t.T=i,t.R=e,t.P=K(i,e),t.I=2.5/12*i,t.A=t.I,t.O=i/12*t.C,t.L=i/12*t.C,t.V=0),t.D=this.$(),t.B=this.H(),this.S}},{key:"$",value:function(){return this.N.F().layout.textColor}},{key:"H",value:function(){return this.N.U()}},{key:"W",value:function(){return this.N.F().layout.fontSize}},{key:"j",value:function(){return this.N.F().layout.fontFamily}}]),t}(),J=function(){function t(){(0,c.Z)(this,t),this.q=[]}return(0,f.Z)(t,[{key:"Y",value:function(t){this.q=t}},{key:"X",value:function(t,i,e){this.q.forEach((function(n){n.X(t,i,e)}))}}]),t}(),q=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"X",value:function(t,i,e){var n=this;t.useMediaCoordinateSpace((function(t){return n.Z(t,i,e)}))}},{key:"K",value:function(t,i,e){var n=this;t.useMediaCoordinateSpace((function(t){return n.G(t,i,e)}))}},{key:"G",value:function(t,i,e){}}]),t}(),Q=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).J=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.J=t}},{key:"Z",value:function(t){var i=t.context;if(null!==this.J&&null!==this.J.it){var e=this.J.it,n=this.J,s=function(t){i.beginPath();for(var s=e.to-1;s>=e.from;--s){var h=n.nt[s];i.moveTo(h.st,h.et),i.arc(h.st,h.et,t,0,2*Math.PI)}i.fill()};n.rt>0&&(i.fillStyle=n.ht,s(n.lt+n.rt)),i.fillStyle=n.ot,s(n.lt)}}}]),e}(q);function $(){return{nt:[{st:0,et:0,_t:0,ut:0}],ot:"",ht:"",lt:0,rt:0,it:null}}var tt={from:0,to:1},it=function(){function t(i,e){(0,c.Z)(this,t),this.ct=new J,this.dt=[],this.ft=[],this.vt=!0,this.N=i,this.bt=e,this.ct.Y(this.dt)}return(0,f.Z)(t,[{key:"gt",value:function(t){var i=this.N.wt();i.length!==this.dt.length&&(this.ft=i.map($),this.dt=this.ft.map((function(t){var i=new Q;return i.tt(t),i})),this.ct.Y(this.dt)),this.vt=!0}},{key:"Mt",value:function(){return this.vt&&(this.St(),this.vt=!1),this.ct}},{key:"St",value:function(){var t=this,i=this.N.wt(),e=this.bt.xt(),n=this.N.yt();i.forEach((function(i,s){var h,r=t.ft[s],a=i.kt(e);if(null!==a&&i.Ct()){var u=x(i.Tt());r.ot=a.Pt,r.lt=a.lt,r.rt=a.Rt,r.nt[0].ut=a.ut,r.nt[0].et=i.Bt().Dt(a.ut,u.At),r.ht=null!==(h=a.Ot)&&void 0!==h?h:t.N.Lt(r.nt[0].et/i.Bt().It()),r.nt[0]._t=e,r.nt[0].st=n.Et(e),r.it=tt}else r.it=null}))}}]),t}(),et=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"X",value:function(t,i,e){var n=this;t.useBitmapCoordinateSpace((function(t){return n.Z(t,i,e)}))}}]),t}(),nt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).zt=t,n}return(0,f.Z)(e,[{key:"Z",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(null!==this.zt){var h=this.zt.Vt.Ct,r=this.zt.Nt.Ct;if(h||r){var a=Math.round(this.zt.st*n),u=Math.round(this.zt.et*s);i.lineCap="butt",h&&a>=0&&(i.lineWidth=Math.floor(this.zt.Vt.rt*n),i.strokeStyle=this.zt.Vt.D,i.fillStyle=this.zt.Vt.D,M(i,this.zt.Vt.Ft),function(t,i,e,n){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,0),t.lineTo(i+s,n),t.stroke()}(i,a,0,e.height)),r&&u>=0&&(i.lineWidth=Math.floor(this.zt.Nt.rt*s),i.strokeStyle=this.zt.Nt.D,i.fillStyle=this.zt.Nt.D,M(i,this.zt.Nt.Ft),S(i,u,0,e.width))}}}}]),e}(et),st=function(){function t(i){(0,c.Z)(this,t),this.vt=!0,this.Wt={Vt:{rt:1,Ft:0,D:"",Ct:!1},Nt:{rt:1,Ft:0,D:"",Ct:!1},st:0,et:0},this.jt=new nt(this.Wt),this.$t=i}return(0,f.Z)(t,[{key:"gt",value:function(){this.vt=!0}},{key:"Mt",value:function(){return this.vt&&(this.St(),this.vt=!1),this.jt}},{key:"St",value:function(){var t=this.$t.Ct(),i=x(this.$t.Ht()),e=i.Ut().F().crosshair,n=this.Wt;n.Nt.Ct=t&&this.$t.qt(i),n.Vt.Ct=t&&this.$t.Yt(),n.Nt.rt=e.horzLine.width,n.Nt.Ft=e.horzLine.style,n.Nt.D=e.horzLine.color,n.Vt.rt=e.vertLine.width,n.Vt.Ft=e.vertLine.style,n.Vt.D=e.vertLine.color,n.st=this.$t.Xt(),n.et=this.$t.Zt()}}]),t}();function ht(t,i,e,n,s,h){t.fillRect(i+h,e,n-2*h,h),t.fillRect(i+h,e+s-h,n-2*h,h),t.fillRect(i,e,h,s),t.fillRect(i+n-h,e,h,s)}function rt(t,i,e,n,s,h){t.save(),t.globalCompositeOperation="copy",t.fillStyle=h,t.fillRect(i,e,n,s),t.restore()}function at(t,i){return Array.isArray(t)?t.map((function(t){return 0===t?t:t+i})):t+i}function ut(t,i,e,n,s,h){var r,a,u,l;if(Array.isArray(h))if(2===h.length){var o=Math.max(0,h[0]),c=Math.max(0,h[1]);r=o,a=o,u=c,l=c}else{if(4!==h.length)throw new Error("Wrong border radius - it should be like css border radius");r=Math.max(0,h[0]),a=Math.max(0,h[1]),u=Math.max(0,h[2]),l=Math.max(0,h[3])}else{var f=Math.max(0,h);r=f,a=f,u=f,l=f}t.beginPath(),t.moveTo(i+r,e),t.lineTo(i+n-a,e),0!==a&&t.arcTo(i+n,e,i+n,e+a,a),t.lineTo(i+n,e+s-u),0!==u&&t.arcTo(i+n,e+s,i+n-u,e+s,u),t.lineTo(i+l,e+s),0!==l&&t.arcTo(i,e+s,i,e+s-l,l),t.lineTo(i,e+r),0!==r&&t.arcTo(i,e,i+r,e,r)}function lt(t,i,e,n,s,h){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";if(t.save(),!r||!u||u===h)return ut(t,i,e,n,s,a),t.fillStyle=h,t.fill(),void t.restore();var l=r/2;"transparent"!==h&&(ut(t,i+r,e+r,n-2*r,s-2*r,at(a,-r)),t.fillStyle=h,t.fill()),"transparent"!==u&&(ut(t,i+l,e+l,n-r,s-r,at(a,-l)),t.lineWidth=r,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function ot(t,i,e,n,s,h,r){t.save(),t.globalCompositeOperation="copy";var a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,h),a.addColorStop(1,r),t.fillStyle=a,t.fillRect(i,e,n,s),t.restore()}var ct,ft=function(){function t(i,e){(0,c.Z)(this,t),this.tt(i,e)}return(0,f.Z)(t,[{key:"tt",value:function(t,i){this.zt=t,this.Kt=i}},{key:"It",value:function(t,i){return this.zt.Ct?t.T+t.I+t.A:0}},{key:"X",value:function(t,i,e,n){var s=this;if(this.zt.Ct&&0!==this.zt.Gt.length){var h=this.zt.D,r=this.Kt.t,a=t.useBitmapCoordinateSpace((function(t){var a=t.context;a.font=i.P;var u=s.Jt(t,i,e,n),l=u.Qt,o=function(t,i){u.ti?lt(a,l.ii,l.ni,l.si,l.ei,t,l.ri,[l.lt,0,0,l.lt],i):lt(a,l.hi,l.ni,l.si,l.ei,t,l.ri,[0,l.lt,l.lt,0],i)};return o(r,"transparent"),s.zt.li&&(a.fillStyle=h,a.fillRect(l.hi,l.ai,l.oi-l.hi,l._i)),o("transparent",r),s.zt.ui&&(a.fillStyle=i.B,a.fillRect(u.ti?l.ci-l.ri:0,l.ni,l.ri,l.di-l.ni)),u}));t.useMediaCoordinateSpace((function(t){var e=t.context,n=a.fi;e.font=i.P,e.textAlign=a.ti?"right":"left",e.textBaseline="middle",e.fillStyle=h,e.fillText(s.zt.Gt,n.pi,(n.ni+n.di)/2+n.vi)}))}}},{key:"Jt",value:function(t,i,e,n){var s,h=t.context,r=t.bitmapSize,a=t.mediaSize,u=t.horizontalPixelRatio,l=t.verticalPixelRatio,o=this.zt.li||!this.zt.mi?i.C:0,c=this.zt.bi?i.k:0,f=i.I+this.Kt.gi,v=i.A+this.Kt.wi,d=i.O,y=i.L,p=this.zt.Gt,m=i.T,k=e.Mi(h,p),g=Math.ceil(e.Si(h,p)),b=m+f+v,w=i.k+d+y+g+o,_=Math.max(1,Math.floor(l)),M=Math.round(b*l);M%2!=_%2&&(M+=1);var S,z,C,x=c>0?Math.max(1,Math.floor(c*u)):0,T=Math.round(w*u),Z=Math.round(o*u),E=null!==(s=this.Kt.xi)&&void 0!==s?s:this.Kt.yi,L=Math.round(E*l)-Math.floor(.5*l),N=Math.floor(L+_/2-M/2),F=N+M,B="right"===n,P=B?a.width-c:c,R=B?r.width-x:x;return B?(S=R-T,z=R-Z,C=P-o-d-c):(S=R+T,z=R+Z,C=P+o+d),{ti:B,Qt:{ni:N,ai:L,di:F,si:T,ei:M,lt:2*u,ri:x,ii:S,hi:R,oi:z,_i:_,ci:r.width},fi:{ni:N/l,di:F/l,pi:C,vi:k}}}}]),t}(),vt=function(){function t(i){(0,c.Z)(this,t),this.ki={yi:0,t:"#000",wi:0,gi:0},this.Ci={Gt:"",Ct:!1,li:!0,mi:!1,Ot:"",D:"#FFF",ui:!1,bi:!1},this.Ti={Gt:"",Ct:!1,li:!1,mi:!0,Ot:"",D:"#FFF",ui:!0,bi:!0},this.vt=!0,this.Pi=new(i||ft)(this.Ci,this.ki),this.Ri=new(i||ft)(this.Ti,this.ki)}return(0,f.Z)(t,[{key:"Gt",value:function(){return this.Di(),this.Ci.Gt}},{key:"yi",value:function(){return this.Di(),this.ki.yi}},{key:"gt",value:function(){this.vt=!0}},{key:"It",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.max(this.Pi.It(t,i),this.Ri.It(t,i))}},{key:"Bi",value:function(){return this.ki.xi||0}},{key:"Ai",value:function(t){this.ki.xi=t}},{key:"Oi",value:function(){return this.Di(),this.Ci.Ct||this.Ti.Ct}},{key:"Li",value:function(){return this.Di(),this.Ci.Ct}},{key:"Mt",value:function(t){return this.Di(),this.Ci.li=this.Ci.li&&t.F().ticksVisible,this.Ti.li=this.Ti.li&&t.F().ticksVisible,this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Pi}},{key:"Ii",value:function(){return this.Di(),this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Ri}},{key:"Di",value:function(){this.vt&&(this.Ci.li=!0,this.Ti.li=!1,this.Ei(this.Ci,this.Ti,this.ki))}}]),t}(),dt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n,s){var h;return(0,c.Z)(this,e),(h=i.call(this)).$t=t,h.zi=n,h.Vi=s,h}return(0,f.Z)(e,[{key:"Ei",value:function(t,i,e){t.Ct=!1;var n=this.$t.F().horzLine;if(n.labelVisible){var s=this.zi.Tt();if(this.$t.Ct()&&!this.zi.Ni()&&null!==s){var h=A(n.labelBackgroundColor);e.t=h.t,t.D=h.i;var r=2/12*this.zi.T();e.gi=r,e.wi=r;var a=this.Vi(this.zi);e.yi=a.yi,t.Gt=this.zi.Fi(a.ut,s),t.Ct=!0}}}}]),e}(vt),yt=/[1-9]/g,pt=function(){function t(){(0,c.Z)(this,t),this.zt=null}return(0,f.Z)(t,[{key:"tt",value:function(t){this.zt=t}},{key:"X",value:function(t,i){var e=this;if(null!==this.zt&&!1!==this.zt.Ct&&0!==this.zt.Gt.length){var n=t.useMediaCoordinateSpace((function(t){var n=t.context;return n.font=i.P,Math.round(i.Wi.Si(n,x(e.zt).Gt,yt))}));if(!(n<=0)){var s=i.ji,h=n+2*s,r=h/2,a=this.zt.$i,u=this.zt.yi,l=Math.floor(u-r)+.5;l<0?(u+=Math.abs(0-l),l=Math.floor(u-r)+.5):l+h>a&&(u-=Math.abs(a-(l+h)),l=Math.floor(u-r)+.5);var o=l+h,c=Math.ceil(0+i.k+i.C+i.I+i.T+i.A);t.useBitmapCoordinateSpace((function(t){var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r=x(e.zt);n.fillStyle=r.t;var a=Math.round(l*s),u=Math.round(0*h),f=Math.round(o*s),v=Math.round(c*h),d=Math.round(2*s);if(n.beginPath(),n.moveTo(a,u),n.lineTo(a,v-d),n.arcTo(a,v,a+d,v,d),n.lineTo(f-d,v),n.arcTo(f,v,f,v-d,d),n.lineTo(f,u),n.fill(),r.li){var y=Math.round(r.yi*s),p=u,m=Math.round((p+i.C)*h);n.fillStyle=r.D;var k=Math.max(1,Math.floor(s)),g=Math.floor(.5*s);n.fillRect(y-g,p,k,m-p)}})),t.useMediaCoordinateSpace((function(t){var n=t.context,h=x(e.zt),r=0+i.k+i.C+i.I+i.T/2;n.font=i.P,n.textAlign="left",n.textBaseline="middle",n.fillStyle=h.D;var a=i.Wi.Mi(n,"Apr0");n.translate(l+s,r+a),n.fillText(h.Gt,0,0)}))}}}}]),t}(),mt=function(){function t(i,e,n){(0,c.Z)(this,t),this.vt=!0,this.jt=new pt,this.Wt={Ct:!1,t:"#4c525e",D:"white",Gt:"",$i:0,yi:NaN,li:!0},this.bt=i,this.Hi=e,this.Vi=n}return(0,f.Z)(t,[{key:"gt",value:function(){this.vt=!0}},{key:"Mt",value:function(){return this.vt&&(this.St(),this.vt=!1),this.jt.tt(this.Wt),this.jt}},{key:"St",value:function(){var t=this.Wt;t.Ct=!1;var i=this.bt.F().vertLine;if(i.labelVisible){var e=this.Hi.yt();if(!e.Ni()){t.$i=e.$i();var n=this.Vi();if(null!==n){t.yi=n.yi;var s=e.Ui(this.bt.xt());t.Gt=e.qi(x(s)),t.Ct=!0;var h=A(i.labelBackgroundColor);t.t=h.t,t.D=h.i,t.li=e.F().ticksVisible}}}}}]),t}(),kt=function(){function t(){(0,c.Z)(this,t),this.Yi=null,this.Xi=0}return(0,f.Z)(t,[{key:"Zi",value:function(){return this.Xi}},{key:"Ki",value:function(t){this.Xi=t}},{key:"Bt",value:function(){return this.Yi}},{key:"Gi",value:function(t){this.Yi=t}},{key:"Ji",value:function(t){return[]}},{key:"Qi",value:function(){return[]}},{key:"Ct",value:function(){return!0}}]),t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(ct||(ct={}));var gt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;(0,c.Z)(this,e),(s=i.call(this)).tn=null,s.nn=NaN,s.sn=0,s.en=!0,s.rn=new Map,s.hn=!1,s.ln=NaN,s.an=NaN,s.on=NaN,s._n=NaN,s.Hi=t,s.un=n,s.cn=new it(t,(0,a.Z)(s)),s.dn=function(t){var i=s.an,e=s.nn;if(t===x(s.tn).fn())return{ut:e,yi:i};var n=x(t.Tt());return{ut:t.pn(i,n),yi:i}};var h=function(){var t=s.Hi.yt().vn(s.sn),i=s.Xt();return t&&Number.isFinite(i)?{_t:t,yi:i}:null};return s.mn=new mt((0,a.Z)(s),t,h),s.bn=new st((0,a.Z)(s)),s}return(0,f.Z)(e,[{key:"F",value:function(){return this.un}},{key:"gn",value:function(t,i){this.on=t,this._n=i}},{key:"wn",value:function(){this.on=NaN,this._n=NaN}},{key:"Mn",value:function(){return this.on}},{key:"Sn",value:function(){return this._n}},{key:"xn",value:function(t,i,e){this.hn||(this.hn=!0),this.en=!0,this.yn(t,i,e)}},{key:"xt",value:function(){return this.sn}},{key:"Xt",value:function(){return this.ln}},{key:"Zt",value:function(){return this.an}},{key:"Ct",value:function(){return this.en}},{key:"kn",value:function(){this.en=!1,this.Cn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.wn()}},{key:"Tn",value:function(t){return null!==this.tn?[this.bn,this.cn]:[]}},{key:"qt",value:function(t){return t===this.tn&&this.un.horzLine.visible}},{key:"Yt",value:function(){return this.un.vertLine.visible}},{key:"Pn",value:function(t,i){this.en&&this.tn===t||this.rn.clear();var e=[];return this.tn===t&&e.push(this.Rn(this.rn,i,this.dn)),e}},{key:"Qi",value:function(){return this.en?[this.mn]:[]}},{key:"Ht",value:function(){return this.tn}},{key:"Dn",value:function(){this.bn.gt(),this.rn.forEach((function(t){return t.gt()})),this.mn.gt(),this.cn.gt()}},{key:"Bn",value:function(t){return t&&!t.fn().Ni()?t.fn():null}},{key:"yn",value:function(t,i,e){this.An(t,i,e)&&this.Dn()}},{key:"An",value:function(t,i,e){var n=this.ln,s=this.an,h=this.nn,r=this.sn,a=this.tn,u=this.Bn(e);this.sn=t,this.ln=isNaN(t)?NaN:this.Hi.yt().Et(t),this.tn=e;var l=null!==u?u.Tt():null;return null!==u&&null!==l?(this.nn=i,this.an=u.Dt(i,l)):(this.nn=NaN,this.an=NaN),n!==this.ln||s!==this.an||r!==this.sn||h!==this.nn||a!==this.tn}},{key:"Cn",value:function(){var t=this.Hi.wt().map((function(t){return t.Ln().On()})).filter(Y),i=0===t.length?null:Math.max.apply(Math,(0,o.Z)(t));this.sn=null!==i?i:NaN}},{key:"Rn",value:function(t,i,e){var n=t.get(i);return void 0===n&&(n=new dt(this,i,e),t.set(i,n)),n}}]),e}(kt);function bt(t){return"left"===t||"right"===t}var wt=function(){function t(i){(0,c.Z)(this,t),this.In=new Map,this.En=[],this.zn=i}return(0,f.Z)(t,[{key:"Vn",value:function(t,i){var e=function(t,i){return void 0===t?i:{Nn:Math.max(t.Nn,i.Nn),Fn:t.Fn||i.Fn}}(this.In.get(t),i);this.In.set(t,e)}},{key:"Wn",value:function(){return this.zn}},{key:"jn",value:function(t){var i=this.In.get(t);return void 0===i?{Nn:this.zn}:{Nn:Math.max(this.zn,i.Nn),Fn:i.Fn}}},{key:"$n",value:function(){this.Hn(),this.En=[{Un:0}]}},{key:"qn",value:function(t){this.Hn(),this.En=[{Un:1,At:t}]}},{key:"Yn",value:function(t){this.Xn(),this.En.push({Un:5,At:t})}},{key:"Hn",value:function(){this.Xn(),this.En.push({Un:6})}},{key:"Zn",value:function(){this.Hn(),this.En=[{Un:4}]}},{key:"Kn",value:function(t){this.Hn(),this.En.push({Un:2,At:t})}},{key:"Gn",value:function(t){this.Hn(),this.En.push({Un:3,At:t})}},{key:"Jn",value:function(){return this.En}},{key:"Qn",value:function(t){var i,e=this,n=(0,r.Z)(t.En);try{for(n.s();!(i=n.n()).done;){var s=i.value;this.ts(s)}}catch(h){n.e(h)}finally{n.f()}this.zn=Math.max(this.zn,t.zn),t.In.forEach((function(t,i){e.Vn(i,t)}))}},{key:"ts",value:function(t){switch(t.Un){case 0:this.$n();break;case 1:this.qn(t.At);break;case 2:this.Kn(t.At);break;case 3:this.Gn(t.At);break;case 4:this.Zn();break;case 5:this.Yn(t.At);break;case 6:this.Xn()}}},{key:"Xn",value:function(){var t=this.En.findIndex((function(t){return 5===t.Un}));-1!==t&&this.En.splice(t,1)}}],[{key:"ns",value:function(){return new t(2)}},{key:"ss",value:function(){return new t(3)}}]),t}();function _t(t,i){if(!O(t))return"n/a";if(!U(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var Mt=function(){function t(i,e){if((0,c.Z)(this,t),e||(e=1),O(i)&&U(i)||(i=100),i<0)throw new TypeError("invalid base");this.zi=i,this.es=e,this.rs()}return(0,f.Z)(t,[{key:"format",value:function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.hs(t)}},{key:"rs",value:function(){if(this.ls=0,this.zi>0&&this.es>0)for(var t=this.zi;t>1;)t/=10,this.ls++}},{key:"hs",value:function(t){var i=this.zi/this.es,e=Math.floor(t),n="",s=void 0!==this.ls?this.ls:NaN;if(i>1){var h=+(Math.round(t*i)-e*i).toFixed(this.ls);h>=i&&(h-=i,e+=1),n="."+_t(+h.toFixed(this.ls)*this.es,s)}else e=Math.round(e*i)/i,s>0&&(n="."+_t(0,s));return e.toFixed(0)+n}}]),t}(),St=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"format",value:function(t){return"".concat((0,s.Z)((0,h.Z)(e.prototype),"format",this).call(this,t),"%")}}]),e}(Mt),zt=function(){function t(i){(0,c.Z)(this,t),this.os=i}return(0,f.Z)(t,[{key:"format",value:function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this._s(t):t<999995?i+this._s(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this._s(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this._s(t/1e9)+"B")}},{key:"_s",value:function(t){var i=Math.pow(10,this.os);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.os).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))}}]),t}();function Ct(t,i,e,s,h,r,a){if(!(0===i.length||s.from>=i.length||s.to<=0)){var u=t.context,l=i[s.from],o=r(t,l),c=l;if(s.to-s.from<2){var f=h/2;u.beginPath();var v={st:l.st-f,et:l.et},d={st:l.st+f,et:l.et};return u.moveTo(v.st,v.et),u.lineTo(d.st,d.et),void a(u,o,v,d)}var y=function(t,i){a(u,o,c,i),u.beginPath(),o=t,c=i},p=c;u.beginPath(),u.moveTo(l.st,l.et);for(var m=s.from+1;m<s.to;++m){var k=r(t,p=i[m]);switch(e){case 0:u.lineTo(p.st,p.et);break;case 1:u.lineTo(p.st,i[m-1].et),k!==o&&(y(k,p),u.lineTo(p.st,i[m-1].et)),u.lineTo(p.st,p.et);break;case 2:var g=Et(i,m-1,m),b=(0,n.Z)(g,2),w=b[0],_=b[1];u.bezierCurveTo(w.st,w.et,_.st,_.et,p.st,p.et)}1!==e&&k!==o&&(y(k,p),u.moveTo(p.st,p.et))}(c!==p||c===p&&1===e)&&a(u,o,c,p)}}var xt=6;function Tt(t,i){return{st:t.st-i.st,et:t.et-i.et}}function Zt(t,i){return{st:t.st/i,et:t.et/i}}function Et(t,i,e){var n,s,h=Math.max(0,i-1),r=Math.min(t.length-1,e+1);return[(n=t[i],s=Zt(Tt(t[e],t[h]),xt),{st:n.st+s.st,et:n.et+s.et}),Tt(t[e],Zt(Tt(t[r],t[i]),xt))]}function Lt(t,i,e,n,s){i.lineTo(s.st,t),i.lineTo(n.st,t),i.closePath(),i.fillStyle=e,i.fill()}var Nt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).J=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.J=t}},{key:"Z",value:function(t){var i;if(null!==this.J){var e=this.J,n=e.nt,s=e.it,h=e.us,r=e.rt,a=e.Ft,u=e.cs,l=null!==(i=this.J.ds)&&void 0!==i?i:this.J.fs?0:t.mediaSize.height;if(null!==s){var o=t.context;o.lineCap="butt",o.lineJoin="round",o.lineWidth=r,M(o,a),o.lineWidth=1,Ct(t,n,u,s,h,this.ps.bind(this),Lt.bind(null,l))}}}}]),e}(q),Ft=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).vs=null,t}return(0,f.Z)(e,[{key:"ps",value:function(t,i){var e=t.context,n=t.mediaSize,s=i.bs,h=i.gs,r=n.height;if(null!==this.vs&&this.vs.topColor===s&&this.vs.bottomColor===h&&this.vs.bottom===r)return this.vs.fillStyle;var a=e.createLinearGradient(0,0,0,r);return a.addColorStop(0,s),a.addColorStop(1,h),this.vs={topColor:s,bottomColor:h,fillStyle:a,bottom:r},a}}]),e}(Nt);function Bt(t,i){t.strokeStyle=i,t.stroke()}var Pt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).J=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.J=t}},{key:"Z",value:function(t){if(null!==this.J){var i=this.J,e=i.nt,n=i.it,s=i.us,h=i.cs,r=i.rt,a=i.Ft;if(null!==n){var u=t.context;u.lineCap="butt",u.lineWidth=r,M(u,a),u.lineJoin="round",Ct(t,e,h,n,s,this.ws.bind(this),Bt)}}}}]),e}(q),Rt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){return(0,c.Z)(this,e),i.apply(this,arguments)}return(0,f.Z)(e,[{key:"ws",value:function(t,i){return i.ot}}]),e}(Pt);function At(t,i,e){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length)-n;0<s;){var h=s>>1,r=n+h;e(t[r],i)?(n=r+1,s-=h+1):s=h}return n}function Dt(t,i,e){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length)-n;0<s;){var h=s>>1,r=n+h;e(i,t[r])?s=h:(n=r+1,s-=h+1)}return n}function Vt(t,i){return t._t<i}function Ot(t,i){return t<i._t}function Ut(t,i,e){var n=i.Ms(),s=i.ci(),h=At(t,n,Vt),r=Dt(t,s,Ot);if(!e)return{from:h,to:r};var a=h,u=r;return h>0&&h<t.length&&t[h]._t>=n&&(a=h-1),r>0&&r<t.length&&t[r-1]._t<=s&&(u=r+1),{from:a,to:u}}var It=function(){function t(i,e,n){(0,c.Z)(this,t),this.Ss=!0,this.xs=!0,this.ys=!0,this.ks=[],this.Cs=null,this.Ts=i,this.Ps=e,this.Rs=n}return(0,f.Z)(t,[{key:"gt",value:function(t){this.Ss=!0,"data"===t&&(this.xs=!0),"options"===t&&(this.ys=!0)}},{key:"Mt",value:function(){return this.Ts.Ct()?(this.Ds(),null===this.Cs?null:this.Bs):null}},{key:"As",value:function(){var t=this;this.ks=this.ks.map((function(i){return Object.assign(Object.assign({},i),t.Ts.Ls().Os(i._t))}))}},{key:"Is",value:function(){this.Cs=null}},{key:"Ds",value:function(){this.xs&&(this.Es(),this.xs=!1),this.ys&&(this.As(),this.ys=!1),this.Ss&&(this.zs(),this.Ss=!1)}},{key:"zs",value:function(){var t=this.Ts.Bt(),i=this.Ps.yt();if(this.Is(),!i.Ni()&&!t.Ni()){var e=i.Vs();if(null!==e&&0!==this.Ts.Ln().Ns()){var n=this.Ts.Tt();null!==n&&(this.Cs=Ut(this.ks,e,this.Rs),this.Fs(t,i,n.At),this.Ws())}}}}]),t}(),Wt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){return(0,c.Z)(this,e),i.call(this,t,n,!0)}return(0,f.Z)(e,[{key:"Fs",value:function(t,i,e){i.js(this.ks,G(this.Cs)),t.$s(this.ks,e,G(this.Cs))}},{key:"Hs",value:function(t,i){return{_t:t,ut:i,st:NaN,et:NaN}}},{key:"Es",value:function(){var t=this,i=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map((function(e){var n=e.At[3];return t.qs(e.Ys,n,i)}))}}]),e}(It),Ht=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t,n)).Bs=new J,s.Xs=new Ft,s.Zs=new Rt,s.Bs.Y([s.Xs,s.Zs]),s}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.Hs(t,i)),e.Os(t))}},{key:"Ws",value:function(){var t=this.Ts.F();this.Xs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,ds:null,fs:t.invertFilledArea,it:this.Cs,us:this.Ps.yt().Ks()}),this.Zs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()})}}]),e}(Wt),Yt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.Gs=0,t.Js=0,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio;if(null!==this.zt&&0!==this.zt.Ln.length&&null!==this.zt.it){this.Gs=this.Qs(e),this.Gs>=2&&Math.max(1,Math.floor(e))%2!=this.Gs%2&&this.Gs--,this.Js=this.zt.te?Math.min(this.Gs,Math.floor(e)):this.Gs;for(var s=null,h=this.Js<=this.Gs&&this.zt.Ks>=Math.floor(1.5*e),r=this.zt.it.from;r<this.zt.it.to;++r){var a=this.zt.Ln[r];s!==a.ie&&(i.fillStyle=a.ie,s=a.ie);var u=Math.floor(.5*this.Js),l=Math.round(a.st*e),o=l-u,c=this.Js,f=o+c-1,v=Math.min(a.ne,a.se),d=Math.max(a.ne,a.se),y=Math.round(v*n)-u,p=Math.round(d*n)+u,m=Math.max(p-y,this.Js);i.fillRect(o,y,c,m);var k=Math.ceil(1.5*this.Gs);if(h){if(this.zt.ee){var g=l-k,b=Math.max(y,Math.round(a.re*n)-u),w=b+c-1;w>y+m-1&&(b=(w=y+m-1)-c+1),i.fillRect(g,b,o-g,w-b+1)}var _=l+k,M=Math.max(y,Math.round(a.he*n)-u),S=M+c-1;S>y+m-1&&(M=(S=y+m-1)-c+1),i.fillRect(f+1,M,_-f,S-M+1)}}}}},{key:"Qs",value:function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(x(this.zt).Ks,t)))}}]),e}(et),Gt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){return(0,c.Z)(this,e),i.call(this,t,n,!1)}return(0,f.Z)(e,[{key:"Fs",value:function(t,i,e){i.js(this.ks,G(this.Cs)),t.le(this.ks,e,G(this.Cs))}},{key:"ae",value:function(t,i,e){return{_t:t,oe:i.At[0],_e:i.At[1],ue:i.At[2],ce:i.At[3],st:NaN,re:NaN,ne:NaN,se:NaN,he:NaN}}},{key:"Es",value:function(){var t=this,i=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map((function(e){return t.qs(e.Ys,e,i)}))}}]),e}(It),jt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Bs=new Yt,t}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.ae(t,i,e)),e.Os(t))}},{key:"Ws",value:function(){var t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),ee:t.openVisible,te:t.thinBars,it:this.Cs})}}]),e}(Gt);function Kt(t,i,e){return Math.min(Math.max(t,i),e)}function Xt(t,i,e){return i-t<=e}function Jt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function qt(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Qt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).vs=null,t}return(0,f.Z)(e,[{key:"ps",value:function(t,i){var e,n=t.context,s=t.mediaSize,h=this.J,r=i.de,a=i.fe,u=i.pe,l=i.ve,o=null!==(e=h.ds)&&void 0!==e?e:s.height,c=s.height;if(null!==this.vs&&this.vs.topFillColor1===r&&this.vs.topFillColor2===a&&this.vs.bottomFillColor1===u&&this.vs.bottomFillColor2===l&&this.vs.baseLevelCoordinate===o&&this.vs.bottom===c)return this.vs.fillStyle;var f=n.createLinearGradient(0,0,0,c),v=Kt(o/c,0,1);return f.addColorStop(0,r),f.addColorStop(v,a),f.addColorStop(v,u),f.addColorStop(1,l),this.vs={topFillColor1:r,topFillColor2:a,bottomFillColor1:u,bottomFillColor2:l,fillStyle:f,baseLevelCoordinate:o,bottom:c},f}}]),e}(Nt),$t=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).me=null,t}return(0,f.Z)(e,[{key:"ws",value:function(t,i){var e=t.context,n=t.mediaSize,s=this.J,h=i.be,r=i.ge,a=s.ds,u=n.height;if(null!==this.me&&this.me.topLineColor===h&&this.me.bottomLineColor===r&&this.me.baseLevelCoordinate===a&&this.me.bottom===u)return this.me.strokeStyle;var l=e.createLinearGradient(0,0,0,u),o=Kt(a/u,0,1);return l.addColorStop(0,h),l.addColorStop(o,h),l.addColorStop(o,r),l.addColorStop(1,r),this.me={topLineColor:h,bottomLineColor:r,strokeStyle:l,baseLevelCoordinate:a,bottom:u},l}}]),e}(Pt),ti=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t,n)).Bs=new J,s.we=new Qt,s.Me=new $t,s.Bs.Y([s.we,s.Me]),s}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.Hs(t,i)),e.Os(t))}},{key:"Ws",value:function(){var t=this.Ts.Tt();if(null!==t){var i=this.Ts.F(),e=this.Ts.Bt().Dt(i.baseValue.price,t.At),n=this.Ps.yt().Ks();this.we.tt({nt:this.ks,rt:i.lineWidth,Ft:i.lineStyle,cs:i.lineType,ds:e,fs:!1,it:this.Cs,us:n}),this.Me.tt({nt:this.ks,rt:i.lineWidth,Ft:i.lineStyle,cs:i.lineType,ds:e,it:this.Cs,us:n})}}}]),e}(Wt),ii=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.Gs=0,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"Z",value:function(t){if(null!==this.zt&&0!==this.zt.Ln.length&&null!==this.zt.it){var i=t.horizontalPixelRatio;this.Gs=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var e=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),n=Math.floor(t*e*i),s=Math.floor(t*i),h=Math.min(n,s);return Math.max(Math.floor(i),h)}(this.zt.Ks,i),this.Gs>=2&&Math.floor(i)%2!=this.Gs%2&&this.Gs--;var e=this.zt.Ln;this.zt.Se&&this.xe(t,e,this.zt.it),this.zt.ui&&this.ye(t,e,this.zt.it);var n=this.ke(i);(!this.zt.ui||this.Gs>2*n)&&this.Ce(t,e,this.zt.it)}}},{key:"xe",value:function(t,i,e){if(null!==this.zt){var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=Math.min(Math.floor(s),Math.floor(this.zt.Ks*s));a=Math.max(Math.floor(s),Math.min(a,this.Gs));for(var u=Math.floor(.5*a),l=null,o=e.from;o<e.to;o++){var c=i[o];c.Te!==r&&(n.fillStyle=c.Te,r=c.Te);var f=Math.round(Math.min(c.re,c.he)*h),v=Math.round(Math.max(c.re,c.he)*h),d=Math.round(c.ne*h),y=Math.round(c.se*h),p=Math.round(s*c.st)-u,m=p+a-1;null!==l&&(p=Math.max(l+1,p),p=Math.min(p,m));var k=m-p+1;n.fillRect(p,d,k,f-d),n.fillRect(p,v+1,k,y-v),l=m}}}},{key:"ke",value:function(t){var i=Math.floor(1*t);this.Gs<=2*i&&(i=Math.floor(.5*(this.Gs-1)));var e=Math.max(Math.floor(t),i);return this.Gs<=2*e?Math.max(Math.floor(t),Math.floor(1*t)):e}},{key:"ye",value:function(t,i,e){if(null!==this.zt)for(var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=this.ke(s),u=null,l=e.from;l<e.to;l++){var o=i[l];o.Pe!==r&&(n.fillStyle=o.Pe,r=o.Pe);var c=Math.round(o.st*s)-Math.floor(.5*this.Gs),f=c+this.Gs-1,v=Math.round(Math.min(o.re,o.he)*h),d=Math.round(Math.max(o.re,o.he)*h);if(null!==u&&(c=Math.max(u+1,c),c=Math.min(c,f)),this.zt.Ks*s>2*a)ht(n,c,v,f-c+1,d-v+1,a);else{var y=f-c+1;n.fillRect(c,v,y,d-v+1)}u=f}}},{key:"Ce",value:function(t,i,e){if(null!==this.zt)for(var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=this.ke(s),u=e.from;u<e.to;u++){var l=i[u],o=Math.round(Math.min(l.re,l.he)*h),c=Math.round(Math.max(l.re,l.he)*h),f=Math.round(l.st*s)-Math.floor(.5*this.Gs),v=f+this.Gs-1;if(l.ie!==r){var d=l.ie;n.fillStyle=d,r=d}this.zt.ui&&(f+=a,o+=a,v-=a,c-=a),o>c||n.fillRect(f,o,v-f+1,c-o+1)}}}]),e}(et),ei=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Bs=new ii,t}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.ae(t,i,e)),e.Os(t))}},{key:"Ws",value:function(){var t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),Se:t.wickVisible,ui:t.borderVisible,it:this.Cs})}}]),e}(Gt),ni=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.Re=[],t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t,this.Re=[]}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio;if(null!==this.zt&&0!==this.zt.nt.length&&null!==this.zt.it){this.Re.length||this.De(e);for(var s=Math.max(1,Math.floor(n)),h=Math.round(this.zt.Be*n)-Math.floor(s/2),r=h+s,a=this.zt.it.from;a<this.zt.it.to;a++){var u=this.zt.nt[a],l=this.Re[a-this.zt.it.from],o=Math.round(u.et*n),c=void 0,f=void 0;i.fillStyle=u.ie,o<=h?(c=o,f=r):(c=h,f=o-Math.floor(s/2)+s),i.fillRect(l.Ms,c,l.ci-l.Ms+1,f-c)}}}},{key:"De",value:function(t){if(null!==this.zt&&0!==this.zt.nt.length&&null!==this.zt.it){var i=Math.ceil(this.zt.Ks*t)<=1?0:Math.max(1,Math.floor(t)),e=Math.round(this.zt.Ks*t)-i;this.Re=new Array(this.zt.it.to-this.zt.it.from);for(var n=this.zt.it.from;n<this.zt.it.to;n++){var s=this.zt.nt[n],h=Math.round(s.st*t),r=void 0,a=void 0;if(e%2){var u=(e-1)/2;r=h-u,a=h+u}else{var l=e/2;r=h-l,a=h+l-1}this.Re[n-this.zt.it.from]={Ms:r,ci:a,Ae:h,Oe:s.st*t,_t:s._t}}for(var o=this.zt.it.from+1;o<this.zt.it.to;o++){var c=this.Re[o-this.zt.it.from],f=this.Re[o-this.zt.it.from-1];c._t===f._t+1&&c.Ms-f.ci!==i+1&&(f.Ae>f.Oe?f.ci=c.Ms-i-1:c.Ms=f.ci+i+1)}for(var v=Math.ceil(this.zt.Ks*t),d=this.zt.it.from;d<this.zt.it.to;d++){var y=this.Re[d-this.zt.it.from];y.ci<y.Ms&&(y.ci=y.Ms);var p=y.ci-y.Ms+1;v=Math.min(p,v)}if(i>0&&v<4)for(var m=this.zt.it.from;m<this.zt.it.to;m++){var k=this.Re[m-this.zt.it.from];k.ci-k.Ms+1>v&&(k.Ae>k.Oe?k.ci-=1:k.Ms+=1)}}else this.Re=[]}}]),e}(et),si=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Bs=new ni,t}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.Hs(t,i)),e.Os(t))}},{key:"Ws",value:function(){var t={nt:this.ks,Ks:this.Ps.yt().Ks(),it:this.Cs,Be:this.Ts.Bt().Dt(this.Ts.F().base,x(this.Ts.Tt()).At)};this.Bs.tt(t)}}]),e}(Wt),hi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Bs=new Rt,t}return(0,f.Z)(e,[{key:"qs",value:function(t,i,e){return Object.assign(Object.assign({},this.Hs(t,i)),e.Os(t))}},{key:"Ws",value:function(){var t=this.Ts.F(),i={nt:this.ks,Ft:t.lineStyle,cs:t.lineType,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()};this.Bs.tt(i)}}]),e}(Wt),ri=/[2-9]/g,ai=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;(0,c.Z)(this,t),this.Le=0,this.Ie=1,this.Ee=1,this.ze={},this.Ve=new Map,this.Ne=i}return(0,f.Z)(t,[{key:"Fe",value:function(){this.Le=0,this.Ve.clear(),this.Ie=1,this.Ee=1,this.ze={}}},{key:"Si",value:function(t,i,e){return this.We(t,i,e).width}},{key:"Mi",value:function(t,i,e){var n=this.We(t,i,e);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}},{key:"We",value:function(t,i,e){var n=e||ri,s=String(i).replace(n,"0");if(this.Ve.has(s))return C(this.Ve.get(s)).je;if(this.Le===this.Ne){var h=this.ze[this.Ee];delete this.ze[this.Ee],this.Ve.delete(h),this.Ee++,this.Le--}t.save(),t.textBaseline="middle";var r=t.measureText(s);return t.restore(),0===r.width&&i.length||(this.Ve.set(s,{je:r,$e:this.Ie}),this.ze[this.Ie]=s,this.Le++,this.Ie++),r}}]),t}(),ui=function(){function t(i){(0,c.Z)(this,t),this.He=null,this.S=null,this.Ue="right",this.qe=i}return(0,f.Z)(t,[{key:"Ye",value:function(t,i,e){this.He=t,this.S=i,this.Ue=e}},{key:"X",value:function(t){null!==this.S&&null!==this.He&&this.He.X(t,this.S,this.qe,this.Ue)}}]),t}(),li=function(){function t(i,e,n){(0,c.Z)(this,t),this.Xe=i,this.qe=new ai(50),this.Ze=e,this.N=n,this.W=-1,this.jt=new ui(this.qe)}return(0,f.Z)(t,[{key:"Mt",value:function(){var t=this.N.Ke(this.Ze);if(null===t)return null;var i=t.Ge(this.Ze)?t.Je():this.Ze.Bt();if(null===i)return null;var e=t.Qe(i);if("overlay"===e)return null;var n=this.N.tr();return n.T!==this.W&&(this.W=n.T,this.qe.Fe()),this.jt.Ye(this.Xe.Ii(),n,e),this.jt}}]),t}(),oi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"ir",value:function(t,i){var e;if(!(null===(e=this.zt)||void 0===e?void 0:e.Ct))return null;var n=this.zt,s=n.et,h=n.rt,r=n.nr;return i>=s-h-7&&i<=s+h+7?{sr:this.zt,nr:r}:null}},{key:"Z",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(null!==this.zt&&!1!==this.zt.Ct){var h=Math.round(this.zt.et*s);h<0||h>e.height||(i.lineCap="butt",i.strokeStyle=this.zt.D,i.lineWidth=Math.floor(this.zt.rt*n),M(i,this.zt.Ft),S(i,h,0,e.width))}}}]),e}(et),ci=function(){function t(i){(0,c.Z)(this,t),this.er={et:0,D:"rgba(0, 0, 0, 0)",rt:1,Ft:0,Ct:!1},this.rr=new oi,this.vt=!0,this.Ts=i,this.Ps=i.Ut(),this.rr.tt(this.er)}return(0,f.Z)(t,[{key:"gt",value:function(){this.vt=!0}},{key:"Mt",value:function(){return this.Ts.Ct()?(this.vt&&(this.hr(),this.vt=!1),this.rr):null}}]),t}(),fi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"hr",value:function(){this.er.Ct=!1;var t=this.Ts.Bt(),i=t.lr().lr;if(2===i||3===i){var e=this.Ts.F();if(e.baseLineVisible&&this.Ts.Ct()){var n=this.Ts.Tt();null!==n&&(this.er.Ct=!0,this.er.et=t.Dt(n.At,n.At),this.er.D=e.baseLineColor,this.er.rt=e.baseLineWidth,this.er.Ft=e.baseLineStyle)}}}}]),e}(ci),vi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"ar",value:function(){return this.zt}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio,s=this.zt;if(null!==s){var h=Math.max(1,Math.floor(e)),r=h%2/2,a=Math.round(s.Oe.x*e)+r,u=s.Oe.y*n;i.fillStyle=s._r,i.beginPath();var l=Math.max(2,1.5*s.ur)*e;i.arc(a,u,l,0,2*Math.PI,!1),i.fill(),i.fillStyle=s.cr,i.beginPath(),i.arc(a,u,s.lt*e,0,2*Math.PI,!1),i.fill(),i.lineWidth=h,i.strokeStyle=s.dr,i.beginPath(),i.arc(a,u,s.lt*e+h/2,0,2*Math.PI,!1),i.stroke()}}}]),e}(et),di=[{pr:0,vr:.25,mr:4,br:10,gr:.25,wr:0,Mr:.4,Sr:.8},{pr:.25,vr:.525,mr:10,br:14,gr:0,wr:0,Mr:.8,Sr:0},{pr:.525,vr:1,mr:14,br:14,gr:0,wr:0,Mr:0,Sr:0}];function yi(t,i,e,n){return function(t,i){if("transparent"===t)return t;var e=R(t),n=e[3];return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i*n,")")}(t,e+(n-e)*i)}function pi(t,i){for(var e,n=t%2600/2600,s=0,h=di;s<h.length;s++){var r=h[s];if(n>=r.pr&&n<=r.vr){e=r;break}}z(void 0!==e,"Last price animation internal logic error");var a,u,l,o=(n-e.pr)/(e.vr-e.pr);return{cr:yi(i,o,e.gr,e.wr),dr:yi(i,o,e.Mr,e.Sr),lt:(a=o,u=e.mr,l=e.br,u+(l-u)*a)}}var mi=function(){function t(i){(0,c.Z)(this,t),this.jt=new vi,this.vt=!0,this.yr=!0,this.kr=performance.now(),this.Cr=this.kr-1,this.Tr=i}return(0,f.Z)(t,[{key:"Pr",value:function(){this.Cr=this.kr-1,this.gt()}},{key:"Rr",value:function(){if(this.gt(),2===this.Tr.F().lastPriceAnimation){var t=performance.now(),i=this.Cr-t;if(i>0)return void(i<650&&(this.Cr+=2600));this.kr=t,this.Cr=t+2600}}},{key:"gt",value:function(){this.vt=!0}},{key:"Dr",value:function(){this.yr=!0}},{key:"Ct",value:function(){return 0!==this.Tr.F().lastPriceAnimation}},{key:"Br",value:function(){switch(this.Tr.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Cr}}},{key:"Mt",value:function(){return this.vt?(this.St(),this.vt=!1,this.yr=!1):this.yr&&(this.Ar(),this.yr=!1),this.jt}},{key:"St",value:function(){this.jt.tt(null);var t=this.Tr.Ut().yt(),i=t.Vs(),e=this.Tr.Tt();if(null!==i&&null!==e){var n=this.Tr.Or(!0);if(!n.Lr&&i.Ir(n.Ys)){var s={x:t.Et(n.Ys),y:this.Tr.Bt().Dt(n.ut,e.At)},h=n.D,r=this.Tr.F().lineWidth,a=pi(this.Er(),h);this.jt.tt({_r:h,ur:r,cr:a.cr,dr:a.dr,lt:a.lt,Oe:s})}}}},{key:"Ar",value:function(){var t=this.jt.ar();if(null!==t){var i=pi(this.Er(),t._r);t.cr=i.cr,t.dr=i.dr,t.lt=i.lt}}},{key:"Er",value:function(){return this.Br()?performance.now()-this.kr:2599}}]),t}();function ki(t,i){return qt(Math.min(Math.max(t,12),30)*i)}function gi(t,i){switch(t){case"arrowDown":case"arrowUp":return ki(i,1);case"circle":return ki(i,.8);case"square":return ki(i,.7)}}function bi(t){return function(t){var i=Math.ceil(t);return i%2!=0?i-1:i}(ki(t,1))}function wi(t){return Math.max(ki(t,.1),3)}function _i(t,i,e,n,s){var h=gi("square",e),r=(h-1)/2,a=t-r,u=i-r;return n>=a&&n<=a+h&&s>=u&&s<=u+h}function Mi(t,i,e,n,s){var h=(gi("arrowUp",s)-1)/2,r=(qt(s/2)-1)/2;i.beginPath(),t?(i.moveTo(e-h,n),i.lineTo(e,n-h),i.lineTo(e+h,n),i.lineTo(e+r,n),i.lineTo(e+r,n+h),i.lineTo(e-r,n+h),i.lineTo(e-r,n)):(i.moveTo(e-h,n),i.lineTo(e,n+h),i.lineTo(e+h,n),i.lineTo(e+r,n),i.lineTo(e+r,n-h),i.lineTo(e-r,n-h),i.lineTo(e-r,n)),i.fill()}var Si=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.qe=new ai,t.W=-1,t.j="",t.zr="",t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"Ye",value:function(t,i){this.W===t&&this.j===i||(this.W=t,this.j=i,this.zr=K(t,i),this.qe.Fe())}},{key:"ir",value:function(t,i){if(null===this.zt||null===this.zt.it)return null;for(var e=this.zt.it.from;e<this.zt.it.to;e++){var n=this.zt.nt[e];if(Ci(n,t,i))return{sr:n.Vr,nr:n.nr}}return null}},{key:"Z",value:function(t,i,e){var n=t.context;if(null!==this.zt&&null!==this.zt.it){n.textBaseline="middle",n.font=this.zr;for(var s=this.zt.it.from;s<this.zt.it.to;s++){var h=this.zt.nt[s];void 0!==h.Gt&&(h.Gt.$i=this.qe.Si(n,h.Gt.Nr),h.Gt.It=this.W,h.Gt.st=h.st-h.Gt.$i/2),zi(h,n)}}}}]),e}(q);function zi(t,i){i.fillStyle=t.D,void 0!==t.Gt&&function(t,i,e,n){t.fillText(i,e,n)}(i,t.Gt.Nr,t.Gt.st,t.Gt.et),function(t,i){if(0!==t.Ns){switch(t.Fr){case"arrowDown":return void Mi(!1,i,t.st,t.et,t.Ns);case"arrowUp":return void Mi(!0,i,t.st,t.et,t.Ns);case"circle":return void function(t,i,e,n){var s=(gi("circle",n)-1)/2;t.beginPath(),t.arc(i,e,s,0,2*Math.PI,!1),t.fill()}(i,t.st,t.et,t.Ns);case"square":return void function(t,i,e,n){var s=gi("square",n),h=(s-1)/2,r=i-h,a=e-h;t.fillRect(r,a,s,s)}(i,t.st,t.et,t.Ns)}t.Fr}}(t,i)}function Ci(t,i,e){return!(void 0===t.Gt||!function(t,i,e,n,s,h){var r=n/2;return s>=t&&s<=t+e&&h>=i-r&&h<=i+r}(t.Gt.st,t.Gt.et,t.Gt.$i,t.Gt.It,i,e))||function(t,i,e){if(0===t.Ns)return!1;switch(t.Fr){case"arrowDown":case"arrowUp":return function(t,i,e,n,s,h){return _i(i,e,n,s,h)}(0,t.st,t.et,t.Ns,i,e);case"circle":return function(t,i,e,n,s){var h=2+gi("circle",e)/2,r=t-n,a=i-s;return Math.sqrt(r*r+a*a)<=h}(t.st,t.et,t.Ns,i,e);case"square":return _i(t.st,t.et,t.Ns,i,e)}}(t,i,e)}function xi(t,i,e,n,s,h,r,a,u){var l=O(e)?e:e.ce,o=O(e)?e:e._e,c=O(e)?e:e.ue,f=O(i.size)?Math.max(i.size,0):1,v=bi(a.Ks())*f,d=v/2;switch(t.Ns=v,i.position){case"inBar":return t.et=r.Dt(l,u),void(void 0!==t.Gt&&(t.Gt.et=t.et+d+h+.6*s));case"aboveBar":return t.et=r.Dt(o,u)-d-n.Wr,void 0!==t.Gt&&(t.Gt.et=t.et-d-.6*s,n.Wr+=1.2*s),void(n.Wr+=v+h);case"belowBar":return t.et=r.Dt(c,u)+d+n.jr,void 0!==t.Gt&&(t.Gt.et=t.et+d+h+.6*s,n.jr+=1.2*s),void(n.jr+=v+h)}i.position}var Ti,Zi=function(){function t(i,e){(0,c.Z)(this,t),this.vt=!0,this.$r=!0,this.Hr=!0,this.Ur=null,this.jt=new Si,this.Tr=i,this.Hi=e,this.zt={nt:[],it:null}}return(0,f.Z)(t,[{key:"gt",value:function(t){this.vt=!0,this.Hr=!0,"data"===t&&(this.$r=!0)}},{key:"Mt",value:function(t){if(!this.Tr.Ct())return null;this.vt&&this.qr();var i=this.Hi.F().layout;return this.jt.Ye(i.fontSize,i.fontFamily),this.jt.tt(this.zt),this.jt}},{key:"Yr",value:function(){if(this.Hr){if(this.Tr.Xr().length>0){var t=this.Hi.yt().Ks(),i=wi(t),e=1.5*bi(t)+2*i;this.Ur={above:e,below:e}}else this.Ur=null;this.Hr=!1}return this.Ur}},{key:"qr",value:function(){var t=this.Tr.Bt(),i=this.Hi.yt(),e=this.Tr.Xr();this.$r&&(this.zt.nt=e.map((function(t){return{_t:t.time,st:0,et:0,Ns:0,Fr:t.shape,D:t.color,Vr:t.internalId,nr:t.id,Gt:void 0}})),this.$r=!1);var n=this.Hi.F().layout;this.zt.it=null;var s=i.Vs();if(null!==s){var h=this.Tr.Tt();if(null!==h&&0!==this.zt.nt.length){var r=NaN,a=wi(i.Ks()),u={Wr:a,jr:a};this.zt.it=Ut(this.zt.nt,s,!0);for(var l=this.zt.it.from;l<this.zt.it.to;l++){var o=e[l];o.time!==r&&(u.Wr=a,u.jr=a,r=o.time);var c=this.zt.nt[l];c.st=i.Et(o.time),void 0!==o.text&&o.text.length>0&&(c.Gt={Nr:o.text,st:0,et:0,$i:0,It:0});var f=this.Tr.Zr(o.time);null!==f&&xi(c,o,f,u,n.fontSize,a,t,i,h.At)}this.vt=!1}}}}]),t}(),Ei=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"hr",value:function(){var t=this.er;t.Ct=!1;var i=this.Ts.F();if(i.priceLineVisible&&this.Ts.Ct()){var e=this.Ts.Or(0===i.priceLineSource);e.Lr||(t.Ct=!0,t.et=e.yi,t.D=this.Ts.Kr(e.D),t.rt=i.priceLineWidth,t.Ft=i.priceLineStyle)}}}]),e}(ci),Li=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).$t=t,n}return(0,f.Z)(e,[{key:"Ei",value:function(t,i,e){t.Ct=!1,i.Ct=!1;var n=this.$t;if(n.Ct()){var s=n.F(),h=s.lastValueVisible,r=""!==n.Gr(),a=0===s.seriesLastValueMode,u=n.Or(!1);if(!u.Lr){h&&(t.Gt=this.Jr(u,h,a),t.Ct=0!==t.Gt.length),(r||a)&&(i.Gt=this.Qr(u,h,r,a),i.Ct=i.Gt.length>0);var l=n.Kr(u.D),o=A(l);e.t=o.t,e.yi=u.yi,i.Ot=n.Ut().Lt(u.yi/n.Bt().It()),t.Ot=l,t.D=o.i,i.D=o.i}}}},{key:"Qr",value:function(t,i,e,n){var s="",h=this.$t.Gr();return e&&0!==h.length&&(s+="".concat(h," ")),i&&n&&(s+=this.$t.Bt().th()?t.ih:t.nh),s.trim()}},{key:"Jr",value:function(t,i,e){return i?e?this.$t.Bt().th()?t.nh:t.ih:t.Gt:""}}]),e}(vt),Ni=function(){function t(i,e){(0,c.Z)(this,t),this.sh=i,this.eh=e}return(0,f.Z)(t,[{key:"rh",value:function(t){return null!==t&&this.sh===t.sh&&this.eh===t.eh}},{key:"hh",value:function(){return new t(this.sh,this.eh)}},{key:"lh",value:function(){return this.sh}},{key:"ah",value:function(){return this.eh}},{key:"oh",value:function(){return this.eh-this.sh}},{key:"Ni",value:function(){return this.eh===this.sh||Number.isNaN(this.eh)||Number.isNaN(this.sh)}},{key:"Qn",value:function(i){return null===i?this:new t(Math.min(this.lh(),i.lh()),Math.max(this.ah(),i.ah()))}},{key:"_h",value:function(t){if(O(t)&&0!==this.eh-this.sh){var i=.5*(this.eh+this.sh),e=this.eh-i,n=this.sh-i;e*=t,n*=t,this.eh=i+e,this.sh=i+n}}},{key:"uh",value:function(t){O(t)&&(this.eh+=t,this.sh+=t)}},{key:"dh",value:function(){return{minValue:this.sh,maxValue:this.eh}}}],[{key:"fh",value:function(i){return null===i?null:new t(i.minValue,i.maxValue)}}]),t}(),Fi=function(){function t(i,e){(0,c.Z)(this,t),this.ph=i,this.mh=e||null}return(0,f.Z)(t,[{key:"bh",value:function(){return this.ph}},{key:"gh",value:function(){return this.mh}},{key:"dh",value:function(){return null===this.ph?null:{priceRange:this.ph.dh(),margins:this.mh||void 0}}}],[{key:"fh",value:function(i){return null===i?null:new t(Ni.fh(i.priceRange),i.margins)}}]),t}(),Bi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t)).wh=n,s}return(0,f.Z)(e,[{key:"hr",value:function(){var t=this.er;t.Ct=!1;var i=this.wh.F();if(this.Ts.Ct()&&i.lineVisible){var e=this.wh.Mh();null!==e&&(t.Ct=!0,t.et=e,t.D=i.color,t.rt=i.lineWidth,t.Ft=i.lineStyle,t.nr=this.wh.F().id)}}}]),e}(ci),Pi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this)).Tr=t,s.wh=n,s}return(0,f.Z)(e,[{key:"Ei",value:function(t,i,e){t.Ct=!1,i.Ct=!1;var n=this.wh.F(),s=n.axisLabelVisible,h=""!==n.title,r=this.Tr;if(s&&r.Ct()){var a=this.wh.Mh();if(null!==a){h&&(i.Gt=n.title,i.Ct=!0),i.Ot=r.Ut().Lt(a/r.Bt().It()),t.Gt=this.Sh(n.price),t.Ct=!0;var u=A(n.axisLabelColor||n.color);e.t=u.t;var l=n.axisLabelTextColor||u.i;t.D=l,i.D=l,e.yi=a}}}},{key:"Sh",value:function(t){var i=this.Tr.Tt();return null===i?"":this.Tr.Bt().Fi(t,i.At)}}]),e}(vt),Ri=function(){function t(i,e){(0,c.Z)(this,t),this.Tr=i,this.un=e,this.xh=new Bi(i,this),this.Xe=new Pi(i,this),this.yh=new li(this.Xe,i,i.Ut())}return(0,f.Z)(t,[{key:"kh",value:function(t){V(this.un,t),this.gt(),this.Tr.Ut().Ch()}},{key:"F",value:function(){return this.un}},{key:"Th",value:function(){return this.xh}},{key:"Ph",value:function(){return this.yh}},{key:"Rh",value:function(){return this.Xe}},{key:"gt",value:function(){this.xh.gt(),this.Xe.gt()}},{key:"Mh",value:function(){var t=this.Tr,i=t.Bt();if(t.Ut().yt().Ni()||i.Ni())return null;var e=t.Tt();return null===e?null:i.Dt(this.un.price,e.At)}}]),t}(),Ai=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).Hi=t,n}return(0,f.Z)(e,[{key:"Ut",value:function(){return this.Hi}}]),e}(kt),Di={Bar:function(t,i,e,n){var s,h=i.upColor,r=i.downColor,a=x(t(e,n)),u=T(a.At[0])<=T(a.At[3]);return{ie:null!==(s=a.D)&&void 0!==s?s:u?h:r}},Candlestick:function(t,i,e,n){var s,h,r,a=i.upColor,u=i.downColor,l=i.borderUpColor,o=i.borderDownColor,c=i.wickUpColor,f=i.wickDownColor,v=x(t(e,n)),d=T(v.At[0])<=T(v.At[3]);return{ie:null!==(s=v.D)&&void 0!==s?s:d?a:u,Pe:null!==(h=v.Ot)&&void 0!==h?h:d?l:o,Te:null!==(r=v.Dh)&&void 0!==r?r:d?c:f}},Area:function(t,i,e,n){var s,h,r,a,u=x(t(e,n));return{ie:null!==(s=u.ot)&&void 0!==s?s:i.lineColor,ot:null!==(h=u.ot)&&void 0!==h?h:i.lineColor,bs:null!==(r=u.bs)&&void 0!==r?r:i.topColor,gs:null!==(a=u.gs)&&void 0!==a?a:i.bottomColor}},Baseline:function(t,i,e,n){var s,h,r,a,u,l,o=x(t(e,n));return{ie:o.At[3]>=i.baseValue.price?i.topLineColor:i.bottomLineColor,be:null!==(s=o.be)&&void 0!==s?s:i.topLineColor,ge:null!==(h=o.ge)&&void 0!==h?h:i.bottomLineColor,de:null!==(r=o.de)&&void 0!==r?r:i.topFillColor1,fe:null!==(a=o.fe)&&void 0!==a?a:i.topFillColor2,pe:null!==(u=o.pe)&&void 0!==u?u:i.bottomFillColor1,ve:null!==(l=o.ve)&&void 0!==l?l:i.bottomFillColor2}},Line:function(t,i,e,n){var s,h,r=x(t(e,n));return{ie:null!==(s=r.D)&&void 0!==s?s:i.color,ot:null!==(h=r.D)&&void 0!==h?h:i.color}},Histogram:function(t,i,e,n){var s;return{ie:null!==(s=x(t(e,n)).D)&&void 0!==s?s:i.color}}},Vi=function(){function t(i){var e=this;(0,c.Z)(this,t),this.Bh=function(t,i){return void 0!==i?i.At:e.Tr.Ln().Ah(t)},this.Tr=i,this.Oh=Di[i.Lh()]}return(0,f.Z)(t,[{key:"Os",value:function(t,i){return this.Oh(this.Bh,this.Tr.F(),t,i)}}]),t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(Ti||(Ti={}));var Oi=30,Ui=function(){function t(){(0,c.Z)(this,t),this.Ih=[],this.Eh=new Map,this.zh=new Map}return(0,f.Z)(t,[{key:"Vh",value:function(){return this.Ns()>0?this.Ih[this.Ih.length-1]:null}},{key:"Nh",value:function(){return this.Ns()>0?this.Fh(0):null}},{key:"On",value:function(){return this.Ns()>0?this.Fh(this.Ih.length-1):null}},{key:"Ns",value:function(){return this.Ih.length}},{key:"Ni",value:function(){return 0===this.Ns()}},{key:"Ir",value:function(t){return null!==this.Wh(t,0)}},{key:"Ah",value:function(t){return this.jh(t)}},{key:"jh",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=this.Wh(t,i);return null===e?null:Object.assign(Object.assign({},this.$h(e)),{Ys:this.Fh(e)})}},{key:"Us",value:function(){return this.Ih}},{key:"Hh",value:function(t,i,e){if(this.Ni())return null;var n,s=null,h=(0,r.Z)(e);try{for(h.s();!(n=h.n()).done;){var a=n.value;s=Ii(s,this.Uh(t,i,a))}}catch(u){h.e(u)}finally{h.f()}return s}},{key:"tt",value:function(t){this.zh.clear(),this.Eh.clear(),this.Ih=t}},{key:"Fh",value:function(t){return this.Ih[t].Ys}},{key:"$h",value:function(t){return this.Ih[t]}},{key:"Wh",value:function(t,i){var e=this.qh(t);if(null===e&&0!==i)switch(i){case-1:return this.Yh(t);case 1:return this.Xh(t);default:throw new TypeError("Unknown search mode")}return e}},{key:"Yh",value:function(t){var i=this.Zh(t);return i>0&&(i-=1),i!==this.Ih.length&&this.Fh(i)<t?i:null}},{key:"Xh",value:function(t){var i=this.Kh(t);return i!==this.Ih.length&&t<this.Fh(i)?i:null}},{key:"qh",value:function(t){var i=this.Zh(t);return i===this.Ih.length||t<this.Ih[i].Ys?null:i}},{key:"Zh",value:function(t){return At(this.Ih,t,(function(t,i){return t.Ys<i}))}},{key:"Kh",value:function(t){return Dt(this.Ih,t,(function(t,i){return i.Ys>t}))}},{key:"Gh",value:function(t,i,e){for(var n=null,s=t;s<i;s++){var h=this.Ih[s].At[e];Number.isNaN(h)||(null===n?n={Jh:h,Qh:h}:(h<n.Jh&&(n.Jh=h),h>n.Qh&&(n.Qh=h)))}return n}},{key:"Uh",value:function(t,i,e){if(this.Ni())return null;var n=null,s=x(this.Nh()),h=x(this.On()),r=Math.max(t,s),a=Math.min(i,h),u=Math.ceil(r/Oi)*Oi,l=Math.max(u,Math.floor(a/Oi)*Oi),o=this.Zh(r),c=this.Kh(Math.min(a,u,i));n=Ii(n,this.Gh(o,c,e));var f=this.Eh.get(e);void 0===f&&(f=new Map,this.Eh.set(e,f));for(var v=Math.max(u+1,r);v<l;v+=Oi){var d=Math.floor(v/Oi),y=f.get(d);if(void 0===y){var p=this.Zh(d*Oi),m=this.Kh((d+1)*Oi-1);y=this.Gh(p,m,e),f.set(d,y)}n=Ii(n,y)}var k=this.Zh(l),g=this.Kh(a);return n=Ii(n,this.Gh(k,g,e))}}]),t}();function Ii(t,i){return null===t?i:null===i?t:{Jh:Math.min(t.Jh,i.Jh),Qh:Math.max(t.Qh,i.Qh)}}var Wi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n,s){var h;(0,c.Z)(this,e),(h=i.call(this,t)).zt=new Ui,h.xh=new Ei((0,a.Z)(h)),h.tl=[],h.il=new fi((0,a.Z)(h)),h.nl=null,h.sl=null,h.el=[],h.rl=[],h.hl=null,h.un=n,h.ll=s;var r=new Li((0,a.Z)(h));return h.rn=[r],h.yh=new li(r,(0,a.Z)(h),t),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.nl=new mi((0,a.Z)(h))),h.al(),h.ol(),h}return(0,f.Z)(e,[{key:"M",value:function(){null!==this.hl&&clearTimeout(this.hl)}},{key:"Kr",value:function(t){return this.un.priceLineColor||t}},{key:"Or",value:function(t){var i={Lr:!0},e=this.Bt();if(this.Ut().yt().Ni()||e.Ni()||this.zt.Ni())return i;var n,s,h=this.Ut().yt().Vs(),r=this.Tt();if(null===h||null===r)return i;if(t){var a=this.zt.Vh();if(null===a)return i;n=a,s=a.Ys}else{var u=this.zt.jh(h.ci(),-1);if(null===u)return i;if(null===(n=this.zt.Ah(u.Ys)))return i;s=u.Ys}var l=n.At[3],o=this.Ls().Os(s,{At:n}),c=e.Dt(l,r.At);return{Lr:!1,ut:l,Gt:e.Fi(l,r.At),ih:e._l(l),nh:e.ul(l,r.At),D:o.ie,yi:c,Ys:s}}},{key:"Ls",value:function(){return null!==this.sl||(this.sl=new Vi(this)),this.sl}},{key:"F",value:function(){return this.un}},{key:"kh",value:function(t){var i=t.priceScaleId;void 0!==i&&i!==this.un.priceScaleId&&this.Ut().cl(this,i),V(this.un,t),void 0!==t.priceFormat&&(this.al(),this.Ut().dl()),this.Ut().fl(this),this.Ut().pl(),this.bn.gt("options")}},{key:"tt",value:function(t,i){this.zt.tt(t),this.vl(),this.bn.gt("data"),this.cn.gt("data"),null!==this.nl&&(i&&i.ml?this.nl.Rr():0===t.length&&this.nl.Pr());var e=this.Ut().Ke(this);this.Ut().bl(e),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}},{key:"gl",value:function(t){this.el=t,this.vl();var i=this.Ut().Ke(this);this.cn.gt("data"),this.Ut().bl(i),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}},{key:"wl",value:function(){return this.el}},{key:"Xr",value:function(){return this.rl}},{key:"Ml",value:function(t){var i=new Ri(this,t);return this.tl.push(i),this.Ut().fl(this),i}},{key:"Sl",value:function(t){var i=this.tl.indexOf(t);-1!==i&&this.tl.splice(i,1),this.Ut().fl(this)}},{key:"Lh",value:function(){return this.ll}},{key:"Tt",value:function(){var t=this.xl();return null===t?null:{At:t.At[3],yl:t._t}}},{key:"xl",value:function(){var t=this.Ut().yt().Vs();if(null===t)return null;var i=t.Ms();return this.zt.jh(i,1)}},{key:"Ln",value:function(){return this.zt}},{key:"Zr",value:function(t){var i=this.zt.Ah(t);return null===i?null:"Bar"===this.ll||"Candlestick"===this.ll?{oe:i.At[0],_e:i.At[1],ue:i.At[2],ce:i.At[3]}:i.At[3]}},{key:"kl",value:function(t){var i=this,e=this.nl;return null!==e&&e.Ct()?(null===this.hl&&e.Br()&&(this.hl=setTimeout((function(){i.hl=null,i.Ut().Cl()}),0)),e.Dr(),[e]):[]}},{key:"Tn",value:function(){var t=[];this.Tl()||t.push(this.il),t.push(this.bn,this.xh,this.cn);var i=this.tl.map((function(t){return t.Th()}));return t.push.apply(t,(0,o.Z)(i)),t}},{key:"Ji",value:function(t){return[this.yh].concat((0,o.Z)(this.tl.map((function(t){return t.Ph()}))))}},{key:"Pn",value:function(t,i){if(i!==this.Yi&&!this.Tl())return[];var e,n=(0,o.Z)(this.rn),s=(0,r.Z)(this.tl);try{for(s.s();!(e=s.n()).done;){var h=e.value;n.push(h.Rh())}}catch(a){s.e(a)}finally{s.f()}return n}},{key:"Pl",value:function(t,i){var e=this;if(void 0!==this.un.autoscaleInfoProvider){var n=this.un.autoscaleInfoProvider((function(){var n=e.Rl(t,i);return null===n?null:n.dh()}));return Fi.fh(n)}return this.Rl(t,i)}},{key:"Dl",value:function(){return this.un.priceFormat.minMove}},{key:"Bl",value:function(){return this.Al}},{key:"Dn",value:function(){var t;this.bn.gt(),this.cn.gt();var i,e=(0,r.Z)(this.rn);try{for(e.s();!(i=e.n()).done;){i.value.gt()}}catch(h){e.e(h)}finally{e.f()}var n,s=(0,r.Z)(this.tl);try{for(s.s();!(n=s.n()).done;){n.value.gt()}}catch(h){s.e(h)}finally{s.f()}this.xh.gt(),this.il.gt(),null===(t=this.nl)||void 0===t||t.gt()}},{key:"Bt",value:function(){return x((0,s.Z)((0,h.Z)(e.prototype),"Bt",this).call(this))}},{key:"kt",value:function(t){if("Line"!==this.ll&&"Area"!==this.ll&&"Baseline"!==this.ll||!this.un.crosshairMarkerVisible)return null;var i=this.zt.Ah(t);return null===i?null:{ut:i.At[3],lt:this.Ol(),Ot:this.Ll(),Rt:this.Il(),Pt:this.El(t)}}},{key:"Gr",value:function(){return this.un.title}},{key:"Ct",value:function(){return this.un.visible}},{key:"Tl",value:function(){return!bt(this.Bt().zl())}},{key:"Rl",value:function(t,i){if(!U(t)||!U(i)||this.zt.Ni())return null;var e="Line"===this.ll||"Area"===this.ll||"Baseline"===this.ll||"Histogram"===this.ll?[3]:[2,1],n=this.zt.Hh(t,i,e),s=null!==n?new Ni(n.Jh,n.Qh):null;if("Histogram"===this.Lh()){var h=this.un.base,r=new Ni(h,h);s=null!==s?s.Qn(r):r}return new Fi(s,this.cn.Yr())}},{key:"Ol",value:function(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerRadius}return 0}},{key:"Ll",value:function(){switch(this.ll){case"Line":case"Area":case"Baseline":var t=this.un.crosshairMarkerBorderColor;if(0!==t.length)return t}return null}},{key:"Il",value:function(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerBorderWidth}return 0}},{key:"El",value:function(t){switch(this.ll){case"Line":case"Area":case"Baseline":var i=this.un.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Ls().Os(t).ie}},{key:"al",value:function(){switch(this.un.priceFormat.type){case"custom":this.Al={format:this.un.priceFormat.formatter};break;case"volume":this.Al=new zt(this.un.priceFormat.precision);break;case"percent":this.Al=new St(this.un.priceFormat.precision);break;default:var t=Math.pow(10,this.un.priceFormat.precision);this.Al=new Mt(t,this.un.priceFormat.minMove*t)}null!==this.Yi&&this.Yi.Vl()}},{key:"vl",value:function(){var t=this,i=this.Ut().yt();if(i.Nl()&&!this.zt.Ni()){var e=x(this.zt.Nh());this.rl=this.el.map((function(n,s){var h=x(i.Fl(n.time,!0)),r=h<e?1:-1;return{time:x(t.zt.jh(h,r)).Ys,position:n.position,shape:n.shape,color:n.color,id:n.id,internalId:s,text:n.text,size:n.size}}))}else this.rl=[]}},{key:"ol",value:function(){switch(this.cn=new Zi(this,this.Ut()),this.ll){case"Bar":this.bn=new jt(this,this.Ut());break;case"Candlestick":this.bn=new ei(this,this.Ut());break;case"Line":this.bn=new hi(this,this.Ut());break;case"Area":this.bn=new Ht(this,this.Ut());break;case"Baseline":this.bn=new ti(this,this.Ut());break;case"Histogram":this.bn=new si(this,this.Ut());break;default:throw Error("Unknown chart style assigned: "+this.ll)}}}]),e}(Ai),Hi=function(){function t(i){(0,c.Z)(this,t),this.un=i}return(0,f.Z)(t,[{key:"Wl",value:function(t,i,e){var n=t;if(0===this.un.mode)return n;var s=e.fn(),h=s.Tt();if(null===h)return n;var r=s.Dt(t,h),a=e.jl().filter((function(t){return t instanceof Wi})).reduce((function(t,n){if(e.Ge(n)||!n.Ct())return t;var s=n.Bt(),h=n.Ln();if(s.Ni()||!h.Ir(i))return t;var r=h.Ah(i);if(null===r)return t;var a=T(n.Tt());return t.concat([s.Dt(r.At[3],a.At)])}),[]);if(0===a.length)return n;a.sort((function(t,i){return Math.abs(t-r)-Math.abs(i-r)}));var u=a[0];return n=s.pn(u,h)}}]),t}(),Yi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"tt",value:function(t){this.zt=t}},{key:"Z",value:function(t){var i=this,e=t.context,n=t.bitmapSize,s=t.horizontalPixelRatio,h=t.verticalPixelRatio;if(null!==this.zt){var a=Math.max(1,Math.floor(s));e.lineWidth=a,function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(e,(function(){var t=x(i.zt);if(t.$l){e.strokeStyle=t.Hl,M(e,t.Ul),e.beginPath();var u,l=(0,r.Z)(t.ql);try{for(l.s();!(u=l.n()).done;){var o=u.value,c=Math.round(o.Yl*s);e.moveTo(c,-a),e.lineTo(c,n.height+a)}}catch(p){l.e(p)}finally{l.f()}e.stroke()}if(t.Xl){e.strokeStyle=t.Zl,M(e,t.Kl),e.beginPath();var f,v=(0,r.Z)(t.Gl);try{for(v.s();!(f=v.n()).done;){var d=f.value,y=Math.round(d.Yl*h);e.moveTo(-a,y),e.lineTo(n.width+a,y)}}catch(p){v.e(p)}finally{v.f()}e.stroke()}}))}}}]),e}(et),Gi=function(){function t(i){(0,c.Z)(this,t),this.jt=new Yi,this.vt=!0,this.tn=i}return(0,f.Z)(t,[{key:"gt",value:function(){this.vt=!0}},{key:"Mt",value:function(){if(this.vt){var t=this.tn.Ut().F().grid,i={Xl:t.horzLines.visible,$l:t.vertLines.visible,Zl:t.horzLines.color,Hl:t.vertLines.color,Kl:t.horzLines.style,Ul:t.vertLines.style,Gl:this.tn.fn().Jl(),ql:this.tn.Ut().yt().Jl()||[]};this.jt.tt(i),this.vt=!1}return this.jt}}]),t}(),ji=function(){function t(i){(0,c.Z)(this,t),this.bn=new Gi(i)}return(0,f.Z)(t,[{key:"Th",value:function(){return this.bn}}]),t}(),Ki={Ql:4,ta:1e-4};function Xi(t,i){var e=100*(t-i)/i;return i<0?-e:e}function Ji(t,i){var e=Xi(t.lh(),i),n=Xi(t.ah(),i);return new Ni(e,n)}function qi(t,i){var e=100*(t-i)/i+100;return i<0?-e:e}function Qi(t,i){var e=qi(t.lh(),i),n=qi(t.ah(),i);return new Ni(e,n)}function $i(t,i){var e=Math.abs(t);if(e<1e-15)return 0;var n=Jt(e+i.ta)+i.Ql;return t<0?-n:n}function te(t,i){var e=Math.abs(t);if(e<1e-15)return 0;var n=Math.pow(10,e-i.Ql)-i.ta;return t<0?-n:n}function ie(t,i){if(null===t)return null;var e=$i(t.lh(),i),n=$i(t.ah(),i);return new Ni(e,n)}function ee(t,i){if(null===t)return null;var e=te(t.lh(),i),n=te(t.ah(),i);return new Ni(e,n)}function ne(t){if(null===t)return Ki;var i=Math.abs(t.ah()-t.lh());if(i>=1||i<1e-15)return Ki;var e=Math.ceil(Math.abs(Math.log10(i))),n=Ki.Ql+e;return{Ql:n,ta:1/Math.pow(10,n)}}var se,he=function(){function t(i,e){if((0,c.Z)(this,t),this.ia=i,this.na=e,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.ia))this.sa=[2,2.5,2];else{this.sa=[];for(var n=this.ia;1!==n;){if(n%2==0)this.sa.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.sa.push(2,2.5),n/=5}if(this.sa.length>100)throw new Error("something wrong with base")}}}return(0,f.Z)(t,[{key:"ea",value:function(t,i,e){for(var n,s=0===this.ia?0:1/this.ia,h=Math.pow(10,Math.max(0,Math.ceil(Jt(t-i)))),r=0,a=this.na[0];;){var u=Xt(h,s,1e-14)&&h>s+1e-14,l=Xt(h,e*a,1e-14),o=Xt(h,1,1e-14);if(!(u&&l&&o))break;h/=a,a=this.na[++r%this.na.length]}if(h<=s+1e-14&&(h=s),h=Math.max(1,h),this.sa.length>0&&(n=h,1,1e-14,Math.abs(n-1)<1e-14))for(r=0,a=this.sa[0];Xt(h,e*a,1e-14)&&h>s+1e-14;)h/=a,a=this.sa[++r%this.sa.length];return h}}]),t}(),re=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.ra=[],this.zi=i,this.ia=e,this.ha=n,this.la=s}return(0,f.Z)(t,[{key:"ea",value:function(t,i){if(t<i)throw new Error("high < low");var e=this.zi.It(),n=(t-i)*this.aa()/e,s=new he(this.ia,[2,2.5,2]),h=new he(this.ia,[2,2,2.5]),r=new he(this.ia,[2.5,2,2]),a=[];return a.push(s.ea(t,i,n),h.ea(t,i,n),r.ea(t,i,n)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],e=1;e<t.length;++e)t[e]<i&&(i=t[e]);return i}(a)}},{key:"oa",value:function(){var t=this.zi,i=t.Tt();if(null!==i){var e=t.It(),n=this.ha(e-1,i),s=this.ha(0,i),h=this.zi.F().entireTextOnly?this._a()/2:0,r=h,a=e-1-h,u=Math.max(n,s),l=Math.min(n,s);if(u!==l){for(var o=this.ea(u,l),c=u%o,f=u>=l?1:-1,v=null,d=0,y=u-(c+=c<0?o:0);y>l;y-=o){var p=this.la(y,i,!0);null!==v&&Math.abs(p-v)<this.aa()||p<r||p>a||(d<this.ra.length?(this.ra[d].Yl=p,this.ra[d].ua=t.ca(y)):this.ra.push({Yl:p,ua:t.ca(y)}),d++,v=p,t.da()&&(o=this.ea(y*f,l)))}this.ra.length=d}else this.ra=[]}else this.ra=[]}},{key:"Jl",value:function(){return this.ra}},{key:"_a",value:function(){return this.zi.T()}},{key:"aa",value:function(){return Math.ceil(2.5*this._a())}}]),t}();function ae(t){return t.slice().sort((function(t,i){return x(t.Zi())-x(i.Zi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(se||(se={}));var ue=new St,le=new Mt(100,1),oe=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.fa=0,this.pa=null,this.ph=null,this.va=null,this.ma={ba:!1,ga:null},this.wa=0,this.Ma=0,this.Sa=new D,this.xa=new D,this.ya=[],this.ka=null,this.Ca=null,this.Ta=null,this.Pa=null,this.Al=le,this.Ra=ne(null),this.Da=i,this.un=e,this.Ba=n,this.Aa=s,this.Oa=new re(this,100,this.La.bind(this),this.Ia.bind(this))}return(0,f.Z)(t,[{key:"zl",value:function(){return this.Da}},{key:"F",value:function(){return this.un}},{key:"kh",value:function(t){if(V(this.un,t),this.Vl(),void 0!==t.mode&&this.Ea({lr:t.mode}),void 0!==t.scaleMargins){var i=C(t.scaleMargins.top),e=C(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(e<0||e>1||i+e>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(e));if(i+e>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+e));this.za(),this.Ca=null}}},{key:"Va",value:function(){return this.un.autoScale}},{key:"da",value:function(){return 1===this.un.mode}},{key:"th",value:function(){return 2===this.un.mode}},{key:"Na",value:function(){return 3===this.un.mode}},{key:"lr",value:function(){return{Fn:this.un.autoScale,Fa:this.un.invertScale,lr:this.un.mode}}},{key:"Ea",value:function(t){var i=this.lr(),e=null;void 0!==t.Fn&&(this.un.autoScale=t.Fn),void 0!==t.lr&&(this.un.mode=t.lr,2!==t.lr&&3!==t.lr||(this.un.autoScale=!0),this.ma.ba=!1),1===i.lr&&t.lr!==i.lr&&(function(t,i){if(null===t)return!1;var e=te(t.lh(),i),n=te(t.ah(),i);return isFinite(e)&&isFinite(n)}(this.ph,this.Ra)?null!==(e=ee(this.ph,this.Ra))&&this.Wa(e):this.un.autoScale=!0),1===t.lr&&t.lr!==i.lr&&(null!==(e=ie(this.ph,this.Ra))&&this.Wa(e));var n=i.lr!==this.un.mode;n&&(2===i.lr||this.th())&&this.Vl(),n&&(3===i.lr||this.Na())&&this.Vl(),void 0!==t.Fa&&i.Fa!==t.Fa&&(this.un.invertScale=t.Fa,this.ja()),this.xa.m(i,this.lr())}},{key:"$a",value:function(){return this.xa}},{key:"T",value:function(){return this.Ba.fontSize}},{key:"It",value:function(){return this.fa}},{key:"Ha",value:function(t){this.fa!==t&&(this.fa=t,this.za(),this.Ca=null)}},{key:"Ua",value:function(){if(this.pa)return this.pa;var t=this.It()-this.qa()-this.Ya();return this.pa=t,t}},{key:"bh",value:function(){return this.Xa(),this.ph}},{key:"Wa",value:function(t,i){var e=this.ph;(i||null===e&&null!==t||null!==e&&!e.rh(t))&&(this.Ca=null,this.ph=t)}},{key:"Ni",value:function(){return this.Xa(),0===this.fa||!this.ph||this.ph.Ni()}},{key:"Za",value:function(t){return this.Fa()?t:this.It()-1-t}},{key:"Dt",value:function(t,i){return this.th()?t=Xi(t,i):this.Na()&&(t=qi(t,i)),this.Ia(t,i)}},{key:"$s",value:function(t,i,e){this.Xa();for(var n=this.Ya(),s=x(this.bh()),h=s.lh(),r=s.ah(),a=this.Ua()-1,u=this.Fa(),l=a/(r-h),o=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Ka(),v=o;v<c;v++){var d=t[v],y=d.ut;if(!isNaN(y)){var p=y;null!==f&&(p=f(d.ut,i));var m=n+l*(p-h),k=u?m:this.fa-1-m;d.et=k}}}},{key:"le",value:function(t,i,e){this.Xa();for(var n=this.Ya(),s=x(this.bh()),h=s.lh(),r=s.ah(),a=this.Ua()-1,u=this.Fa(),l=a/(r-h),o=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Ka(),v=o;v<c;v++){var d=t[v],y=d.oe,p=d._e,m=d.ue,k=d.ce;null!==f&&(y=f(d.oe,i),p=f(d._e,i),m=f(d.ue,i),k=f(d.ce,i));var g=n+l*(y-h),b=u?g:this.fa-1-g;d.re=b,g=n+l*(p-h),b=u?g:this.fa-1-g,d.ne=b,g=n+l*(m-h),b=u?g:this.fa-1-g,d.se=b,g=n+l*(k-h),b=u?g:this.fa-1-g,d.he=b}}},{key:"pn",value:function(t,i){var e=this.La(t,i);return this.Ga(e,i)}},{key:"Ga",value:function(t,i){var e=t;return this.th()?e=function(t,i){return i<0&&(t=-t),t/100*i+i}(e,i):this.Na()&&(e=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(e,i)),e}},{key:"jl",value:function(){return this.ya}},{key:"Ja",value:function(){if(this.ka)return this.ka;for(var t=[],i=0;i<this.ya.length;i++){var e=this.ya[i];null===e.Zi()&&e.Ki(i+1),t.push(e)}return t=ae(t),this.ka=t,this.ka}},{key:"Qa",value:function(t){-1===this.ya.indexOf(t)&&(this.ya.push(t),this.Vl(),this.io())}},{key:"no",value:function(t){var i=this.ya.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.ya.splice(i,1),0===this.ya.length&&(this.Ea({Fn:!0}),this.Wa(null)),this.Vl(),this.io()}},{key:"Tt",value:function(){var t,i=null,e=(0,r.Z)(this.ya);try{for(e.s();!(t=e.n()).done;){var n=t.value.Tt();null!==n&&(null===i||n.yl<i.yl)&&(i=n)}}catch(s){e.e(s)}finally{e.f()}return null===i?null:i.At}},{key:"Fa",value:function(){return this.un.invertScale}},{key:"Jl",value:function(){var t=null===this.Tt();if(null!==this.Ca&&(t||this.Ca.so===t))return this.Ca.Jl;this.Oa.oa();var i=this.Oa.Jl();return this.Ca={Jl:i,so:t},this.Sa.m(),i}},{key:"eo",value:function(){return this.Sa}},{key:"ro",value:function(t){this.th()||this.Na()||null===this.Ta&&null===this.va&&(this.Ni()||(this.Ta=this.fa-t,this.va=x(this.bh()).hh()))}},{key:"ho",value:function(t){if(!this.th()&&!this.Na()&&null!==this.Ta){this.Ea({Fn:!1}),(t=this.fa-t)<0&&(t=0);var i=(this.Ta+.2*(this.fa-1))/(t+.2*(this.fa-1)),e=x(this.va).hh();i=Math.max(i,.1),e._h(i),this.Wa(e)}}},{key:"lo",value:function(){this.th()||this.Na()||(this.Ta=null,this.va=null)}},{key:"ao",value:function(t){this.Va()||null===this.Pa&&null===this.va&&(this.Ni()||(this.Pa=t,this.va=x(this.bh()).hh()))}},{key:"oo",value:function(t){if(!this.Va()&&null!==this.Pa){var i=x(this.bh()).oh()/(this.Ua()-1),e=t-this.Pa;this.Fa()&&(e*=-1);var n=e*i,s=x(this.va).hh();s.uh(n),this.Wa(s,!0),this.Ca=null}}},{key:"_o",value:function(){this.Va()||null!==this.Pa&&(this.Pa=null,this.va=null)}},{key:"Bl",value:function(){return this.Al||this.Vl(),this.Al}},{key:"Fi",value:function(t,i){switch(this.un.mode){case 2:return this.Bl().format(Xi(t,i));case 3:return this.Bl().format(qi(t,i));default:return this.Sh(t)}}},{key:"ca",value:function(t){switch(this.un.mode){case 2:case 3:return this.Bl().format(t);default:return this.Sh(t)}}},{key:"_l",value:function(t){return this.Sh(t,x(this.uo()).Bl())}},{key:"ul",value:function(t,i){return t=Xi(t,i),ue.format(t)}},{key:"co",value:function(){return this.ya}},{key:"do",value:function(t){this.ma={ga:t,ba:!1}}},{key:"Dn",value:function(){this.ya.forEach((function(t){return t.Dn()}))}},{key:"Vl",value:function(){this.Ca=null;var t=this.uo(),i=100;null!==t&&(i=Math.round(1/t.Dl())),this.Al=le,this.th()?(this.Al=ue,i=100):this.Na()?(this.Al=new Mt(100,1),i=100):null!==t&&(this.Al=t.Bl()),this.Oa=new re(this,i,this.La.bind(this),this.Ia.bind(this)),this.Oa.oa()}},{key:"io",value:function(){this.ka=null}},{key:"uo",value:function(){return this.ya[0]||null}},{key:"qa",value:function(){return this.Fa()?this.un.scaleMargins.bottom*this.It()+this.Ma:this.un.scaleMargins.top*this.It()+this.wa}},{key:"Ya",value:function(){return this.Fa()?this.un.scaleMargins.top*this.It()+this.wa:this.un.scaleMargins.bottom*this.It()+this.Ma}},{key:"Xa",value:function(){this.ma.ba||(this.ma.ba=!0,this.fo())}},{key:"za",value:function(){this.pa=null}},{key:"Ia",value:function(t,i){if(this.Xa(),this.Ni())return 0;t=this.da()&&t?$i(t,this.Ra):t;var e=x(this.bh()),n=this.Ya()+(this.Ua()-1)*(t-e.lh())/e.oh();return this.Za(n)}},{key:"La",value:function(t,i){if(this.Xa(),this.Ni())return 0;var e=this.Za(t),n=x(this.bh()),s=n.lh()+n.oh()*((e-this.Ya())/(this.Ua()-1));return this.da()?te(s,this.Ra):s}},{key:"ja",value:function(){this.Ca=null,this.Oa.oa()}},{key:"fo",value:function(){var t=this.ma.ga;if(null!==t){var i,e,n,s=null,h=this.co(),a=0,u=0,l=(0,r.Z)(h);try{for(l.s();!(i=l.n()).done;){var o=i.value;if(o.Ct()){var c=o.Tt();if(null!==c){var f=o.Pl(t.Ms(),t.ci()),v=f&&f.bh();if(null!==v){switch(this.un.mode){case 1:v=ie(v,this.Ra);break;case 2:v=Ji(v,c.At);break;case 3:v=Qi(v,c.At)}if(s=null===s?v:s.Qn(x(v)),null!==f){var d=f.gh();null!==d&&(a=Math.max(a,d.above),u=Math.max(a,d.below))}}}}}}catch(b){l.e(b)}finally{l.f()}if(a===this.wa&&u===this.Ma||(this.wa=a,this.Ma=u,this.Ca=null,this.za()),null!==s){if(s.lh()===s.ah()){var y=this.uo(),p=5*(null===y||this.th()||this.Na()?1:y.Dl());this.da()&&(s=ee(s,this.Ra)),s=new Ni(s.lh()-p,s.ah()+p),this.da()&&(s=ie(s,this.Ra))}if(this.da()){var m=ee(s,this.Ra),k=ne(m);if(e=k,n=this.Ra,e.Ql!==n.Ql||e.ta!==n.ta){var g=null!==this.va?ee(this.va,this.Ra):null;this.Ra=k,s=ie(m,k),null!==g&&(this.va=ie(g,k))}}this.Wa(s)}else null===this.ph&&(this.Wa(new Ni(-.5,.5)),this.Ra=ne(null));this.ma.ba=!0}}},{key:"Ka",value:function(){var t=this;return this.th()?Xi:this.Na()?qi:this.da()?function(i){return $i(i,t.Ra)}:null}},{key:"Sh",value:function(t,i){return void 0===this.Aa.priceFormatter?(void 0===i&&(i=this.Bl()),i.format(t)):this.Aa.priceFormatter(t)}}]),t}(),ce=function(){function t(i,e){(0,c.Z)(this,t),this.ya=[],this.po=new Map,this.fa=0,this.vo=0,this.mo=1e3,this.ka=null,this.bo=new D,this.wo=i,this.Hi=e,this.Mo=new ji(this);var n=e.F();this.So=this.xo("left",n.leftPriceScale),this.yo=this.xo("right",n.rightPriceScale),this.So.$a().l(this.ko.bind(this,this.So),this),this.yo.$a().l(this.ko.bind(this,this.yo),this),this.Co(n)}return(0,f.Z)(t,[{key:"Co",value:function(t){if(t.leftPriceScale&&this.So.kh(t.leftPriceScale),t.rightPriceScale&&this.yo.kh(t.rightPriceScale),t.localization&&(this.So.Vl(),this.yo.Vl()),t.overlayPriceScales)for(var i=0,e=Array.from(this.po.values());i<e.length;i++){var n=x(e[i][0].Bt());n.kh(t.overlayPriceScales),t.localization&&n.Vl()}}},{key:"To",value:function(t){switch(t){case"left":return this.So;case"right":return this.yo}return this.po.has(t)?C(this.po.get(t))[0].Bt():null}},{key:"M",value:function(){this.Ut().Po().v(this),this.So.$a().v(this),this.yo.$a().v(this),this.ya.forEach((function(t){t.M&&t.M()})),this.bo.m()}},{key:"Ro",value:function(){return this.mo}},{key:"Do",value:function(t){this.mo=t}},{key:"Ut",value:function(){return this.Hi}},{key:"$i",value:function(){return this.vo}},{key:"It",value:function(){return this.fa}},{key:"Bo",value:function(t){this.vo=t,this.Ao()}},{key:"Ha",value:function(t){var i=this;this.fa=t,this.So.Ha(t),this.yo.Ha(t),this.ya.forEach((function(e){if(i.Ge(e)){var n=e.Bt();null!==n&&n.Ha(t)}})),this.Ao()}},{key:"jl",value:function(){return this.ya}},{key:"Ge",value:function(t){var i=t.Bt();return null===i||this.So!==i&&this.yo!==i}},{key:"Qa",value:function(t,i,e){var n=void 0!==e?e:this.Lo().Oo+1;this.Io(t,i,n)}},{key:"no",value:function(t){var i=this.ya.indexOf(t);z(-1!==i,"removeDataSource: invalid data source"),this.ya.splice(i,1);var e=x(t.Bt()).zl();if(this.po.has(e)){var n=C(this.po.get(e)),s=n.indexOf(t);-1!==s&&(n.splice(s,1),0===n.length&&this.po.delete(e))}var h=t.Bt();h&&h.jl().indexOf(t)>=0&&h.no(t),null!==h&&(h.io(),this.Eo(h)),this.ka=null}},{key:"Qe",value:function(t){return t===this.So?"left":t===this.yo?"right":"overlay"}},{key:"zo",value:function(){return this.So}},{key:"Vo",value:function(){return this.yo}},{key:"No",value:function(t,i){t.ro(i)}},{key:"Fo",value:function(t,i){t.ho(i),this.Ao()}},{key:"Wo",value:function(t){t.lo()}},{key:"jo",value:function(t,i){t.ao(i)}},{key:"$o",value:function(t,i){t.oo(i),this.Ao()}},{key:"Ho",value:function(t){t._o()}},{key:"Ao",value:function(){this.ya.forEach((function(t){t.Dn()}))}},{key:"fn",value:function(){var t=null;return this.Hi.F().rightPriceScale.visible&&0!==this.yo.jl().length?t=this.yo:this.Hi.F().leftPriceScale.visible&&0!==this.So.jl().length?t=this.So:0!==this.ya.length&&(t=this.ya[0].Bt()),null===t&&(t=this.yo),t}},{key:"Je",value:function(){var t=null;return this.Hi.F().rightPriceScale.visible?t=this.yo:this.Hi.F().leftPriceScale.visible&&(t=this.So),t}},{key:"Eo",value:function(t){null!==t&&t.Va()&&this.Uo(t)}},{key:"qo",value:function(t){var i=this.wo.Vs();t.Ea({Fn:!0}),null!==i&&t.do(i),this.Ao()}},{key:"Yo",value:function(){this.Uo(this.So),this.Uo(this.yo)}},{key:"Xo",value:function(){var t=this;this.Eo(this.So),this.Eo(this.yo),this.ya.forEach((function(i){t.Ge(i)&&t.Eo(i.Bt())})),this.Ao(),this.Hi.Ch()}},{key:"Ja",value:function(){return null===this.ka&&(this.ka=ae(this.ya)),this.ka}},{key:"Zo",value:function(){return this.bo}},{key:"Ko",value:function(){return this.Mo}},{key:"Uo",value:function(t){var i=t.co();if(i&&i.length>0&&!this.wo.Ni()){var e=this.wo.Vs();null!==e&&t.do(e)}t.Dn()}},{key:"Lo",value:function(){var t=this.Ja();if(0===t.length)return{Go:0,Oo:0};for(var i=0,e=0,n=0;n<t.length;n++){var s=t[n].Zi();null!==s&&(s<i&&(i=s),s>e&&(e=s))}return{Go:i,Oo:e}}},{key:"Io",value:function(t,i,e){var n=this.To(i);if(null===n&&(n=this.xo(i,this.Hi.F().overlayPriceScales)),this.ya.push(t),!bt(i)){var s=this.po.get(i)||[];s.push(t),this.po.set(i,s)}n.Qa(t),t.Gi(n),t.Ki(e),this.Eo(n),this.ka=null}},{key:"ko",value:function(t,i,e){i.lr!==e.lr&&this.Uo(t)}},{key:"xo",value:function(t,i){var e=Object.assign({visible:!0,autoScale:!0},H(i)),n=new oe(t,e,this.Hi.F().layout,this.Hi.F().localization);return n.Ha(this.It()),n}}]),t}(),fe=function(t){return t.getUTCFullYear()},ve=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";(0,c.Z)(this,t),this.Jo=i,this.Qo=e}return(0,f.Z)(t,[{key:"t_",value:function(t){return function(t,i,e){return i.replace(/yyyy/g,function(t){return _t(fe(t),4)}(t)).replace(/yy/g,function(t){return _t(fe(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,e)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,e)).replace(/MM/g,function(t){return _t(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return _t(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.Jo,this.Qo)}}]),t}(),de=function(){function t(i){(0,c.Z)(this,t),this.i_=i||"%h:%m:%s"}return(0,f.Z)(t,[{key:"t_",value:function(t){return this.i_.replace("%h",_t(t.getUTCHours(),2)).replace("%m",_t(t.getUTCMinutes(),2)).replace("%s",_t(t.getUTCSeconds(),2))}}]),t}(),ye={n_:"yyyy-MM-dd",s_:"%h:%m:%s",e_:" ",r_:"default"},pe=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)(this,t);var e=Object.assign(Object.assign({},ye),i);this.h_=new ve(e.n_,e.r_),this.l_=new de(e.s_),this.a_=e.e_}return(0,f.Z)(t,[{key:"t_",value:function(t){return"".concat(this.h_.t_(t)).concat(this.a_).concat(this.l_.t_(t))}}]),t}(),me=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;(0,c.Z)(this,t),this.Le=0,this.Ie=1,this.Ee=1,this.Ve=new Map,this.ze=new Map,this.o_=i,this.Ne=e}return(0,f.Z)(t,[{key:"t_",value:function(t){var i=t._t,e=void 0===i.__?new Date(1e3*i.u_).getTime():new Date(Date.UTC(i.__.year,i.__.month-1,i.__.day)).getTime(),n=this.Ve.get(e);if(void 0!==n)return n.c_;if(this.Le===this.Ne){var s=this.ze.get(this.Ee);this.ze.delete(this.Ee),this.Ve.delete(C(s)),this.Ee++,this.Le--}var h=this.o_(t);return this.Ve.set(e,{c_:h,$e:this.Ie}),this.ze.set(this.Ie,e),this.Le++,this.Ie++,h}}]),t}(),ke=function(){function t(i,e){(0,c.Z)(this,t),z(i<=e,"right should be >= left"),this.d_=i,this.f_=e}return(0,f.Z)(t,[{key:"Ms",value:function(){return this.d_}},{key:"ci",value:function(){return this.f_}},{key:"p_",value:function(){return this.f_-this.d_+1}},{key:"Ir",value:function(t){return this.d_<=t&&t<=this.f_}},{key:"rh",value:function(t){return this.d_===t.Ms()&&this.f_===t.ci()}}]),t}();function ge(t,i){return null===t||null===i?t===i:t.rh(i)}var be,we,_e,Me,Se,ze=function(){function t(){(0,c.Z)(this,t),this.v_=new Map,this.Ve=null}return(0,f.Z)(t,[{key:"m_",value:function(t,i){this.b_(i),this.Ve=null;for(var e=i;e<t.length;++e){var n=t[e],s=this.v_.get(n.g_);void 0===s&&(s=[],this.v_.set(n.g_,s)),s.push({Ys:e,_t:n._t,w_:n.g_,M_:n.M_})}}},{key:"S_",value:function(t,i){var e=Math.ceil(i/t);return null!==this.Ve&&this.Ve.x_===e||(this.Ve={Jl:this.y_(e),x_:e}),this.Ve.Jl}},{key:"b_",value:function(t){if(0!==t){var i=[];this.v_.forEach((function(e,n){t<=e[0].Ys?i.push(n):e.splice(At(e,t,(function(i){return i.Ys<t})),1/0)}));for(var e=0,n=i;e<n.length;e++){var s=n[e];this.v_.delete(s)}}else this.v_.clear()}},{key:"y_",value:function(t){var i,e=[],n=(0,r.Z)(Array.from(this.v_.keys()).sort((function(t,i){return i-t})));try{for(n.s();!(i=n.n()).done;){var s=i.value;if(this.v_.get(s)){var h=e;e=[];for(var a=h.length,u=0,l=C(this.v_.get(s)),o=l.length,c=1/0,f=-1/0,v=0;v<o;v++){for(var d=l[v],y=d.Ys;u<a;){var p=h[u],m=p.Ys;if(!(m<y)){c=m;break}u++,e.push(p),f=m,c=1/0}c-y>=t&&y-f>=t&&(e.push(d),f=y)}for(;u<a;u++)e.push(h[u])}}}catch(k){n.e(k)}finally{n.f()}return e}}]),t}(),Ce=function(){function t(i){(0,c.Z)(this,t),this.k_=i}return(0,f.Z)(t,[{key:"C_",value:function(){return null===this.k_?null:new ke(Math.floor(this.k_.Ms()),Math.ceil(this.k_.ci()))}},{key:"T_",value:function(){return this.k_}}],[{key:"P_",value:function(){return new t(null)}}]),t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(be||(be={}));var xe=function(){function t(i,e,n){(0,c.Z)(this,t),this.vo=0,this.R_=null,this.D_=[],this.Pa=null,this.Ta=null,this.B_=new ze,this.A_=new Map,this.O_=Ce.P_(),this.L_=!0,this.I_=new D,this.E_=new D,this.z_=new D,this.V_=null,this.N_=null,this.F_=[],this.un=e,this.Aa=n,this.W_=e.rightOffset,this.j_=e.barSpacing,this.Hi=i,this.H_()}return(0,f.Z)(t,[{key:"F",value:function(){return this.un}},{key:"U_",value:function(t){V(this.Aa,t),this.q_(),this.H_()}},{key:"kh",value:function(t,i){var e;V(this.un,t),this.un.fixLeftEdge&&this.Y_(),this.un.fixRightEdge&&this.X_(),void 0!==t.barSpacing&&this.Hi.Kn(t.barSpacing),void 0!==t.rightOffset&&this.Hi.Gn(t.rightOffset),void 0!==t.minBarSpacing&&this.Hi.Kn(null!==(e=t.barSpacing)&&void 0!==e?e:this.j_),this.q_(),this.H_(),this.z_.m()}},{key:"vn",value:function(t){var i,e;return null!==(e=null===(i=this.D_[t])||void 0===i?void 0:i._t)&&void 0!==e?e:null}},{key:"Ui",value:function(t){var i;return null!==(i=this.D_[t])&&void 0!==i?i:null}},{key:"Fl",value:function(t,i){if(this.D_.length<1)return null;if(t.u_>this.D_[this.D_.length-1]._t.u_)return i?this.D_.length-1:null;var e=At(this.D_,t.u_,(function(t,i){return t._t.u_<i}));return t.u_<this.D_[e]._t.u_?i?e:null:e}},{key:"Ni",value:function(){return 0===this.vo||0===this.D_.length||null===this.R_}},{key:"Nl",value:function(){return this.D_.length>0}},{key:"Vs",value:function(){return this.Z_(),this.O_.C_()}},{key:"K_",value:function(){return this.Z_(),this.O_.T_()}},{key:"G_",value:function(){var t=this.Vs();if(null===t)return null;var i={from:t.Ms(),to:t.ci()};return this.J_(i)}},{key:"J_",value:function(t){var i=Math.round(t.from),e=Math.round(t.to),n=x(this.Q_()),s=x(this.tu());return{from:x(this.vn(Math.max(n,i))),to:x(this.vn(Math.min(s,e)))}}},{key:"iu",value:function(t){return{from:x(this.Fl(t.from,!0)),to:x(this.Fl(t.to,!0))}}},{key:"$i",value:function(){return this.vo}},{key:"Bo",value:function(t){if(isFinite(t)&&!(t<=0)&&this.vo!==t){var i=this.K_(),e=this.vo;if(this.vo=t,this.L_=!0,this.un.lockVisibleTimeRangeOnResize&&0!==e){var n=this.j_*t/e;this.j_=n}if(this.un.fixLeftEdge&&null!==i&&i.Ms()<=0){var s=e-t;this.W_-=Math.round(s/this.j_)+1,this.L_=!0}this.nu(),this.su()}}},{key:"Et",value:function(t){if(this.Ni()||!U(t))return 0;var i=this.eu()+this.W_-t;return this.vo-(i+.5)*this.j_-1}},{key:"js",value:function(t,i){for(var e=this.eu(),n=void 0===i?0:i.from,s=void 0===i?t.length:i.to,h=n;h<s;h++){var r=t[h]._t,a=e+this.W_-r,u=this.vo-(a+.5)*this.j_-1;t[h].st=u}}},{key:"ru",value:function(t){return Math.ceil(this.hu(t))}},{key:"Gn",value:function(t){this.L_=!0,this.W_=t,this.su(),this.Hi.lu(),this.Hi.Ch()}},{key:"Ks",value:function(){return this.j_}},{key:"Kn",value:function(t){this.au(t),this.su(),this.Hi.lu(),this.Hi.Ch()}},{key:"ou",value:function(){return this.W_}},{key:"Jl",value:function(){if(this.Ni())return null;if(null!==this.N_)return this.N_;var t,i=this.j_,e=5*(this.Hi.F().layout.fontSize+4),n=Math.round(e/i),s=x(this.Vs()),h=Math.max(s.Ms(),s.Ms()-n),a=Math.max(s.ci(),s.ci()-n),u=this.B_.S_(i,e),l=this.Q_()+n,o=this.tu()-n,c=this._u(),f=this.un.fixLeftEdge||c,v=this.un.fixRightEdge||c,d=0,y=(0,r.Z)(u);try{for(y.s();!(t=y.n()).done;){var p=t.value;if(h<=p.Ys&&p.Ys<=a){var m=void 0;d<this.F_.length?((m=this.F_[d]).Yl=this.Et(p.Ys),m.ua=this.uu(p),m.w_=p.w_):(m={cu:!1,Yl:this.Et(p.Ys),ua:this.uu(p),w_:p.w_},this.F_.push(m)),this.j_>e/2&&!c?m.cu=!1:m.cu=f&&p.Ys<=l||v&&p.Ys>=o,d++}}}catch(k){y.e(k)}finally{y.f()}return this.F_.length=d,this.N_=this.F_,this.F_}},{key:"du",value:function(){this.L_=!0,this.Kn(this.un.barSpacing),this.Gn(this.un.rightOffset)}},{key:"fu",value:function(t){this.L_=!0,this.R_=t,this.su(),this.Y_()}},{key:"pu",value:function(t,i){var e=this.hu(t),n=this.Ks(),s=n+i*(n/10);this.Kn(s),this.un.rightBarStaysOnScroll||this.Gn(this.ou()+(e-this.hu(t)))}},{key:"ro",value:function(t){this.Pa&&this._o(),null===this.Ta&&null===this.V_&&(this.Ni()||(this.Ta=t,this.vu()))}},{key:"ho",value:function(t){if(null!==this.V_){var i=Kt(this.vo-t,0,this.vo),e=Kt(this.vo-x(this.Ta),0,this.vo);0!==i&&0!==e&&this.Kn(this.V_.Ks*i/e)}}},{key:"lo",value:function(){null!==this.Ta&&(this.Ta=null,this.mu())}},{key:"ao",value:function(t){null===this.Pa&&null===this.V_&&(this.Ni()||(this.Pa=t,this.vu()))}},{key:"oo",value:function(t){if(null!==this.Pa){var i=(this.Pa-t)/this.Ks();this.W_=x(this.V_).ou+i,this.L_=!0,this.su()}}},{key:"_o",value:function(){null!==this.Pa&&(this.Pa=null,this.mu())}},{key:"bu",value:function(){this.gu(this.un.rightOffset)}},{key:"gu",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.W_,n=performance.now();this.Hi.Yn({wu:function(t){return(t-n)/i>=1},Mu:function(s){var h=(s-n)/i;return h>=1?t:e+(t-e)*h}})}},{key:"gt",value:function(t,i){this.L_=!0,this.D_=t,this.B_.m_(t,i),this.su()}},{key:"Su",value:function(){return this.I_}},{key:"xu",value:function(){return this.E_}},{key:"yu",value:function(){return this.z_}},{key:"eu",value:function(){return this.R_||0}},{key:"ku",value:function(t){var i=t.p_();this.au(this.vo/i),this.W_=t.ci()-this.eu(),this.su(),this.L_=!0,this.Hi.lu(),this.Hi.Ch()}},{key:"Cu",value:function(){var t=this.Q_(),i=this.tu();null!==t&&null!==i&&this.ku(new ke(t,i+this.un.rightOffset))}},{key:"Tu",value:function(t){var i=new ke(t.from,t.to);this.ku(i)}},{key:"qi",value:function(t){return void 0!==this.Aa.timeFormatter?this.Aa.timeFormatter(t.M_):this.Pu.t_(new Date(1e3*t._t.u_))}},{key:"_u",value:function(){var t=this.Hi.F(),i=t.handleScroll,e=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}},{key:"Q_",value:function(){return 0===this.D_.length?null:0}},{key:"tu",value:function(){return 0===this.D_.length?null:this.D_.length-1}},{key:"Ru",value:function(t){return(this.vo-1-t)/this.j_}},{key:"hu",value:function(t){var i=this.Ru(t),e=this.eu()+this.W_-i;return Math.round(1e6*e)/1e6}},{key:"au",value:function(t){var i=this.j_;this.j_=t,this.nu(),i!==this.j_&&(this.L_=!0,this.Du())}},{key:"Z_",value:function(){if(this.L_)if(this.L_=!1,this.Ni())this.Bu(Ce.P_());else{var t=this.eu(),i=this.vo/this.j_,e=this.W_+t,n=new ke(e-i+1,e);this.Bu(new Ce(n))}}},{key:"nu",value:function(){var t=this.Au();if(this.j_<t&&(this.j_=t,this.L_=!0),0!==this.vo){var i=.5*this.vo;this.j_>i&&(this.j_=i,this.L_=!0)}}},{key:"Au",value:function(){return this.un.fixLeftEdge&&this.un.fixRightEdge&&0!==this.D_.length?this.vo/this.D_.length:this.un.minBarSpacing}},{key:"su",value:function(){var t=this.Ou();this.W_>t&&(this.W_=t,this.L_=!0);var i=this.Lu();null!==i&&this.W_<i&&(this.W_=i,this.L_=!0)}},{key:"Lu",value:function(){var t=this.Q_(),i=this.R_;return null===t||null===i?null:t-i-1+(this.un.fixLeftEdge?this.vo/this.j_:Math.min(2,this.D_.length))}},{key:"Ou",value:function(){return this.un.fixRightEdge?0:this.vo/this.j_-Math.min(2,this.D_.length)}},{key:"vu",value:function(){this.V_={Ks:this.Ks(),ou:this.ou()}}},{key:"mu",value:function(){this.V_=null}},{key:"uu",value:function(t){var i=this,e=this.A_.get(t.w_);return void 0===e&&(e=new me((function(t){return i.Iu(t)})),this.A_.set(t.w_,e)),e.t_(t)}},{key:"Iu",value:function(t){var i=function(t,i,e){switch(t){case 0:case 10:return i?e?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.w_,this.un.timeVisible,this.un.secondsVisible);if(void 0!==this.un.tickMarkFormatter){var e=this.un.tickMarkFormatter(t.M_,i,this.Aa.locale);if(null!==e)return e}return function(t,i,e){var n={};switch(i){case 0:n.year="numeric";break;case 1:n.month="short";break;case 2:n.day="numeric";break;case 3:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case 4:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit"}var s=void 0===t.__?new Date(1e3*t.u_):new Date(Date.UTC(t.__.year,t.__.month-1,t.__.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(e,n)}(t._t,i,this.Aa.locale)}},{key:"Bu",value:function(t){var i=this.O_;this.O_=t,ge(i.C_(),this.O_.C_())||this.I_.m(),ge(i.T_(),this.O_.T_())||this.E_.m(),this.Du()}},{key:"Du",value:function(){this.N_=null}},{key:"q_",value:function(){this.Du(),this.A_.clear()}},{key:"H_",value:function(){var t=this.Aa.dateFormat;this.un.timeVisible?this.Pu=new pe({n_:t,s_:this.un.secondsVisible?"%h:%m:%s":"%h:%m",e_:"   ",r_:this.Aa.locale}):this.Pu=new ve(t,this.Aa.locale)}},{key:"Y_",value:function(){if(this.un.fixLeftEdge){var t=this.Q_();if(null!==t){var i=this.Vs();if(null!==i){var e=i.Ms()-t;if(e<0){var n=this.W_-e-1;this.Gn(n)}this.nu()}}}}},{key:"X_",value:function(){this.su(),this.nu()}}]),t}(),Te=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).Eu=new Map,n.zt=t,n}return(0,f.Z)(e,[{key:"Z",value:function(t){}},{key:"G",value:function(t){if(this.zt.Ct){var i,e=t.context,n=t.mediaSize,s=0,h=(0,r.Z)(this.zt.zu);try{for(h.s();!(i=h.n()).done;){var a=i.value;if(0!==a.Gt.length){e.font=a.P;var u=this.Vu(e,a.Gt);u>n.width?a.pu=n.width/u:a.pu=1,s+=a.Nu*a.pu}}}catch(d){h.e(d)}finally{h.f()}var l=0;switch(this.zt.Fu){case"top":l=0;break;case"center":l=Math.max((n.height-s)/2,0);break;case"bottom":l=Math.max(n.height-s,0)}e.fillStyle=this.zt.D;var o,c=(0,r.Z)(this.zt.zu);try{for(c.s();!(o=c.n()).done;){var f=o.value;e.save();var v=0;switch(this.zt.Wu){case"left":e.textAlign="left",v=f.Nu/2;break;case"center":e.textAlign="center",v=n.width/2;break;case"right":e.textAlign="right",v=n.width-1-f.Nu/2}e.translate(v,l),e.textBaseline="top",e.font=f.P,e.scale(f.pu,f.pu),e.fillText(f.Gt,0,f.ju),e.restore(),l+=f.Nu*f.pu}}catch(d){c.e(d)}finally{c.f()}}}},{key:"Vu",value:function(t,i){var e=this.$u(t.font),n=e.get(i);return void 0===n&&(n=t.measureText(i).width,e.set(i,n)),n}},{key:"$u",value:function(t){var i=this.Eu.get(t);return void 0===i&&(i=new Map,this.Eu.set(t,i)),i}}]),e}(q),Ze=function(){function t(i){(0,c.Z)(this,t),this.vt=!0,this.Wt={Ct:!1,D:"",zu:[],Fu:"center",Wu:"center"},this.jt=new Te(this.Wt),this.$t=i}return(0,f.Z)(t,[{key:"gt",value:function(){this.vt=!0}},{key:"Mt",value:function(){return this.vt&&(this.St(),this.vt=!1),this.jt}},{key:"St",value:function(){var t=this.$t.F(),i=this.Wt;i.Ct=t.visible,i.Ct&&(i.D=t.color,i.Wu=t.horzAlign,i.Fu=t.vertAlign,i.zu=[{Gt:t.text,P:K(t.fontSize,t.fontFamily,t.fontStyle),Nu:1.2*t.fontSize,ju:0,pu:0}])}}]),t}(),Ee=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this)).un=n,s.bn=new Ze((0,a.Z)(s)),s}return(0,f.Z)(e,[{key:"Pn",value:function(){return[]}},{key:"Tn",value:function(){return[this.bn]}},{key:"F",value:function(){return this.un}},{key:"Dn",value:function(){this.bn.gt()}}]),e}(kt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(we||(we={}));var Le=function(){function t(i,e){(0,c.Z)(this,t),this.Hu=[],this.Uu=[],this.vo=0,this.qu=null,this.Yu=new D,this.Xu=new D,this.Zu=null,this.Ku=i,this.un=e,this.Gu=new X(this),this.wo=new xe(this,e.timeScale,this.un.localization),this.bt=new gt(this,e.crosshair),this.Ju=new Hi(e.crosshair),this.Qu=new Ee(this,e.watermark),this.tc(),this.Hu[0].Do(2e3),this.ic=this.nc(0),this.sc=this.nc(1)}return(0,f.Z)(t,[{key:"dl",value:function(){this.ec(wt.ss())}},{key:"Ch",value:function(){this.ec(wt.ns())}},{key:"Cl",value:function(){this.ec(new wt(1))}},{key:"fl",value:function(t){var i=this.rc(t);this.ec(i)}},{key:"hc",value:function(){return this.qu}},{key:"lc",value:function(t){var i=this.qu;this.qu=t,null!==i&&this.fl(i.ac),null!==t&&this.fl(t.ac)}},{key:"F",value:function(){return this.un}},{key:"kh",value:function(t){V(this.un,t),this.Hu.forEach((function(i){return i.Co(t)})),void 0!==t.timeScale&&this.wo.kh(t.timeScale),void 0!==t.localization&&this.wo.U_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Yu.m(),this.ic=this.nc(0),this.sc=this.nc(1),this.dl()}},{key:"oc",value:function(t,i){if("left"!==t)if("right"!==t){var e=this._c(t);null!==e&&(e.Bt.kh(i),this.Yu.m())}else this.kh({rightPriceScale:i});else this.kh({leftPriceScale:i})}},{key:"_c",value:function(t){var i,e=(0,r.Z)(this.Hu);try{for(e.s();!(i=e.n()).done;){var n=i.value,s=n.To(t);if(null!==s)return{Ht:n,Bt:s}}}catch(h){e.e(h)}finally{e.f()}return null}},{key:"yt",value:function(){return this.wo}},{key:"uc",value:function(){return this.Hu}},{key:"cc",value:function(){return this.Qu}},{key:"dc",value:function(){return this.bt}},{key:"fc",value:function(){return this.Xu}},{key:"vc",value:function(t,i){t.Ha(i),this.lu()}},{key:"Bo",value:function(t){this.vo=t,this.wo.Bo(this.vo),this.Hu.forEach((function(i){return i.Bo(t)})),this.lu()}},{key:"tc",value:function(t){var i=new ce(this.wo,this);void 0!==t?this.Hu.splice(t,0,i):this.Hu.push(i);var e=void 0===t?this.Hu.length-1:t,n=wt.ss();return n.Vn(e,{Nn:0,Fn:!0}),this.ec(n),i}},{key:"No",value:function(t,i,e){t.No(i,e)}},{key:"Fo",value:function(t,i,e){t.Fo(i,e),this.pl(),this.ec(this.mc(t,2))}},{key:"Wo",value:function(t,i){t.Wo(i),this.ec(this.mc(t,2))}},{key:"jo",value:function(t,i,e){i.Va()||t.jo(i,e)}},{key:"$o",value:function(t,i,e){i.Va()||(t.$o(i,e),this.pl(),this.ec(this.mc(t,2)))}},{key:"Ho",value:function(t,i){i.Va()||(t.Ho(i),this.ec(this.mc(t,2)))}},{key:"qo",value:function(t,i){t.qo(i),this.ec(this.mc(t,2))}},{key:"bc",value:function(t){this.wo.ro(t)}},{key:"gc",value:function(t,i){var e=this.yt();if(!e.Ni()&&0!==i){var n=e.$i();t=Math.max(1,Math.min(t,n)),e.pu(t,i),this.lu()}}},{key:"wc",value:function(t){this.Mc(0),this.Sc(t),this.xc()}},{key:"yc",value:function(t){this.wo.ho(t),this.lu()}},{key:"kc",value:function(){this.wo.lo(),this.Ch()}},{key:"Mc",value:function(t){this.wo.ao(t)}},{key:"Sc",value:function(t){this.wo.oo(t),this.lu()}},{key:"xc",value:function(){this.wo._o(),this.Ch()}},{key:"wt",value:function(){return this.Uu}},{key:"Cc",value:function(t,i,e,n){this.bt.gn(t,i);var s=NaN,h=this.wo.ru(t),r=this.wo.Vs();null!==r&&(h=Math.min(Math.max(r.Ms(),h),r.ci()));var a=n.fn(),u=a.Tt();null!==u&&(s=a.pn(i,u)),s=this.Ju.Wl(s,h,n),this.bt.xn(h,s,n),this.Cl(),this.Xu.m(this.bt.xt(),{x:t,y:i},e)}},{key:"Tc",value:function(){this.dc().kn(),this.Cl(),this.Xu.m(null,null,null)}},{key:"pl",value:function(){var t=this.bt.Ht();if(null!==t){var i=this.bt.Mn(),e=this.bt.Sn();this.Cc(i,e,null,t)}this.bt.Dn()}},{key:"Pc",value:function(t,i,e){var n=this.wo.vn(0);void 0!==i&&void 0!==e&&this.wo.gt(i,e);var s=this.wo.vn(0),h=this.wo.eu(),r=this.wo.Vs();if(null!==r&&null!==n&&null!==s){var a=r.Ir(h),u=n.u_>s.u_,l=null!==t&&t>h&&!u,o=a&&this.wo.F().shiftVisibleRangeOnNewBar;if(l&&!o){var c=t-h;this.wo.Gn(this.wo.ou()-c)}}this.wo.fu(t)}},{key:"bl",value:function(t){null!==t&&t.Xo()}},{key:"Ke",value:function(t){var i=this.Hu.find((function(i){return i.Ja().includes(t)}));return void 0===i?null:i}},{key:"lu",value:function(){this.Qu.Dn(),this.Hu.forEach((function(t){return t.Xo()})),this.pl()}},{key:"M",value:function(){this.Hu.forEach((function(t){return t.M()})),this.Hu.length=0,this.un.localization.priceFormatter=void 0,this.un.localization.timeFormatter=void 0}},{key:"Rc",value:function(){return this.Gu}},{key:"tr",value:function(){return this.Gu.F()}},{key:"Po",value:function(){return this.Yu}},{key:"Dc",value:function(t,i){var e=this.Hu[0],n=this.Bc(i,t,e);return this.Uu.push(n),1===this.Uu.length?this.dl():this.Ch(),n}},{key:"Ac",value:function(t){var i=this.Ke(t),e=this.Uu.indexOf(t);z(-1!==e,"Series not found"),this.Uu.splice(e,1),x(i).no(t),t.M&&t.M()}},{key:"cl",value:function(t,i){var e=x(this.Ke(t));e.no(t);var n=this._c(i);if(null===n){var s=t.Zi();e.Qa(t,i,s)}else{var h=n.Ht===e?t.Zi():void 0;n.Ht.Qa(t,i,h)}}},{key:"Cu",value:function(){var t=wt.ns();t.$n(),this.ec(t)}},{key:"Oc",value:function(t){var i=wt.ns();i.qn(t),this.ec(i)}},{key:"Zn",value:function(){var t=wt.ns();t.Zn(),this.ec(t)}},{key:"Kn",value:function(t){var i=wt.ns();i.Kn(t),this.ec(i)}},{key:"Gn",value:function(t){var i=wt.ns();i.Gn(t),this.ec(i)}},{key:"Yn",value:function(t){var i=wt.ns();i.Yn(t),this.ec(i)}},{key:"Hn",value:function(){var t=wt.ns();t.Hn(),this.ec(t)}},{key:"Lc",value:function(){return this.un.rightPriceScale.visible?"right":"left"}},{key:"Ic",value:function(){return this.sc}},{key:"U",value:function(){return this.ic}},{key:"Lt",value:function(t){var i=this.sc,e=this.ic;if(i===e)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Zu||this.Zu.bs!==e||this.Zu.gs!==i)this.Zu={bs:e,gs:i,Ec:new Map};else{var s=this.Zu.Ec.get(t);if(void 0!==s)return s}var h=function(t,i,e){var s=R(t),h=(0,n.Z)(s,4),r=h[0],a=h[1],u=h[2],l=h[3],o=R(i),c=(0,n.Z)(o,4),f=c[0],v=c[1],d=c[2],y=c[3],p=[E(r+e*(f-r)),E(a+e*(v-a)),E(u+e*(d-u)),L(l+e*(y-l))];return"rgba(".concat(p[0],", ").concat(p[1],", ").concat(p[2],", ").concat(p[3],")")}(e,i,t/100);return this.Zu.Ec.set(t,h),h}},{key:"mc",value:function(t,i){var e=new wt(i);if(null!==t){var n=this.Hu.indexOf(t);e.Vn(n,{Nn:i})}return e}},{key:"rc",value:function(t,i){return void 0===i&&(i=2),this.mc(this.Ke(t),i)}},{key:"ec",value:function(t){this.Ku&&this.Ku(t),this.Hu.forEach((function(t){return t.Ko().Th().gt()}))}},{key:"Bc",value:function(t,i,e){var n=new Wi(this,t,i),s=void 0!==t.priceScaleId?t.priceScaleId:this.Lc();return e.Qa(n,s),bt(s)||n.kh(t),n}},{key:"nc",value:function(t){var i=this.un.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color}}]),t}();function Ne(t){return!O(t)&&!I(t)}function Fe(t){return O(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(_e||(_e={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Me||(Me={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Se||(Se={}));var Be="undefined"!=typeof window;function Pe(){return!!Be&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Re(){return!!Be&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ae(t){return t+t%2}function De(t,i){return t.zc-i.zc}function Ve(t,i,e){var n=(t.zc-i.zc)/(t._t-i._t);return Math.sign(n)*Math.min(Math.abs(n),e)}var Oe=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.Vc=null,this.Nc=null,this.Fc=null,this.Wc=null,this.jc=null,this.$c=0,this.Hc=0,this.Uc=i,this.qc=e,this.Yc=n,this.es=s}return(0,f.Z)(t,[{key:"Xc",value:function(t,i){if(null!==this.Vc){if(this.Vc._t===i)return void(this.Vc.zc=t);if(Math.abs(this.Vc.zc-t)<this.es)return}this.Wc=this.Fc,this.Fc=this.Nc,this.Nc=this.Vc,this.Vc={_t:i,zc:t}}},{key:"pr",value:function(t,i){if(null!==this.Vc&&null!==this.Nc&&!(i-this.Vc._t>50)){var e=0,n=Ve(this.Vc,this.Nc,this.qc),s=De(this.Vc,this.Nc),h=[n],r=[s];if(e+=s,null!==this.Fc){var a=Ve(this.Nc,this.Fc,this.qc);if(Math.sign(a)===Math.sign(n)){var u=De(this.Nc,this.Fc);if(h.push(a),r.push(u),e+=u,null!==this.Wc){var l=Ve(this.Fc,this.Wc,this.qc);if(Math.sign(l)===Math.sign(n)){var o=De(this.Fc,this.Wc);h.push(l),r.push(o),e+=o}}}}for(var c=0,f=0;f<h.length;++f)c+=r[f]/e*h[f];Math.abs(c)<this.Uc||(this.jc={zc:t,_t:i},this.Hc=c,this.$c=function(t,i){var e=Math.log(i);return Math.log(1*e/-t)/e}(Math.abs(c),this.Yc))}}},{key:"Mu",value:function(t){var i=x(this.jc),e=t-i._t;return i.zc+this.Hc*(Math.pow(this.Yc,e)-1)/Math.log(this.Yc)}},{key:"wu",value:function(t){return null===this.jc||this.Zc(t)===this.$c}},{key:"Zc",value:function(t){var i=t-x(this.jc)._t;return Math.min(i,this.$c)}}]),t}();function Ue(t,i){var e=x(t.ownerDocument).createElement("canvas");t.appendChild(e);var n=function(t,i){if("device-pixel-content-box"===i.type)return new p(t,i.transform,i.options);throw new Error("Unsupported binding target")}(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:function(t,i){return{width:Math.max(t.width,i.width),height:Math.max(t.height,i.height)}}});return n.resizeCanvasElement(i),n}var Ie=function(){function t(i,e,n){var s=this;(0,c.Z)(this,t),this.Kc=0,this.Gc=null,this.Jc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Qc=0,this.td=null,this.nd={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.sd=null,this.ed=!1,this.rd=null,this.hd=null,this.ld=!1,this.ad=!1,this.od=!1,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=null,this.bd=0,this.gd=!1,this.wd=!1,this.Md=!1,this.Sd=0,this.xd=null,this.yd=!Re(),this.kd=function(t){s.Cd(t)},this.Td=function(t){if(s.Pd(t)){var i=s.Rd(t);if(++s.Qc,s.td&&s.Qc>1)s.Bd(Ye(t),s.nd).Dd<30&&!s.od&&s.Ad(i,s.Ld.Od),s.Id()}else{var e=s.Rd(t);if(++s.Kc,s.Gc&&s.Kc>1)s.Bd(Ye(t),s.Jc).Dd<5&&!s.ad&&s.Ed(e,s.Ld.zd),s.Vd()}},this.Nd=i,this.Ld=e,this.un=n,this.Fd()}return(0,f.Z)(t,[{key:"M",value:function(){null!==this._d&&(this._d(),this._d=null),null!==this.ud&&(this.ud(),this.ud=null),null!==this.fd&&(this.fd(),this.fd=null),null!==this.pd&&(this.pd(),this.pd=null),null!==this.vd&&(this.vd(),this.vd=null),null!==this.dd&&(this.dd(),this.dd=null),this.Wd(),this.Vd()}},{key:"jd",value:function(t){var i=this;this.fd&&this.fd();var e=this.$d.bind(this);if(this.fd=function(){i.Nd.removeEventListener("mousemove",e)},this.Nd.addEventListener("mousemove",e),!this.Pd(t)){var n=this.Rd(t);this.Ed(n,this.Ld.Hd),this.yd=!0}}},{key:"Vd",value:function(){null!==this.Gc&&clearTimeout(this.Gc),this.Kc=0,this.Gc=null,this.Jc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}},{key:"Id",value:function(){null!==this.td&&clearTimeout(this.td),this.Qc=0,this.td=null,this.nd={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}},{key:"$d",value:function(t){if(!this.Md&&null===this.hd&&!this.Pd(t)){var i=this.Rd(t);this.Ed(i,this.Ld.Ud),this.yd=!0}}},{key:"qd",value:function(t){var i=je(t.changedTouches,x(this.xd));if(null!==i&&(this.Sd=Ge(t),null===this.md&&!this.wd)){this.gd=!0;var e=this.Bd(Ye(i),x(this.hd)),n=e.Yd,s=e.Xd,h=e.Dd;if(this.ld||!(h<5)){if(!this.ld){var r=.5*n,a=s>=r&&!this.un.Zd(),u=r>s&&!this.un.Kd();a||u||(this.wd=!0),this.ld=!0,this.od=!0,this.Wd(),this.Id()}if(!this.wd){var l=this.Rd(t,i);this.Ad(l,this.Ld.Gd),He(t)}}}}},{key:"Jd",value:function(t){if(0===t.button&&(this.Bd(Ye(t),x(this.rd)).Dd>=5&&(this.ad=!0,this.Vd()),this.ad)){var i=this.Rd(t);this.Ed(i,this.Ld.Qd)}}},{key:"Bd",value:function(t,i){var e=Math.abs(i.st-t.st),n=Math.abs(i.et-t.et);return{Yd:e,Xd:n,Dd:e+n}}},{key:"tf",value:function(t){var i=je(t.changedTouches,x(this.xd));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.xd=null,this.Sd=Ge(t),this.Wd(),this.hd=null,this.vd&&(this.vd(),this.vd=null);var e=this.Rd(t,i);if(this.Ad(e,this.Ld.if),++this.Qc,this.td&&this.Qc>1)this.Bd(Ye(i),this.nd).Dd<30&&!this.od&&this.Ad(e,this.Ld.Od),this.Id();else this.od||(this.Ad(e,this.Ld.nf),this.Ld.nf&&He(t));0===this.Qc&&He(t),0===t.touches.length&&this.ed&&(this.ed=!1,He(t))}}},{key:"Cd",value:function(t){if(0===t.button){var i=this.Rd(t);if(this.rd=null,this.Md=!1,this.pd&&(this.pd(),this.pd=null),Pe()&&this.Nd.ownerDocument.documentElement.removeEventListener("mouseleave",this.kd),!this.Pd(t))if(this.Ed(i,this.Ld.sf),++this.Kc,this.Gc&&this.Kc>1){this.Bd(Ye(t),this.Jc).Dd<5&&!this.ad&&this.Ed(i,this.Ld.zd),this.Vd()}else this.ad||this.Ed(i,this.Ld.ef)}}},{key:"Wd",value:function(){null!==this.sd&&(clearTimeout(this.sd),this.sd=null)}},{key:"rf",value:function(t){if(null===this.xd){var i=t.changedTouches[0];this.xd=i.identifier,this.Sd=Ge(t);var e=this.Nd.ownerDocument.documentElement;this.od=!1,this.ld=!1,this.wd=!1,this.hd=Ye(i),this.vd&&(this.vd(),this.vd=null);var n=this.qd.bind(this),s=this.tf.bind(this);this.vd=function(){e.removeEventListener("touchmove",n),e.removeEventListener("touchend",s)},e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),this.Wd(),this.sd=setTimeout(this.hf.bind(this,t),240);var h=this.Rd(t,i);this.Ad(h,this.Ld.lf),this.td||(this.Qc=0,this.td=setTimeout(this.Id.bind(this),500),this.nd=Ye(i))}}},{key:"af",value:function(t){if(0===t.button){var i=this.Nd.ownerDocument.documentElement;Pe()&&i.addEventListener("mouseleave",this.kd),this.ad=!1,this.rd=Ye(t),this.pd&&(this.pd(),this.pd=null);var e=this.Jd.bind(this),n=this.Cd.bind(this);if(this.pd=function(){i.removeEventListener("mousemove",e),i.removeEventListener("mouseup",n)},i.addEventListener("mousemove",e),i.addEventListener("mouseup",n),this.Md=!0,!this.Pd(t)){var s=this.Rd(t);this.Ed(s,this.Ld._f),this.Gc||(this.Kc=0,this.Gc=setTimeout(this.Vd.bind(this),500),this.Jc=Ye(t))}}}},{key:"Fd",value:function(){var t=this;this.Nd.addEventListener("mouseenter",this.jd.bind(this)),this.Nd.addEventListener("touchcancel",this.Wd.bind(this));var i=this.Nd.ownerDocument,e=function(i){t.Ld.uf&&(i.composed&&t.Nd.contains(i.composedPath()[0])||i.target&&t.Nd.contains(i.target)||t.Ld.uf())};this.ud=function(){i.removeEventListener("touchstart",e)},this._d=function(){i.removeEventListener("mousedown",e)},i.addEventListener("mousedown",e),i.addEventListener("touchstart",e,{passive:!0}),Re()&&(this.dd=function(){t.Nd.removeEventListener("dblclick",t.Td)},this.Nd.addEventListener("dblclick",this.Td)),this.Nd.addEventListener("mouseleave",this.cf.bind(this)),this.Nd.addEventListener("touchstart",this.rf.bind(this),{passive:!0}),function(t){Be&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.Nd),this.Nd.addEventListener("mousedown",this.af.bind(this)),this.df(),this.Nd.addEventListener("touchmove",(function(){}),{passive:!1})}},{key:"df",value:function(){var t=this;void 0===this.Ld.ff&&void 0===this.Ld.pf&&void 0===this.Ld.vf||(this.Nd.addEventListener("touchstart",(function(i){return t.mf(i.touches)}),{passive:!0}),this.Nd.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.md&&void 0!==t.Ld.pf){var e=We(i.touches[0],i.touches[1])/t.bd;t.Ld.pf(t.md,e),He(i)}}),{passive:!1}),this.Nd.addEventListener("touchend",(function(i){t.mf(i.touches)})))}},{key:"mf",value:function(t){1===t.length&&(this.gd=!1),2!==t.length||this.gd||this.ed?this.bf():this.gf(t)}},{key:"gf",value:function(t){var i=this.Nd.getBoundingClientRect()||{left:0,top:0};this.md={st:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,et:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.bd=We(t[0],t[1]),void 0!==this.Ld.ff&&this.Ld.ff(),this.Wd()}},{key:"bf",value:function(){null!==this.md&&(this.md=null,void 0!==this.Ld.vf&&this.Ld.vf())}},{key:"cf",value:function(t){if(this.fd&&this.fd(),!this.Pd(t)&&this.yd){var i=this.Rd(t);this.Ed(i,this.Ld.wf),this.yd=!Re()}}},{key:"hf",value:function(t){var i=je(t.touches,x(this.xd));if(null!==i){var e=this.Rd(t,i);this.Ad(e,this.Ld.Mf),this.od=!0,this.ed=!0}}},{key:"Pd",value:function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Ge(t)<this.Sd+500}},{key:"Ad",value:function(t,i){i&&i.call(this.Ld,t)}},{key:"Ed",value:function(t,i){i&&i.call(this.Ld,t)}},{key:"Rd",value:function(t,i){var e=i||t,n=this.Nd.getBoundingClientRect()||{left:0,top:0};return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-n.left,localY:e.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Sf:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,xf:t.type,yf:e.target,kf:t.view,Cf:function(){"touchstart"!==t.type&&He(t)}}}}]),t}();function We(t,i){var e=t.clientX-i.clientX,n=t.clientY-i.clientY;return Math.sqrt(e*e+n*n)}function He(t){t.cancelable&&t.preventDefault()}function Ye(t){return{st:t.pageX,et:t.pageY}}function Ge(t){return t.timeStamp||performance.now()}function je(t,i){for(var e=0;e<t.length;++e)if(t[e].identifier===i)return t[e];return null}var Ke=function(){function t(i,e,n,s){var h=this;(0,c.Z)(this,t),this.zi=null,this.Tf=null,this.Pf=!1,this.Rf=new ai(200),this.zr=null,this.Df=0,this.Bf=!1,this.Af=function(){h.Bf||h.tn.Of().Ut().Ch()},this.Lf=function(){h.Bf||h.tn.Of().Ut().Ch()},this.tn=i,this.un=e,this.Ba=e.layout,this.Gu=n,this.If="left"===s,this.Ef=document.createElement("div"),this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Ef.style.width="25px",this.Ef.style.left="0",this.Ef.style.position="relative",this.zf=Ue(this.Ef,v({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);var r=this.zf.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vf=Ue(this.Ef,v({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);var a=this.Vf.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";var u={_f:this.Nf.bind(this),lf:this.Nf.bind(this),Qd:this.Ff.bind(this),Gd:this.Ff.bind(this),uf:this.Wf.bind(this),sf:this.jf.bind(this),if:this.jf.bind(this),zd:this.$f.bind(this),Od:this.$f.bind(this),Hd:this.Hf.bind(this),wf:this.Uf.bind(this)};this.qf=new Ie(this.Vf.canvasElement,u,{Zd:function(){return!1},Kd:function(){return!0}})}return(0,f.Z)(t,[{key:"M",value:function(){this.qf.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose(),null!==this.zi&&this.zi.eo().v(this),this.zi=null}},{key:"Yf",value:function(){return this.Ef}},{key:"T",value:function(){return this.Ba.fontSize}},{key:"Xf",value:function(){var t=this.Gu.F();return this.zr!==t.P&&(this.Rf.Fe(),this.zr=t.P),t}},{key:"Zf",value:function(){if(null===this.zi)return 0;var t=0,i=this.Xf(),e=x(this.zf.canvasElement.getContext("2d"));e.save();var n=this.zi.Jl();e.font=this.Kf(),n.length>0&&(t=Math.max(this.Rf.Si(e,n[0].ua),this.Rf.Si(e,n[n.length-1].ua)));for(var s=this.Gf(),h=s.length;h--;){var r=this.Rf.Si(e,s[h].Gt());r>t&&(t=r)}var a=this.zi.Tt();if(null!==a&&null!==this.Tf){var u=this.zi.pn(1,a),l=this.zi.pn(this.Tf.height-2,a);t=Math.max(t,this.Rf.Si(e,this.zi.Fi(Math.floor(Math.min(u,l))+.11111111111111,a)),this.Rf.Si(e,this.zi.Fi(Math.ceil(Math.max(u,l))-.11111111111111,a)))}e.restore();var o=t||34;return Ae(Math.ceil(i.k+i.C+i.O+i.L+5+o))}},{key:"Jf",value:function(t){null!==this.Tf&&d(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.Ef.style.width="".concat(t.width,"px"),this.Ef.style.height="".concat(t.height,"px"))}},{key:"Qf",value:function(){return x(this.Tf).width}},{key:"Gi",value:function(t){this.zi!==t&&(null!==this.zi&&this.zi.eo().v(this),this.zi=t,t.eo().l(this.Sa.bind(this),this))}},{key:"Bt",value:function(){return this.zi}},{key:"Fe",value:function(){var t=this.tn.tp();this.tn.Of().Ut().qo(t,x(this.Bt()))}},{key:"ip",value:function(t){var i=this;if(null!==this.Tf){if(1!==t){this.np(),this.zf.applySuggestedBitmapSize();var e=_(this.zf);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.sp(t),i.ye(t)})),this.ep(e),this.rp(e))}this.Vf.applySuggestedBitmapSize();var n=_(this.Vf);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.hp(n))}}},{key:"lp",value:function(){return this.zf.bitmapSize}},{key:"ap",value:function(t,i,e){var n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,i,e)}},{key:"gt",value:function(){var t;null===(t=this.zi)||void 0===t||t.Jl()}},{key:"Nf",value:function(t){if(null!==this.zi&&!this.zi.Ni()&&this.un.handleScale.axisPressedMouseMove.price){var i=this.tn.Of().Ut(),e=this.tn.tp();this.Pf=!0,i.No(e,this.zi,t.localY)}}},{key:"Ff",value:function(t){if(null!==this.zi&&this.un.handleScale.axisPressedMouseMove.price){var i=this.tn.Of().Ut(),e=this.tn.tp(),n=this.zi;i.Fo(e,n,t.localY)}}},{key:"Wf",value:function(){if(null!==this.zi&&this.un.handleScale.axisPressedMouseMove.price){var t=this.tn.Of().Ut(),i=this.tn.tp(),e=this.zi;this.Pf&&(this.Pf=!1,t.Wo(i,e))}}},{key:"jf",value:function(t){if(null!==this.zi&&this.un.handleScale.axisPressedMouseMove.price){var i=this.tn.Of().Ut(),e=this.tn.tp();this.Pf=!1,i.Wo(e,this.zi)}}},{key:"$f",value:function(t){this.un.handleScale.axisDoubleClickReset.price&&this.Fe()}},{key:"Hf",value:function(t){null!==this.zi&&(!this.tn.Of().Ut().F().handleScale.axisPressedMouseMove.price||this.zi.th()||this.zi.Na()||this.op(1))}},{key:"Uf",value:function(t){this.op(0)}},{key:"Gf",value:function(){var t=this,i=[],e=null===this.zi?void 0:this.zi;return function(n){for(var s=0;s<n.length;++s)for(var h=n[s].Pn(t.tn.tp(),e),r=0;r<h.length;r++)i.push(h[r])}(this.tn.tp().Ja()),i}},{key:"sp",value:function(t){var i=t.context,e=t.bitmapSize,n=e.width,s=e.height,h=this.tn.tp().Ut(),r=h.U(),a=h.Ic();r===a?rt(i,0,0,n,s,r):ot(i,0,0,n,s,r,a)}},{key:"ye",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio;if(null!==this.Tf&&null!==this.zi&&this.zi.F().borderVisible){i.fillStyle=this.zi.F().borderColor;var s,h=Math.max(1,Math.floor(this.Xf().k*n));s=this.If?e.width-h:0,i.fillRect(s,0,h,e.height)}}},{key:"ep",value:function(t){var i=this;if(null!==this.Tf&&null!==this.zi){var e=this.zi.Jl(),n=this.zi.F(),s=this.Xf(),h=this.If?this.Tf.width-s.C:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var i=t.context,a=t.horizontalPixelRatio,u=t.verticalPixelRatio;i.fillStyle=n.borderColor;var l=Math.max(1,Math.floor(u)),o=Math.floor(.5*u),c=Math.round(s.C*a);i.beginPath();var f,v=(0,r.Z)(e);try{for(v.s();!(f=v.n()).done;){var d=f.value;i.rect(Math.floor(h*a),Math.round(d.Yl*u)-o,c,l)}}catch(y){v.e(y)}finally{v.f()}i.fill()})),t.useMediaCoordinateSpace((function(t){var r,a=t.context;a.font=i.Kf(),a.fillStyle=null!==(r=n.textColor)&&void 0!==r?r:i.Ba.textColor,a.textAlign=i.If?"right":"left",a.textBaseline="middle";for(var u=i.If?Math.round(h-s.O):Math.round(h+s.C+s.O),l=e.map((function(t){return i.Rf.Mi(a,t.ua)})),o=e.length;o--;){var c=e[o];a.fillText(c.ua,u,c.Yl+l[o])}}))}}},{key:"np",value:function(){if(null!==this.Tf&&null!==this.zi){var t=this.Tf.height/2,i=[],e=this.zi.Ja().slice(),n=this.tn.tp(),s=this.Xf();this.zi===n.Je()&&this.tn.tp().Ja().forEach((function(t){n.Ge(t)&&e.push(t)}));var h=this.zi.jl()[0],r=this.zi;e.forEach((function(e){var s=e.Pn(n,r);s.forEach((function(t){t.Ai(null),t.Oi()&&i.push(t)})),h===e&&s.length>0&&(t=s[0].yi())})),i.forEach((function(t){return t.Ai(t.yi())})),this.zi.F().alignLabels&&this._p(i,s,t)}}},{key:"_p",value:function(t,i,e){if(null!==this.Tf){var n=t.filter((function(t){return t.yi()<=e})),s=t.filter((function(t){return t.yi()>e}));n.sort((function(t,i){return i.yi()-t.yi()})),n.length&&s.length&&s.push(n[0]),s.sort((function(t,i){return t.yi()-i.yi()}));var h,a=(0,r.Z)(t);try{for(a.s();!(h=a.n()).done;){var u=h.value,l=Math.floor(u.It(i)/2),o=u.yi();o>-l&&o<l&&u.Ai(l),o>this.Tf.height-l&&o<this.Tf.height+l&&u.Ai(this.Tf.height-l)}}catch(M){a.e(M)}finally{a.f()}for(var c=1;c<n.length;c++){var f=n[c],v=n[c-1],d=v.It(i,!1),y=f.yi(),p=v.Bi();y>p-d&&f.Ai(p-d)}for(var m=1;m<s.length;m++){var k=s[m],g=s[m-1],b=g.It(i,!0),w=k.yi(),_=g.Bi();w<_+b&&k.Ai(_+b)}}}},{key:"rp",value:function(t){var i=this;if(null!==this.Tf){var e=this.Gf(),n=this.Xf(),s=this.If?"right":"left";e.forEach((function(e){e.Li()&&e.Mt(x(i.zi)).X(t,n,i.Rf,s)}))}}},{key:"hp",value:function(t){var i=this;if(null!==this.Tf&&null!==this.zi){var e=this.tn.Of().Ut(),n=[],s=this.tn.tp(),h=e.dc().Pn(s,this.zi);h.length&&n.push(h);var r=this.Xf(),a=this.If?"right":"left";n.forEach((function(e){e.forEach((function(e){e.Mt(x(i.zi)).X(t,r,i.Rf,a)}))}))}}},{key:"op",value:function(t){this.Ef.style.cursor=1===t?"ns-resize":"default"}},{key:"Sa",value:function(){var t=this.Zf();this.Df<t&&this.tn.Of().Ut().dl(),this.Df=t}},{key:"Kf",value:function(){return K(this.Ba.fontSize,this.Ba.fontFamily)}}]),t}();function Xe(t,i,e,n){t.K&&t.K(i,e,n)}function Je(t,i,e,n){t.X(i,e,n)}function qe(t,i){return t.Tn(i)}function Qe(t,i){return t.Ji(i)}function $e(t,i){return void 0!==t.kl?t.kl(i):[]}var tn=function(){function t(i,e){var n=this;(0,c.Z)(this,t),this.Tf=v({width:0,height:0}),this.up=null,this.cp=null,this.dp=null,this.fp=!1,this.pp=new D,this.vp=0,this.mp=!1,this.bp=null,this.gp=!1,this.wp=null,this.Mp=null,this.Bf=!1,this.Af=function(){n.Bf||null===n.Sp||n.Hi().Ch()},this.Lf=function(){n.Bf||null===n.Sp||n.Hi().Ch()},this.xp=i,this.Sp=e,this.Sp.Zo().l(this.yp.bind(this),this,!0),this.kp=document.createElement("td"),this.kp.style.padding="0",this.kp.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.Tp=document.createElement("td"),this.Tp.style.padding="0",this.kp.appendChild(s),this.zf=Ue(s,v({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);var h=this.zf.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Vf=Ue(s,v({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);var r=this.Vf.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Pp=document.createElement("tr"),this.Pp.appendChild(this.Cp),this.Pp.appendChild(this.kp),this.Pp.appendChild(this.Tp),this.Rp(),this.qf=new Ie(this.Vf.canvasElement,this,{Zd:function(){return null===n.bp&&!n.xp.F().handleScroll.vertTouchDrag},Kd:function(){return null===n.bp&&!n.xp.F().handleScroll.horzTouchDrag}})}return(0,f.Z)(t,[{key:"M",value:function(){null!==this.up&&this.up.M(),null!==this.cp&&this.cp.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose(),null!==this.Sp&&this.Sp.Zo().v(this),this.qf.M()}},{key:"tp",value:function(){return x(this.Sp)}},{key:"Dp",value:function(i){null!==this.Sp&&this.Sp.Zo().v(this),this.Sp=i,null!==this.Sp&&this.Sp.Zo().l(t.prototype.yp.bind(this),this,!0),this.Rp()}},{key:"Of",value:function(){return this.xp}},{key:"Yf",value:function(){return this.Pp}},{key:"Rp",value:function(){if(null!==this.Sp&&(this.Bp(),0!==this.Hi().wt().length)){if(null!==this.up){var t=this.Sp.zo();this.up.Gi(x(t))}if(null!==this.cp){var i=this.Sp.Vo();this.cp.Gi(x(i))}}}},{key:"Ap",value:function(){null!==this.up&&this.up.gt(),null!==this.cp&&this.cp.gt()}},{key:"Ro",value:function(){return null!==this.Sp?this.Sp.Ro():0}},{key:"Do",value:function(t){this.Sp&&this.Sp.Do(t)}},{key:"Hd",value:function(t){if(this.Sp){this.Op();var i=t.localX,e=t.localY;this.Lp(i,e,t)}}},{key:"_f",value:function(t){this.Op(),this.Ip(),this.Lp(t.localX,t.localY,t)}},{key:"Ud",value:function(t){if(this.Sp){this.Op();var i=t.localX,e=t.localY;this.Lp(i,e,t);var n=this.ir(i,e);this.Hi().lc(n&&{ac:n.ac,Ep:n.Ep})}}},{key:"ef",value:function(t){null!==this.Sp&&(this.Op(),this.zp(t))}},{key:"Qd",value:function(t){this.Op(),this.Vp(t),this.Lp(t.localX,t.localY,t)}},{key:"sf",value:function(t){null!==this.Sp&&(this.Op(),this.mp=!1,this.Np(t))}},{key:"nf",value:function(t){null!==this.Sp&&this.zp(t)}},{key:"Mf",value:function(t){if(this.mp=!0,null===this.bp){var i={x:t.localX,y:t.localY};this.Fp(i,i,t)}}},{key:"wf",value:function(t){null!==this.Sp&&(this.Op(),this.Sp.Ut().lc(null),this.Wp())}},{key:"jp",value:function(){return this.pp}},{key:"ff",value:function(){this.vp=1,this.Hi().Hn()}},{key:"pf",value:function(t,i){if(this.xp.F().handleScale.pinch){var e=5*(i-this.vp);this.vp=i,this.Hi().gc(t.st,e)}}},{key:"lf",value:function(t){if(this.mp=!1,this.gp=null!==this.bp,this.Ip(),null!==this.bp){var i=this.Hi().dc();this.wp={x:i.Xt(),y:i.Zt()},this.bp={x:t.localX,y:t.localY}}}},{key:"Gd",value:function(t){if(null!==this.Sp){var i=t.localX,e=t.localY;if(null===this.bp)this.Vp(t);else{this.gp=!1;var n=x(this.wp),s=n.x+(i-this.bp.x),h=n.y+(e-this.bp.y);this.Lp(s,h,t)}}}},{key:"if",value:function(t){0===this.Of().F().trackingMode.exitMode&&(this.gp=!0),this.$p(),this.Np(t)}},{key:"ir",value:function(t,i){var e=this.Sp;if(null===e)return null;var n,s=e.Ja(),h=(0,r.Z)(s);try{for(h.s();!(n=h.n()).done;){var a=n.value,u=this.Hp(a.Tn(e),t,i);if(null!==u)return{ac:a,kf:u.kf,Ep:u.Ep}}}catch(l){h.e(l)}finally{h.f()}return null}},{key:"Up",value:function(t,i){x("left"===i?this.up:this.cp).Jf(v({width:t,height:this.Tf.height}))}},{key:"qp",value:function(){return this.Tf}},{key:"Jf",value:function(t){d(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.kp.style.width=t.width+"px",this.kp.style.height=t.height+"px")}},{key:"Yp",value:function(){var t=x(this.Sp);t.Eo(t.zo()),t.Eo(t.Vo());var i,e=(0,r.Z)(t.jl());try{for(e.s();!(i=e.n()).done;){var n=i.value;if(t.Ge(n)){var s=n.Bt();null!==s&&t.Eo(s),n.Dn()}}}catch(h){e.e(h)}finally{e.f()}}},{key:"lp",value:function(){return this.zf.bitmapSize}},{key:"ap",value:function(t,i,e){var n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,i,e)}},{key:"ip",value:function(t){var i=this;if(0!==t&&null!==this.Sp){if(t>1&&this.Yp(),null!==this.up&&this.up.ip(t),null!==this.cp&&this.cp.ip(t),1!==t){this.zf.applySuggestedBitmapSize();var e=_(this.zf);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.sp(t)})),this.Sp&&(this.Xp(e),this.Zp(e),this.Kp(e,qe),this.Kp(e,Qe)))}this.Vf.applySuggestedBitmapSize();var n=_(this.Vf);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.Kp(n,$e),this.Gp(n))}}},{key:"Jp",value:function(){return this.up}},{key:"Qp",value:function(){return this.cp}},{key:"yp",value:function(){null!==this.Sp&&this.Sp.Zo().v(this),this.Sp=null}},{key:"zp",value:function(t){var i=t.localX,e=t.localY;this.pp.g()&&this.pp.m(this.Hi().yt().ru(i),{x:i,y:e},t)}},{key:"sp",value:function(t){var i=t.context,e=t.bitmapSize,n=e.width,s=e.height,h=this.Hi(),r=h.U(),a=h.Ic();r===a?rt(i,0,0,n,s,a):ot(i,0,0,n,s,r,a)}},{key:"Xp",value:function(t){var i=x(this.Sp).Ko().Th().Mt();null!==i&&i.X(t,!1)}},{key:"Zp",value:function(t){var i=this.Hi().cc();this.tv(t,qe,Xe,i),this.tv(t,qe,Je,i)}},{key:"Gp",value:function(t){this.tv(t,qe,Je,this.Hi().dc())}},{key:"Kp",value:function(t,i){var e,n=x(this.Sp).Ja(),s=(0,r.Z)(n);try{for(s.s();!(e=s.n()).done;){var h=e.value;this.tv(t,i,Xe,h)}}catch(o){s.e(o)}finally{s.f()}var a,u=(0,r.Z)(n);try{for(u.s();!(a=u.n()).done;){var l=a.value;this.tv(t,i,Je,l)}}catch(o){u.e(o)}finally{u.f()}}},{key:"tv",value:function(t,i,e,n){var s,h=x(this.Sp),a=i(n,h),u=h.Ut().hc(),l=null!==u&&u.ac===n,o=null!==u&&l&&void 0!==u.Ep?u.Ep.sr:void 0,c=(0,r.Z)(a);try{for(c.s();!(s=c.n()).done;){var f=s.value.Mt();null!==f&&e(f,t,l,o)}}catch(v){c.e(v)}finally{c.f()}}},{key:"Hp",value:function(t,i,e){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var h=n.value,a=h.Mt();if(null!==a&&a.ir){var u=a.ir(i,e);if(null!==u)return{kf:h,Ep:u}}}}catch(l){s.e(l)}finally{s.f()}return null}},{key:"Bp",value:function(){if(null!==this.Sp){var t=this.xp,i=this.Sp.zo().F().visible,e=this.Sp.Vo().F().visible;i||null===this.up||(this.Cp.removeChild(this.up.Yf()),this.up.M(),this.up=null),e||null===this.cp||(this.Tp.removeChild(this.cp.Yf()),this.cp.M(),this.cp=null);var n=t.Ut().Rc();i&&null===this.up&&(this.up=new Ke(this,t.F(),n,"left"),this.Cp.appendChild(this.up.Yf())),e&&null===this.cp&&(this.cp=new Ke(this,t.F(),n,"right"),this.Tp.appendChild(this.cp.Yf()))}}},{key:"iv",value:function(t){return t.Sf&&this.mp||null!==this.bp}},{key:"nv",value:function(t){return Math.max(0,Math.min(t,this.Tf.width-1))}},{key:"sv",value:function(t){return Math.max(0,Math.min(t,this.Tf.height-1))}},{key:"Lp",value:function(t,i,e){this.Hi().Cc(this.nv(t),this.sv(i),e,x(this.Sp))}},{key:"Wp",value:function(){this.Hi().Tc()}},{key:"$p",value:function(){this.gp&&(this.bp=null,this.Wp())}},{key:"Fp",value:function(t,i,e){this.bp=t,this.gp=!1,this.Lp(i.x,i.y,e);var n=this.Hi().dc();this.wp={x:n.Xt(),y:n.Zt()}}},{key:"Hi",value:function(){return this.xp.Ut()}},{key:"Np",value:function(t){if(this.fp){var i=this.Hi(),e=this.tp();if(i.Ho(e,e.fn()),this.dp=null,this.fp=!1,i.xc(),null!==this.Mp){var n=performance.now(),s=i.yt();this.Mp.pr(s.ou(),n),this.Mp.wu(n)||i.Yn(this.Mp)}}}},{key:"Op",value:function(){this.bp=null}},{key:"Ip",value:function(){if(this.Sp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)x(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.Sp.fn().Ni()&&this.Hi().yt().Ni()}}},{key:"Vp",value:function(t){if(null!==this.Sp){var i=this.Hi(),e=i.yt();if(!e.Ni()){var n=this.xp.F(),s=n.handleScroll,h=n.kineticScroll;if(s.pressedMouseMove&&!t.Sf||(s.horzTouchDrag||s.vertTouchDrag)&&t.Sf){var r=this.Sp.fn(),a=performance.now();if(null!==this.dp||this.iv(t)||(this.dp={x:t.clientX,y:t.clientY,u_:a,ev:t.localX,rv:t.localY}),null!==this.dp&&!this.fp&&(this.dp.x!==t.clientX||this.dp.y!==t.clientY)){if(t.Sf&&h.touch||!t.Sf&&h.mouse){var u=e.Ks();this.Mp=new Oe(.2/u,7/u,.997,15/u),this.Mp.Xc(e.ou(),this.dp.u_)}else this.Mp=null;r.Ni()||i.jo(this.Sp,r,t.localY),i.Mc(t.localX),this.fp=!0}this.fp&&(r.Ni()||i.$o(this.Sp,r,t.localY),i.Sc(t.localX),null!==this.Mp&&this.Mp.Xc(e.ou(),a))}}}}}]),t}(),en=function(){function t(i,e,n,s,h){var r=this;(0,c.Z)(this,t),this.vt=!0,this.Tf=v({width:0,height:0}),this.Af=function(){return r.ip(3)},this.If="left"===i,this.Gu=n.Rc,this.un=e,this.hv=s,this.lv=h,this.Ef=document.createElement("div"),this.Ef.style.width="25px",this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.zf=Ue(this.Ef,v({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af)}return(0,f.Z)(t,[{key:"M",value:function(){this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose()}},{key:"Yf",value:function(){return this.Ef}},{key:"qp",value:function(){return this.Tf}},{key:"Jf",value:function(t){d(this.Tf,t)||(this.Tf=t,this.zf.resizeCanvasElement(t),this.Ef.style.width="".concat(t.width,"px"),this.Ef.style.height="".concat(t.height,"px"),this.vt=!0)}},{key:"ip",value:function(t){var i=this;if((!(t<3)||this.vt)&&0!==this.Tf.width&&0!==this.Tf.height){this.vt=!1,this.zf.applySuggestedBitmapSize();var e=_(this.zf);null!==e&&e.useBitmapCoordinateSpace((function(t){i.sp(t),i.ye(t)}))}}},{key:"lp",value:function(){return this.zf.bitmapSize}},{key:"ap",value:function(t,i,e){var n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,i,e)}},{key:"ye",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(this.hv()){i.fillStyle=this.un.timeScale.borderColor;var h=Math.floor(this.Gu.F().k*n),r=Math.floor(this.Gu.F().k*s),a=this.If?e.width-h:0;i.fillRect(a,0,h,r)}}},{key:"sp",value:function(t){var i=t.context,e=t.bitmapSize;rt(i,0,0,e.width,e.height,this.lv())}}]),t}();function nn(t,i){return t.w_>i.w_?t:i}var sn,hn=function(){function t(i){var e=this;(0,c.Z)(this,t),this.av=null,this.ov=null,this.S=null,this._v=!1,this.Tf=v({width:0,height:0}),this.uv=new D,this.Rf=new ai(5),this.Bf=!1,this.Af=function(){e.Bf||e.xp.Ut().Ch()},this.Lf=function(){e.Bf||e.xp.Ut().Ch()},this.xp=i,this.un=i.F().layout,this.cv=document.createElement("tr"),this.dv=document.createElement("td"),this.dv.style.padding="0",this.fv=document.createElement("td"),this.fv.style.padding="0",this.Ef=document.createElement("td"),this.Ef.style.height="25px",this.Ef.style.padding="0",this.pv=document.createElement("div"),this.pv.style.width="100%",this.pv.style.height="100%",this.pv.style.position="relative",this.pv.style.overflow="hidden",this.Ef.appendChild(this.pv),this.zf=Ue(this.pv,v({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);var n=this.zf.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vf=Ue(this.pv,v({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);var s=this.Vf.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.cv.appendChild(this.dv),this.cv.appendChild(this.Ef),this.cv.appendChild(this.fv),this.vv(),this.xp.Ut().Po().l(this.vv.bind(this),this),this.qf=new Ie(this.Vf.canvasElement,this,{Zd:function(){return!0},Kd:function(){return!1}})}return(0,f.Z)(t,[{key:"M",value:function(){this.qf.M(),null!==this.av&&this.av.M(),null!==this.ov&&this.ov.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose()}},{key:"Yf",value:function(){return this.cv}},{key:"mv",value:function(){return this.av}},{key:"bv",value:function(){return this.ov}},{key:"_f",value:function(t){if(!this._v){this._v=!0;var i=this.xp.Ut();!i.yt().Ni()&&this.xp.F().handleScale.axisPressedMouseMove.time&&i.bc(t.localX)}}},{key:"lf",value:function(t){this._f(t)}},{key:"uf",value:function(){var t=this.xp.Ut();!t.yt().Ni()&&this._v&&(this._v=!1,this.xp.F().handleScale.axisPressedMouseMove.time&&t.kc())}},{key:"Qd",value:function(t){var i=this.xp.Ut();!i.yt().Ni()&&this.xp.F().handleScale.axisPressedMouseMove.time&&i.yc(t.localX)}},{key:"Gd",value:function(t){this.Qd(t)}},{key:"sf",value:function(){this._v=!1;var t=this.xp.Ut();t.yt().Ni()&&!this.xp.F().handleScale.axisPressedMouseMove.time||t.kc()}},{key:"if",value:function(){this.sf()}},{key:"zd",value:function(){this.xp.F().handleScale.axisDoubleClickReset.time&&this.xp.Ut().Zn()}},{key:"Od",value:function(){this.zd()}},{key:"Hd",value:function(){this.xp.Ut().F().handleScale.axisPressedMouseMove.time&&this.op(1)}},{key:"wf",value:function(){this.op(0)}},{key:"qp",value:function(){return this.Tf}},{key:"gv",value:function(){return this.uv}},{key:"wv",value:function(t,i,e){d(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.Ef.style.width="".concat(t.width,"px"),this.Ef.style.height="".concat(t.height,"px"),this.uv.m(t)),null!==this.av&&this.av.Jf(v({width:i,height:t.height})),null!==this.ov&&this.ov.Jf(v({width:e,height:t.height}))}},{key:"Mv",value:function(){var t=this.Sv();return Math.ceil(t.k+t.C+t.T+t.I+t.A+t.xv)}},{key:"gt",value:function(){this.xp.Ut().yt().Jl()}},{key:"lp",value:function(){return this.zf.bitmapSize}},{key:"ap",value:function(t,i,e){var n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,i,e)}},{key:"ip",value:function(t){var i=this;if(0!==t){if(1!==t){this.zf.applySuggestedBitmapSize();var e=_(this.zf);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.sp(t),i.ye(t)})),this.ep(e)),null!==this.av&&this.av.ip(t),null!==this.ov&&this.ov.ip(t)}this.Vf.applySuggestedBitmapSize();var n=_(this.Vf);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.yv([this.xp.Ut().dc()],n))}}},{key:"sp",value:function(t){var i=t.context,e=t.bitmapSize;rt(i,0,0,e.width,e.height,this.xp.Ut().Ic())}},{key:"ye",value:function(t){var i=t.context,e=t.bitmapSize,n=t.verticalPixelRatio;if(this.xp.F().timeScale.borderVisible){i.fillStyle=this.kv();var s=Math.max(1,Math.floor(this.Sv().k*n));i.fillRect(0,0,e.width,s)}}},{key:"ep",value:function(t){var i=this,e=this.xp.Ut().yt(),n=e.Jl();if(n&&0!==n.length){var s=n.reduce(nn,n[0]).w_;s>30&&s<50&&(s=30);var h=this.Sv(),a=e.F();a.borderVisible&&a.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var e=t.context,s=t.horizontalPixelRatio,r=t.verticalPixelRatio;e.strokeStyle=i.kv(),e.fillStyle=i.kv();var a=Math.max(1,Math.floor(s)),u=Math.floor(.5*s);e.beginPath();for(var l=Math.round(h.C*r),o=n.length;o--;){var c=Math.round(n[o].Yl*s);e.rect(c-u,0,a,l)}e.fill()})),t.useMediaCoordinateSpace((function(t){var e=t.context,a=h.k+h.C+h.I+h.T/2;e.textAlign="center",e.textBaseline="middle",e.fillStyle=i.$(),e.font=i.Kf();var u,l=(0,r.Z)(n);try{for(l.s();!(u=l.n()).done;){var o=u.value;if(o.w_<s){var c=o.cu?i.Cv(e,o.Yl,o.ua):o.Yl;e.fillText(o.ua,c,a)}}}catch(p){l.e(p)}finally{l.f()}e.font=i.Tv();var f,v=(0,r.Z)(n);try{for(v.s();!(f=v.n()).done;){var d=f.value;if(d.w_>=s){var y=d.cu?i.Cv(e,d.Yl,d.ua):d.Yl;e.fillText(d.ua,y,a)}}}catch(p){v.e(p)}finally{v.f()}}))}}},{key:"Cv",value:function(t,i,e){var n=this.Rf.Si(t,e),s=n/2,h=Math.floor(i-s)+.5;return h<0?i+=Math.abs(0-h):h+n>this.Tf.width&&(i-=Math.abs(this.Tf.width-(h+n))),i}},{key:"yv",value:function(t,i){var e,n=this.Sv(),s=(0,r.Z)(t);try{for(s.s();!(e=s.n()).done;){var h,a=e.value,u=(0,r.Z)(a.Qi());try{for(u.s();!(h=u.n()).done;){h.value.Mt().X(i,n)}}catch(l){u.e(l)}finally{u.f()}}}catch(l){s.e(l)}finally{s.f()}}},{key:"kv",value:function(){return this.xp.F().timeScale.borderColor}},{key:"$",value:function(){return this.un.textColor}},{key:"W",value:function(){return this.un.fontSize}},{key:"Kf",value:function(){return K(this.W(),this.un.fontFamily)}},{key:"Tv",value:function(){return K(this.W(),this.un.fontFamily,"bold")}},{key:"Sv",value:function(){null===this.S&&(this.S={k:1,V:NaN,I:NaN,A:NaN,ji:NaN,C:5,T:NaN,P:"",Wi:new ai,xv:0});var t=this.S,i=this.Kf();if(t.P!==i){var e=this.W();t.T=e,t.P=i,t.I=3*e/12,t.A=3*e/12,t.ji=9*e/12,t.V=0,t.xv=4*e/12,t.Wi.Fe()}return this.S}},{key:"op",value:function(t){this.Ef.style.cursor=1===t?"ew-resize":"default"}},{key:"vv",value:function(){var t=this.xp.Ut(),i=t.F();i.leftPriceScale.visible||null===this.av||(this.dv.removeChild(this.av.Yf()),this.av.M(),this.av=null),i.rightPriceScale.visible||null===this.ov||(this.fv.removeChild(this.ov.Yf()),this.ov.M(),this.ov=null);var e={Rc:this.xp.Ut().Rc()},n=function(){return i.leftPriceScale.borderVisible&&t.yt().F().borderVisible},s=function(){return t.Ic()};i.leftPriceScale.visible&&null===this.av&&(this.av=new en("left",i,e,n,s),this.dv.appendChild(this.av.Yf())),i.rightPriceScale.visible&&null===this.ov&&(this.ov=new en("right",i,e,n,s),this.fv.appendChild(this.ov.Yf()))}}]),t}(),rn=!!Be&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((function(t){return t.brand.includes("Chromium")}))&&!!Be&&((null===(sn=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===sn?void 0:sn.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0),an=function(){function t(i,e){var n;(0,c.Z)(this,t),this.Pv=[],this.Rv=0,this.fa=0,this.vo=0,this.Dv=0,this.Bv=0,this.Av=null,this.Ov=!1,this.pp=new D,this.Xu=new D,this.Lv=null,this.Iv=i,this.un=e,this.cv=document.createElement("div"),this.cv.classList.add("tv-lightweight-charts"),this.cv.style.overflow="hidden",this.cv.style.width="100%",this.cv.style.height="100%",(n=this.cv).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Ev=document.createElement("table"),this.Ev.setAttribute("cellspacing","0"),this.cv.appendChild(this.Ev),this.zv=this.Vv.bind(this),un(this.un)&&this.Nv(!0),this.Hi=new Le(this.Ku.bind(this),this.un),this.Ut().fc().l(this.Fv.bind(this),this),this.Wv=new hn(this),this.Ev.appendChild(this.Wv.Yf());var s=e.autoSize&&this.jv(),h=this.un.width,r=this.un.height;if(s||0===h||0===r){var a=i.getBoundingClientRect();h=h||a.width,r=r||a.height}this.$v(h,r),this.Hv(),i.appendChild(this.cv),this.Uv(),this.Hi.yt().yu().l(this.Hi.dl.bind(this.Hi),this),this.Hi.Po().l(this.Hi.dl.bind(this.Hi),this)}return(0,f.Z)(t,[{key:"Ut",value:function(){return this.Hi}},{key:"F",value:function(){return this.un}},{key:"qv",value:function(){return this.Pv}},{key:"Yv",value:function(){return this.Wv}},{key:"M",value:function(){this.Nv(!1),0!==this.Rv&&window.cancelAnimationFrame(this.Rv),this.Hi.fc().v(this),this.Hi.yt().yu().v(this),this.Hi.Po().v(this),this.Hi.M();var t,i=(0,r.Z)(this.Pv);try{for(i.s();!(t=i.n()).done;){var e=t.value;this.Ev.removeChild(e.Yf()),e.jp().v(this),e.M()}}catch(n){i.e(n)}finally{i.f()}this.Pv=[],x(this.Wv).M(),null!==this.cv.parentElement&&this.cv.parentElement.removeChild(this.cv),this.Xu.M(),this.pp.M(),this.Xv()}},{key:"$v",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.fa!==i||this.vo!==t){var n=function(t){var i=Math.floor(t.width),e=Math.floor(t.height);return v({width:i-i%2,height:e-e%2})}(v({width:t,height:i}));this.fa=n.height,this.vo=n.width;var s=this.fa+"px",h=this.vo+"px";x(this.cv).style.height=s,x(this.cv).style.width=h,this.Ev.style.height=s,this.Ev.style.width=h,e?this.Zv(wt.ss(),performance.now()):this.Hi.dl()}}},{key:"ip",value:function(t){void 0===t&&(t=wt.ss());for(var i=0;i<this.Pv.length;i++)this.Pv[i].ip(t.jn(i).Nn);this.un.timeScale.visible&&this.Wv.ip(t.Wn())}},{key:"kh",value:function(t){var i=un(this.un);this.Hi.kh(t);var e=un(this.un);e!==i&&this.Nv(e),this.Uv(),this.Kv(t)}},{key:"jp",value:function(){return this.pp}},{key:"fc",value:function(){return this.Xu}},{key:"Gv",value:function(){null!==this.Av&&(this.Zv(this.Av,performance.now()),this.Av=null);var t=this.Jv(null),i=document.createElement("canvas");i.width=t.width,i.height=t.height;var e=x(i.getContext("2d"));return this.Jv(e),i}},{key:"Qv",value:function(t){return("left"!==t||this.tm())&&("right"!==t||this.im())?0===this.Pv.length?0:x("left"===t?this.Pv[0].Jp():this.Pv[0].Qp()).Qf():0}},{key:"nm",value:function(){return this.un.autoSize&&null!==this.Lv}},{key:"Kv",value:function(t){(void 0!==t.autoSize||!this.Lv||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Lv&&this.jv(),!1===t.autoSize&&null!==this.Lv&&this.Xv(),t.autoSize||void 0===t.width&&void 0===t.height||this.$v(t.width||this.vo,t.height||this.fa))}},{key:"Jv",value:function(t){var i=this,e=0,n=0,s=this.Pv[0],h=function(e,n){for(var s=0,h=0;h<i.Pv.length;h++){var r=i.Pv[h],a=x("left"===e?r.Jp():r.Qp()),u=a.lp();null!==t&&a.ap(t,n,s),s+=u.height}};this.tm()&&(h("left",0),e+=x(s.Jp()).lp().width);for(var r=0;r<this.Pv.length;r++){var a=this.Pv[r],u=a.lp();null!==t&&a.ap(t,e,n),n+=u.height}e+=s.lp().width,this.im()&&(h("right",e),e+=x(s.Qp()).lp().width);var l=function(e,n,s){x("left"===e?i.Wv.mv():i.Wv.bv()).ap(x(t),n,s)};if(this.un.timeScale.visible){var o=this.Wv.lp();if(null!==t){var c=0;this.tm()&&(l("left",c,n),c=x(s.Jp()).lp().width),this.Wv.ap(t,c,n),c+=o.width,this.im()&&l("right",c,n)}n+=o.height}return v({width:e,height:n})}},{key:"sm",value:function(){var t,i=0,e=0,n=0,s=(0,r.Z)(this.Pv);try{for(s.s();!(t=s.n()).done;){var h=t.value;this.tm()&&(e=Math.max(e,x(h.Jp()).Zf())),this.im()&&(n=Math.max(n,x(h.Qp()).Zf())),i+=h.Ro()}}catch(_){s.e(_)}finally{s.f()}e=Ae(e),n=Ae(n);for(var a,u=this.vo,l=this.fa,o=Math.max(u-e-n,0),c=this.un.timeScale.visible,f=c?this.Wv.Mv():0,d=0+(f=(a=f)+a%2),y=l<d?0:l-d,p=y/i,m=0,k=0;k<this.Pv.length;++k){var g=this.Pv[k];g.Dp(this.Hi.uc()[k]);var b,w;w=k===this.Pv.length-1?y-m:Math.round(g.Ro()*p),m+=b=Math.max(w,2),g.Jf(v({width:o,height:b})),this.tm()&&g.Up(e,"left"),this.im()&&g.Up(n,"right"),g.tp()&&this.Hi.vc(g.tp(),b)}this.Wv.wv(v({width:c?o:0,height:f}),c?e:0,c?n:0),this.Hi.Bo(o),this.Dv!==e&&(this.Dv=e),this.Bv!==n&&(this.Bv=n)}},{key:"Nv",value:function(t){t?this.cv.addEventListener("wheel",this.zv,{passive:!1}):this.cv.removeEventListener("wheel",this.zv)}},{key:"rm",value:function(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return rn?1/window.devicePixelRatio:1}},{key:"Vv",value:function(t){if(0!==t.deltaX&&this.un.handleScroll.mouseWheel||0!==t.deltaY&&this.un.handleScale.mouseWheel){var i=this.rm(t),e=i*t.deltaX/100,n=-i*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==n&&this.un.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.cv.getBoundingClientRect().left;this.Ut().gc(h,s)}0!==e&&this.un.handleScroll.mouseWheel&&this.Ut().wc(-80*e)}}},{key:"Zv",value:function(t,i){var e,n=t.Wn();3===n&&this.hm(),3!==n&&2!==n||(this.lm(t),this.am(t,i),this.Wv.gt(),this.Pv.forEach((function(t){t.Ap()})),3===(null===(e=this.Av)||void 0===e?void 0:e.Wn())&&(this.Av.Qn(t),this.hm(),this.lm(this.Av),this.am(this.Av,i),t=this.Av,this.Av=null)),this.ip(t)}},{key:"am",value:function(t,i){var e,n=(0,r.Z)(t.Jn());try{for(n.s();!(e=n.n()).done;){var s=e.value;this.ts(s,i)}}catch(h){n.e(h)}finally{n.f()}}},{key:"lm",value:function(t){for(var i=this.Hi.uc(),e=0;e<i.length;e++)t.jn(e).Fn&&i[e].Yo()}},{key:"ts",value:function(t,i){var e=this.Hi.yt();switch(t.Un){case 0:e.Cu();break;case 1:e.Tu(t.At);break;case 2:e.Kn(t.At);break;case 3:e.Gn(t.At);break;case 4:e.du();break;case 5:t.At.wu(i)||e.Gn(t.At.Mu(i))}}},{key:"Ku",value:function(t){var i=this;null!==this.Av?this.Av.Qn(t):this.Av=t,this.Ov||(this.Ov=!0,this.Rv=window.requestAnimationFrame((function(t){if(i.Ov=!1,i.Rv=0,null!==i.Av){var e=i.Av;i.Av=null,i.Zv(e,t);var n,s=(0,r.Z)(e.Jn());try{for(s.s();!(n=s.n()).done;){var h=n.value;if(5===h.Un&&!h.At.wu(t)){i.Ut().Yn(h.At);break}}}catch(a){s.e(a)}finally{s.f()}}})))}},{key:"hm",value:function(){this.Hv()}},{key:"Hv",value:function(){for(var t=this.Hi.uc(),i=t.length,e=this.Pv.length,n=i;n<e;n++){var s=C(this.Pv.pop());this.Ev.removeChild(s.Yf()),s.jp().v(this),s.M()}for(var h=e;h<i;h++){var r=new tn(this,t[h]);r.jp().l(this.om.bind(this),this),this.Pv.push(r),this.Ev.insertBefore(r.Yf(),this.Wv.Yf())}for(var a=0;a<i;a++){var u=t[a],l=this.Pv[a];l.tp()!==u?l.Dp(u):l.Rp()}this.Uv(),this.sm()}},{key:"_m",value:function(t,i,e){var n,s,h=new Map;if(null!==t&&this.Hi.wt().forEach((function(i){var e=i.Ln().jh(t);null!==e&&h.set(i,e)})),null!==t){var r=null===(n=this.Hi.yt().Ui(t))||void 0===n?void 0:n.M_;void 0!==r&&(s=r)}var a=this.Ut().hc(),u=null!==a&&a.ac instanceof Wi?a.ac:void 0,l=null!==a&&void 0!==a.Ep?a.Ep.nr:void 0;return{_t:s,Ys:null!=t?t:void 0,um:null!=i?i:void 0,dm:u,fm:h,pm:l,vm:null!=e?e:void 0}}},{key:"om",value:function(t,i,e){var n=this;this.pp.m((function(){return n._m(t,i,e)}))}},{key:"Fv",value:function(t,i,e){var n=this;this.Xu.m((function(){return n._m(t,i,e)}))}},{key:"Uv",value:function(){var t=this.un.timeScale.visible?"":"none";this.Wv.Yf().style.display=t}},{key:"tm",value:function(){return this.Pv[0].tp().zo().F().visible}},{key:"im",value:function(){return this.Pv[0].tp().Vo().F().visible}},{key:"jv",value:function(){var t=this;return"ResizeObserver"in window&&(this.Lv=new ResizeObserver((function(i){var e=i.find((function(i){return i.target===t.Iv}));e&&t.$v(e.contentRect.width,e.contentRect.height)})),this.Lv.observe(this.Iv,{box:"border-box"}),!0)}},{key:"Xv",value:function(){null!==this.Lv&&this.Lv.disconnect()}}]),t}();function un(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function ln(t,i,e,n){var s=e.value,h={Ys:i,_t:t,At:[s,s,s,s],M_:n};return void 0!==e.color&&(h.D=e.color),h}function on(t){return void 0!==t.At}function cn(t){return function(i,e,n,s){return void 0===(h=n).open&&void 0===h.value?{_t:i,Ys:e,M_:s}:t(i,e,n,s);var h}}var fn={Candlestick:cn((function(t,i,e,n){var s={Ys:i,_t:t,At:[e.open,e.high,e.low,e.close],M_:n};return void 0!==e.color&&(s.D=e.color),void 0!==e.borderColor&&(s.Ot=e.borderColor),void 0!==e.wickColor&&(s.Dh=e.wickColor),s})),Bar:cn((function(t,i,e,n){var s={Ys:i,_t:t,At:[e.open,e.high,e.low,e.close],M_:n};return void 0!==e.color&&(s.D=e.color),s})),Area:cn((function(t,i,e,n){var s=e.value,h={Ys:i,_t:t,At:[s,s,s,s],M_:n};return void 0!==e.lineColor&&(h.ot=e.lineColor),void 0!==e.topColor&&(h.bs=e.topColor),void 0!==e.bottomColor&&(h.gs=e.bottomColor),h})),Baseline:cn((function(t,i,e,n){var s=e.value,h={Ys:i,_t:t,At:[s,s,s,s],M_:n};return void 0!==e.topLineColor&&(h.be=e.topLineColor),void 0!==e.bottomLineColor&&(h.ge=e.bottomLineColor),void 0!==e.topFillColor1&&(h.de=e.topFillColor1),void 0!==e.topFillColor2&&(h.fe=e.topFillColor2),void 0!==e.bottomFillColor1&&(h.pe=e.bottomFillColor1),void 0!==e.bottomFillColor2&&(h.ve=e.bottomFillColor2),h})),Histogram:cn(ln),Line:cn(ln)};function vn(t){return fn[t]}function dn(t){return 60*t*60*1e3}function yn(t){return 60*t*1e3}var pn=[{bm:(1,1e3),w_:10},{bm:yn(1),w_:20},{bm:yn(5),w_:21},{bm:yn(30),w_:22},{bm:dn(1),w_:30},{bm:dn(3),w_:31},{bm:dn(6),w_:32},{bm:dn(12),w_:33}];function mn(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var e=pn.length-1;e>=0;--e)if(Math.floor(i.getTime()/pn[e].bm)!==Math.floor(t.getTime()/pn[e].bm))return pn[e].w_;return 0}function kn(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t.length){for(var e=0===i?null:t[i-1]._t.u_,n=null!==e?new Date(1e3*e):null,s=0,h=i;h<t.length;++h){var r=t[h],a=new Date(1e3*r._t.u_);null!==n&&(r.g_=mn(a,n)),s+=r._t.u_-(e||r._t.u_),e=r._t.u_,n=a}if(0===i&&t.length>1){var u=Math.ceil(s/(t.length-1)),l=new Date(1e3*(t[0]._t.u_-u));t[0].g_=mn(new Date(1e3*t[0]._t.u_),l)}}}function gn(t){if(!Ne(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{u_:Math.round(i.getTime()/1e3),__:t}}function bn(t){if(!Fe(t))throw new Error("time must be of type isUTCTimestamp");return{u_:t}}function wn(t){return 0===t.length?null:Ne(t[0].time)?gn:bn}function _n(t){return Fe(t)?bn(t):Ne(t)?gn(t):gn(Mn(t))}function Mn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Sn(t){I(t.time)&&(t.time=Mn(t.time))}function zn(t){return{Ys:0,gm:new Map,yl:t}}function Cn(t){if(void 0!==t&&0!==t.length)return{wm:t[0]._t.u_,Mm:t[t.length-1]._t.u_}}function xn(t){var i;return t.forEach((function(t){void 0===i&&(i=t.M_)})),C(i)}function Tn(t){void 0===t.M_&&(t.M_=t.time)}var Zn=function(){function t(){(0,c.Z)(this,t),this.Sm=new Map,this.xm=new Map,this.ym=new Map,this.km=[]}return(0,f.Z)(t,[{key:"M",value:function(){this.Sm.clear(),this.xm.clear(),this.ym.clear(),this.km=[]}},{key:"Cm",value:function(t,i){var e=this,n=0!==this.Sm.size,s=!1,h=this.xm.get(t);if(void 0!==h)if(1===this.xm.size)n=!1,s=!0,this.Sm.clear();else{var a,u=(0,r.Z)(this.km);try{for(u.s();!(a=u.n()).done;){a.value.pointData.gm.delete(t)&&(s=!0)}}catch(y){u.e(y)}finally{u.f()}}var l=[];if(0!==i.length){var o=i;o.forEach((function(t){return Tn(t)})),function(t){t.forEach(Sn)}(i);var c=x(wn(i)),f=vn(t.Lh());l=o.map((function(i){var n=c(i.time),h=e.Sm.get(n.u_);void 0===h&&(h=zn(n),e.Sm.set(n.u_,h),s=!0);var r=f(n,h.Ys,i,i.M_);return h.gm.set(t,r),r}))}n&&this.Tm(),this.Pm(t,l);var v=-1;if(s){var d=[];this.Sm.forEach((function(t){d.push({g_:0,_t:t.yl,pointData:t,M_:xn(t.gm)})})),d.sort((function(t,i){return t._t.u_-i._t.u_})),v=this.Rm(d)}return this.Dm(t,v,function(t,i){var e=Cn(t),n=Cn(i);if(void 0!==e&&void 0!==n)return{ml:e.Mm>=n.Mm&&e.wm>=n.wm}}(this.xm.get(t),h))}},{key:"Ac",value:function(t){return this.Cm(t,[])}},{key:"Bm",value:function(t,i){var e=i;Tn(e),Sn(i);var n=x(wn([i]))(i.time),s=this.ym.get(t);if(void 0!==s&&n.u_<s.u_)throw new Error("Cannot update oldest data, last time=".concat(s.u_,", new time=").concat(n.u_));var h=this.Sm.get(n.u_),r=void 0===h;void 0===h&&(h=zn(n),this.Sm.set(n.u_,h));var a=vn(t.Lh())(n,h.Ys,i,e.M_);h.gm.set(t,a),this.Am(t,a);var u={ml:on(a)};if(!r)return this.Dm(t,-1,u);var l={g_:0,_t:h.yl,pointData:h,M_:xn(h.gm)},o=At(this.km,l._t.u_,(function(t,i){return t._t.u_<i}));this.km.splice(o,0,l);for(var c=o;c<this.km.length;++c)En(this.km[c].pointData,c);return kn(this.km,o),this.Dm(t,o,u)}},{key:"Am",value:function(t,i){var e=this.xm.get(t);void 0===e&&(e=[],this.xm.set(t,e));var n=0!==e.length?e[e.length-1]:null;null===n||i._t.u_>n._t.u_?on(i)&&e.push(i):on(i)?e[e.length-1]=i:e.splice(-1,1),this.ym.set(t,i._t)}},{key:"Pm",value:function(t,i){0!==i.length?(this.xm.set(t,i.filter(on)),this.ym.set(t,i[i.length-1]._t)):(this.xm.delete(t),this.ym.delete(t))}},{key:"Tm",value:function(){var t,i=(0,r.Z)(this.km);try{for(i.s();!(t=i.n()).done;){var e=t.value;0===e.pointData.gm.size&&this.Sm.delete(e._t.u_)}}catch(n){i.e(n)}finally{i.f()}}},{key:"Rm",value:function(t){for(var i=-1,e=0;e<this.km.length&&e<t.length;++e){var n=this.km[e],s=t[e];if(n._t.u_!==s._t.u_){i=e;break}s.g_=n.g_,En(s.pointData,e)}if(-1===i&&this.km.length!==t.length&&(i=Math.min(this.km.length,t.length)),-1===i)return-1;for(var h=i;h<t.length;++h)En(t[h].pointData,h);return kn(t,i),this.km=t,i}},{key:"Om",value:function(){if(0===this.xm.size)return null;var t=0;return this.xm.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Ys))})),t}},{key:"Dm",value:function(t,i,e){var n={Lm:new Map,yt:{eu:this.Om()}};if(-1!==i)this.xm.forEach((function(i,s){n.Lm.set(s,{ar:i,Im:s===t?e:void 0})})),this.xm.has(t)||n.Lm.set(t,{ar:[],Im:e}),n.yt.Em=this.km,n.yt.zm=i;else{var s=this.xm.get(t);n.Lm.set(t,{ar:s||[],Im:e})}return n}}]),t}();function En(t,i){t.Ys=i,t.gm.forEach((function(t){t.Ys=i}))}function Ln(t){return{value:t.At[3],time:t.M_}}function Nn(t){var i=Ln(t);return void 0!==t.D&&(i.color=t.D),i}function Fn(t){return{open:t.At[0],high:t.At[1],low:t.At[2],close:t.At[3],time:t.M_}}var Bn={Area:function(t){var i=Ln(t);return void 0!==t.ot&&(i.lineColor=t.ot),void 0!==t.bs&&(i.topColor=t.bs),void 0!==t.gs&&(i.bottomColor=t.gs),i},Line:Nn,Baseline:function(t){var i=Ln(t);return void 0!==t.be&&(i.topLineColor=t.be),void 0!==t.ge&&(i.bottomLineColor=t.ge),void 0!==t.de&&(i.topFillColor1=t.de),void 0!==t.fe&&(i.topFillColor2=t.fe),void 0!==t.pe&&(i.bottomFillColor1=t.pe),void 0!==t.ve&&(i.bottomFillColor2=t.ve),i},Histogram:Nn,Bar:function(t){var i=Fn(t);return void 0!==t.D&&(i.color=t.D),i},Candlestick:function(t){var i=Fn(t),e=t.D,n=t.Ot,s=t.Dh;return void 0!==e&&(i.color=e),void 0!==n&&(i.borderColor=n),void 0!==s&&(i.wickColor=s),i}};function Pn(t){return Bn[t]}var Rn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2}},An={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:j,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Dn={width:0,height:0,autoSize:!1,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:j},crosshair:{vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},Rn),leftPriceScale:Object.assign(Object.assign({},Rn),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Rn),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1},watermark:An,localization:{locale:Be?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Vn={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},On={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Un={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},In={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Wn={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Hn={color:"#26a69a",base:0},Yn={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Gn=function(){function t(i,e){(0,c.Z)(this,t),this.Vm=i,this.Nm=e}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.Vm.Ut().oc(this.Nm,t)}},{key:"options",value:function(){return this.zi().F()}},{key:"width",value:function(){return bt(this.Nm)?this.Vm.Qv(this.Nm):0}},{key:"zi",value:function(){return x(this.Vm.Ut()._c(this.Nm)).Bt}}]),t}(),jn={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Kn=function(){function t(i){(0,c.Z)(this,t),this.wh=i}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.wh.kh(t)}},{key:"options",value:function(){return this.wh.F()}},{key:"Fm",value:function(){return this.wh}}]),t}(),Xn=function(){function t(i,e,n){(0,c.Z)(this,t),this.Ts=i,this.Wm=e,this.jm=n}return(0,f.Z)(t,[{key:"priceFormatter",value:function(){return this.Ts.Bl()}},{key:"priceToCoordinate",value:function(t){var i=this.Ts.Tt();return null===i?null:this.Ts.Bt().Dt(t,i.At)}},{key:"coordinateToPrice",value:function(t){var i=this.Ts.Tt();return null===i?null:this.Ts.Bt().pn(t,i.At)}},{key:"barsInLogicalRange",value:function(t){if(null===t)return null;var i=new Ce(new ke(t.from,t.to)).C_(),e=this.Ts.Ln();if(e.Ni())return null;var n=e.jh(i.Ms(),1),s=e.jh(i.ci(),-1),h=x(e.Nh()),r=x(e.On());if(null!==n&&null!==s&&n.Ys>s.Ys)return{barsBefore:t.from-h,barsAfter:r-t.to};var a={barsBefore:null===n||n.Ys===h?t.from-h:n.Ys-h,barsAfter:null===s||s.Ys===r?r-t.to:r-s.Ys};return null!==n&&null!==s&&(a.from=n._t.__||n._t.u_,a.to=s._t.__||s._t.u_),a}},{key:"setData",value:function(t){this.Ts.Lh(),this.Wm.$m(this.Ts,t)}},{key:"update",value:function(t){this.Ts.Lh(),this.Wm.Hm(this.Ts,t)}},{key:"dataByIndex",value:function(t,i){var e=this.Ts.Ln().jh(t,i);return null===e?null:Pn(this.seriesType())(e)}},{key:"setMarkers",value:function(t){var i=t.map((function(t){return Object.assign(Object.assign({},t),{originalTime:t.time,time:_n(t.time)})}));this.Ts.gl(i)}},{key:"markers",value:function(){return this.Ts.wl().map((function(t){var i=t.originalTime,e=(t.time,function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e}(t,["originalTime","time"]));return Object.assign({time:i},e)}))}},{key:"applyOptions",value:function(t){this.Ts.kh(t)}},{key:"options",value:function(){return H(this.Ts.F())}},{key:"priceScale",value:function(){return this.jm.priceScale(this.Ts.Bt().zl())}},{key:"createPriceLine",value:function(t){var i=V(H(jn),t),e=this.Ts.Ml(i);return new Kn(e)}},{key:"removePriceLine",value:function(t){this.Ts.Sl(t.Fm())}},{key:"seriesType",value:function(){return this.Ts.Lh()}}]),t}(),Jn=function(){function t(i,e){(0,c.Z)(this,t),this.Um=new D,this.E_=new D,this.uv=new D,this.Hi=i,this.wo=i.yt(),this.Wv=e,this.wo.Su().l(this.qm.bind(this)),this.wo.xu().l(this.Ym.bind(this)),this.Wv.gv().l(this.Xm.bind(this))}return(0,f.Z)(t,[{key:"M",value:function(){this.wo.Su().v(this),this.wo.xu().v(this),this.Wv.gv().v(this),this.Um.M(),this.E_.M(),this.uv.M()}},{key:"scrollPosition",value:function(){return this.wo.ou()}},{key:"scrollToPosition",value:function(t,i){i?this.wo.gu(t,1e3):this.Hi.Gn(t)}},{key:"scrollToRealTime",value:function(){this.wo.bu()}},{key:"getVisibleRange",value:function(){var t,i,e=this.wo.G_();return null===e?null:{from:null!==(t=e.from.__)&&void 0!==t?t:e.from.u_,to:null!==(i=e.to.__)&&void 0!==i?i:e.to.u_}}},{key:"setVisibleRange",value:function(t){var i={from:_n(t.from),to:_n(t.to)},e=this.wo.iu(i);this.Hi.Oc(e)}},{key:"getVisibleLogicalRange",value:function(){var t=this.wo.K_();return null===t?null:{from:t.Ms(),to:t.ci()}}},{key:"setVisibleLogicalRange",value:function(t){z(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.Oc(t)}},{key:"resetTimeScale",value:function(){this.Hi.Zn()}},{key:"fitContent",value:function(){this.Hi.Cu()}},{key:"logicalToCoordinate",value:function(t){var i=this.Hi.yt();return i.Ni()?null:i.Et(t)}},{key:"coordinateToLogical",value:function(t){return this.wo.Ni()?null:this.wo.ru(t)}},{key:"timeToCoordinate",value:function(t){var i=_n(t),e=this.wo.Fl(i,!1);return null===e?null:this.wo.Et(e)}},{key:"coordinateToTime",value:function(t){var i,e=this.Hi.yt(),n=e.ru(t),s=e.vn(n);return null===s?null:null!==(i=s.__)&&void 0!==i?i:s.u_}},{key:"width",value:function(){return this.Wv.qp().width}},{key:"height",value:function(){return this.Wv.qp().height}},{key:"subscribeVisibleTimeRangeChange",value:function(t){this.Um.l(t)}},{key:"unsubscribeVisibleTimeRangeChange",value:function(t){this.Um.p(t)}},{key:"subscribeVisibleLogicalRangeChange",value:function(t){this.E_.l(t)}},{key:"unsubscribeVisibleLogicalRangeChange",value:function(t){this.E_.p(t)}},{key:"subscribeSizeChange",value:function(t){this.uv.l(t)}},{key:"unsubscribeSizeChange",value:function(t){this.uv.p(t)}},{key:"applyOptions",value:function(t){this.wo.kh(t)}},{key:"options",value:function(){return H(this.wo.F())}},{key:"qm",value:function(){this.Um.g()&&this.Um.m(this.getVisibleRange())}},{key:"Ym",value:function(){this.E_.g()&&this.E_.m(this.getVisibleLogicalRange())}},{key:"Xm",value:function(t){this.uv.m(t.width,t.height)}}]),t}();function qn(t){return function(t){if(W(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale){var e=t.handleScale,n=e.axisPressedMouseMove,s=e.axisDoubleClickReset;W(n)&&(t.handleScale.axisPressedMouseMove={time:n,price:n}),W(s)&&(t.handleScale.axisDoubleClickReset={time:s,price:s})}var h=t.handleScroll;W(h)&&(t.handleScroll={horzTouchDrag:h,vertTouchDrag:h,mouseWheel:h,pressedMouseMove:h})}(t),t}var Qn=function(){function t(i,e){var n=this;(0,c.Z)(this,t),this.Zm=new Zn,this.Km=new Map,this.Gm=new Map,this.Jm=new D,this.Qm=new D;var s=void 0===e?H(Dn):V(H(Dn),qn(e));this.Vm=new an(i,s),this.Vm.jp().l((function(t){n.Jm.g()&&n.Jm.m(n.tb(t()))}),this),this.Vm.fc().l((function(t){n.Qm.g()&&n.Qm.m(n.tb(t()))}),this);var h=this.Vm.Ut();this.ib=new Jn(h,this.Vm.Yv())}return(0,f.Z)(t,[{key:"remove",value:function(){this.Vm.jp().v(this),this.Vm.fc().v(this),this.ib.M(),this.Vm.M(),this.Km.clear(),this.Gm.clear(),this.Jm.M(),this.Qm.M(),this.Zm.M()}},{key:"resize",value:function(t,i,e){this.autoSizeActive()||this.Vm.$v(t,i,e)}},{key:"addAreaSeries",value:function(t){return this.nb("Area",In,t)}},{key:"addBaselineSeries",value:function(t){return this.nb("Baseline",Wn,t)}},{key:"addBarSeries",value:function(t){return this.nb("Bar",On,t)}},{key:"addCandlestickSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(t),this.nb("Candlestick",Vn,t)}},{key:"addHistogramSeries",value:function(t){return this.nb("Histogram",Hn,t)}},{key:"addLineSeries",value:function(t){return this.nb("Line",Un,t)}},{key:"removeSeries",value:function(t){var i=C(this.Km.get(t)),e=this.Zm.Ac(i);this.Vm.Ut().Ac(i),this.sb(e),this.Km.delete(t),this.Gm.delete(i)}},{key:"$m",value:function(t,i){this.sb(this.Zm.Cm(t,i))}},{key:"Hm",value:function(t,i){this.sb(this.Zm.Bm(t,i))}},{key:"subscribeClick",value:function(t){this.Jm.l(t)}},{key:"unsubscribeClick",value:function(t){this.Jm.p(t)}},{key:"subscribeCrosshairMove",value:function(t){this.Qm.l(t)}},{key:"unsubscribeCrosshairMove",value:function(t){this.Qm.p(t)}},{key:"priceScale",value:function(t){return new Gn(this.Vm,t)}},{key:"timeScale",value:function(){return this.ib}},{key:"applyOptions",value:function(t){this.Vm.kh(qn(t))}},{key:"options",value:function(){return this.Vm.F()}},{key:"takeScreenshot",value:function(){return this.Vm.Gv()}},{key:"autoSizeActive",value:function(){return this.Vm.nm()}},{key:"nb",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var e=Math.round(t);if(Math.abs(e-t)<1e-8)return i;t*=10}return i}(i.minMove))}}(e.priceFormat);var n=V(H(Yn),H(i),e),s=this.Vm.Ut().Dc(t,n),h=new Xn(s,this,this);return this.Km.set(h,s),this.Gm.set(s,h),h}},{key:"sb",value:function(t){var i=this.Vm.Ut();i.Pc(t.yt.eu,t.yt.Em,t.yt.zm),t.Lm.forEach((function(t,i){return i.tt(t.ar,t.Im)})),i.lu()}},{key:"eb",value:function(t){return C(this.Gm.get(t))}},{key:"tb",value:function(t){var i=this,e=new Map;t.fm.forEach((function(t,n){var s=Pn(n.Lh())(t);z(function(t){return void 0!==t.open||void 0!==t.value}(s)),e.set(i.eb(n),s)}));var n=void 0===t.dm?void 0:this.eb(t.dm);return{time:t._t,logical:t.Ys,point:t.um,hoveredSeries:n,hoveredObjectId:t.pm,seriesData:e,sourceEvent:t.vm}}}]),t}();function $n(t,i){var e;if(I(t)){var n=document.getElementById(t);z(null!==n,"Cannot find element in DOM with id=".concat(t)),e=n}else e=t;return new Qn(e,i)}}}]);
//# sourceMappingURL=63.1a35b946.chunk.js.map